{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./index.js","webpack:///./fruitMachineCore.js","webpack:///./fruitMachineConfiguration.js","webpack:///./fruitMachineData.js","webpack:///./fruitMachineAssets/one.png","webpack:///./fruitMachineAssets/two.png","webpack:///./fruitMachineAssets/three.png","webpack:///./fruitMachineAssets/four.png","webpack:///./fruitMachineAssets/five.png","webpack:///./fruitMachineAssets/six.png","webpack:///./fruitMachineAssets/seven.png","webpack:///./fruitMachineAssets/eight.png","webpack:///./fruitMachineAssets/nine.png","webpack:///./fruitMachineAssets/ten.png","webpack:///./fruitMachineAssets/eleven.png","webpack:///./fruitMachineAssets/twelve.png","webpack:///./fruitMachineAssets/cherry.png","webpack:///./fruitMachineAssets/strawberry.png","webpack:///./fruitMachineAssets/apple.png","webpack:///./fruitMachineAssets/orange.png","webpack:///./fruitMachineAssets/coconut.png","webpack:///./fruitMachineAssets/watermelon.png","webpack:///./fruitMachineAssets/rose.png","webpack:///./fruitMachineAssets/bell.png","webpack:///./fruitMachineAssets/star.png","webpack:///./fruitMachineAssets/diamond.png","webpack:///./fruitMachineAssets/gold-coin.png","webpack:///./fruitMachineAssets/wild.png","webpack:///./fruitMachineAssets/dice-one.png","webpack:///./fruitMachineAssets/dice-two.png","webpack:///./fruitMachineAssets/dice-three.png","webpack:///./fruitMachineAssets/dice-four.png","webpack:///./fruitMachineAssets/dice-five.png","webpack:///./fruitMachineAssets/dice-six.png","webpack:///./fruitMachineAssets/game-over.png","webpack:///./fruitMachineAssets/mystery.png","webpack:///./fruitMachineAssets/fbBonus.png","webpack:///./fruitMachineAssets/arrow.png","webpack:///./fruitMachineAssets/multi-add.png","webpack:///./fruitMachineAssets/plus-streak.png","webpack:///./fruitMachineAssets/minus-money.png","webpack:///./fruitMachineAssets/plus-money.png","webpack:///./fruitMachineAssets/plus-strike.png","webpack:///./fruitMachineAssets/plus-nudge.png","webpack:///./fruitMachine.js","webpack:///./featureBoard.js","webpack:///./oneUp/oneUp.js","webpack:///./fruitMachineAssets/zero.png","webpack:///./fruitMachineAssets/bonus.png","webpack:///./measureMeter/measureMeter.js","webpack:///./numberPicker/numberPicker.js","webpack:///./helpers.js","webpack:///./fruitMachineAssets/heart.png","webpack:///./fruitMachineAssets/icon.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","require","FruitMachineCore","THREE","element","addEventListener","init","unInit","onResize","localStorage","setItem","this","amountOfCoins","container","document","querySelector","assign","Configuration","FruitMachineData","FeatureBoardData","width","innerWidth","height","innerHeight","createVariables","createDynamicVariables","addPlugins","createScene","createCamera","createLights","createFruitMachine","createFeatureBoard","helperTips","createRenderer","featureBoardDevelop","developingFeatureBoard","fruitMachineDevelop","developingFruitMachine","fruitMachineInitAnimationFlag","eventDispatcher","renderer","setAnimationLoop","update","getItem","parseInt","startingCoins","remove","camera","aspect","updateProjectionMatrix","setSize","enableHelperTips","tippy","content","ref","id","getAttribute","getElementById","interactive","placement","trigger","querySelectorAll","map","ht","ev","target","classList","toggle","showDOMelements","contains","show","identifiers","dm","el","add","mesh","helperTip","CSS2DObject","array","falses","f","zeros","z","arrays","a","threeGroups","tg","Group","assignVariables","flashOpacityCounter","fruitMachineInitAnimationData","reelFaces","reelEdges","buttons","numberReel","nudgeReelCounter","Array","numberOfReels","fill","reelHeldCounter","enableNumbers","bonuses","filter","b","functionToRun","reelYPos","numberOfNumbers","numbers","numberOfFruits","fruits","enableBonus","oneRotation","spinLength","rwxGeometry","toRadians","numberOfFullRotations","spinMoveBackDegrees","degreesToMoveBackBeforeSpinning","spinDuration","spinReelsDuration","spinMoveBackDuration","zoomThroughReelsZ","reelSize","zoomThroughReelsZPercentage","zoomThroughReelsFinishX","reelWidth","reelSpacing","zoomThroughReelsXGap","zoomThroughReelsStartX","zoomThroughReelsStep1Duration","winAnimationDuration","zoomThroughReelsStep2Duration","zoomThroughReelsStep3Duration","winSpinLength","reelStrikeDataInitial","verticalCounter","horizontalCounter","timeoutCounter","direction","reelStrikeData","rollEvenOddDegrees","rollEvenOddSpeed","fbCameraDistance","outerBoardCubeSpacing","cubeSize","innerBoardCubeSpacing","innerBoardDistance","innerBoardInactiveOpacity","currentBoard","cubeLightPosition","Vector3","diceSpinLength","diceSpinFullRotations","fbDOMElements","domID","position","Vector2","helperTipID","collectables","variable","text","fmMethodToCall","fmLinkVariable","availableForMultiAdd","maxNumberOfIcons","initialAnimationConfigurables","reelEdgeOffset","reelFaceOffset","amountOfSpin","cameraX","cameraZ","timeoutPerCube","cameraPositionDefault","featureCameraPositionDefault","raycaster","Raycaster","mouse","amountOfCoins1","set","v","rwxNumberSwitchers","switch","amountOfReelStrikes1","rwxNoticeBox","close","word","setValue","amountOfNudges1","flashButtonsReset","flashButtonsFlag","reverseNudge","hasHolds2","innerText","streakStrengthCount1","streakMeter","to","reelStrikeCount1","nudgeCount1","coinCount1","setConfig","delay","rwxDuoSelector","rwxSlideTicker","rwxTombola","MeasureMeter","numberPicker","NumberPicker","scene","Scene","background","Color","backgroundColor","fieldOfView","aspectRatio","PerspectiveCamera","x","y","RectAreaLightUniformsLib","reelIllumination","RectAreaLight","reelIlluminationColor","sceneLight","HemisphereLight","reelsColor","featureBoardLight","DirectionalLight","cubeLight","PointLight","WebGLRenderer","antialias","sortObjects","setPixelRatio","devicePixelRatio","physicallyCorrectLights","appendChild","domElement","labelRenderer","CSS2DRenderer","style","top","body","featureActive","keyCode","collect","hilo","rollDiceEvent","ableToGambleHI","ableToGambleLO","streakRunning","spinReelsEvent","rollEvenOddFlag","rollEvenOddStop","stoppaOrTaxiRunning","stopStoppaOrTaxi","reelStrikeFlag","stopReelStrike","hasNudges","hasHolds","stoppaReelFlag","clientX","clientY","setFromCamera","intersects","intersectObjects","reelControlButtons","nudgeReelEvent","reelIndex","holdReelEvent","stoppaReelEvent","arr","setValues","then","winner","err","console","log","render","fruitMachineInitAnimation","featureBoardInitAnimationFlag","featureBoardInitAnimation","spinReelsFlag","spinReels","nudgeReelFlag","nudgeReel","stoppaReel","reelStrike","flashButtons","numberReelSpinFlag","spinNumberReel","hasWonFlag","winAnimation","hasFeatureFlag","toFeatureAnimation","rollDiceFlag","rollDice","endFeatureFlag","toFruitMachineAnimation","rotateFeatureBoardCubeFlag","rotateFeatureBoardCube","moveInFlag","moveIn","moveOutFlag","moveOut","rollEvenOdd","lookAt","de","switchLights","dice","outerCubes","cube","rotation","material","opacity","entries","reelFace","face","finish","reel","button","finishy","reelEdge","edge","outline","app","intensity","hasCollected","heartsArray","h","clear","iconsArray","fbPersistentZGroup","innerCubes","ic","resetNumberTrail","winSpin","val","rwxAnimate","getEasingValue","reels","fromToCalc","nextSpinValues","zoomThroughReelsStep1","zoomThroughReelsStep2","fromTo","winSpinEase","zoomThroughReelsStep1Ease","zoomThroughReelsStep2Ease","zoomToDefaultCameraStep1","afterFeatureBoard","zoomToDefaultCameraStep1Ease","addToX","FruitMachine","freePlay","costPerSpin","reelWinProbability","spinTimeout","winJudderDuration","nudgeProbability","nudgeDuration","holdProbability","flashButtonsSpeed","bonusStoppaReelSpeed","bonusStoppaReelIncrement","reelStrikeSpeed","streakBounds","superStreakBounds","megaStreakBounds","numbersBonus","numberTrailHeldProbability","numberMaximumOnReels","numberTrailHeldColor","numberHighlightColor","numberBonusColor","numberFeatureStartColor","cubeColor","diceColor","numberOfOuterBoardSquares","numberOfInnerBoardSquares","diceSize","diceSpinDuration","diceGambleWinProbability","streakStrengthMax","moveCubeSpeed","stoppaOrTaxiTimeout","texture","TextureLoader","load","coinValue","fruitMachineBonuses","displayName","diceNumbers","cubeTextures","type","outerAmountOfSquares","innerAmountOfSquares","functionToRunValues","values","diceLayouts","1","2","3","4","5","6","7","8","9","10","11","12","featureBoardBonuses","featureBoardMystery","createReels","createNumberReel","buttonShape","Shape","moveTo","lineTo","buttonGeometry","ExtrudeBufferGeometry","steps","depth","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","buttonMaterial","MeshStandardMaterial","color","transparent","buttonMesh","Mesh","buttonYPosition","startVectors","starty","checkAndApplyHelperTip","nextX","nextZ","numberReelFaceGeometry","numberReelFaceMaterial","numberReelFaceMesh","numberReelFaceGroup","numberTextureGeometry","numberTextureMaterial","numberTextureMesh","clone","rwxMisc","safeCloneArrayOfObjects","reverse","numberReelSize","numberReelWidth","numberReelOneRotation","startRotation","numberReelGroup","numberReelFaceSideLength","Math","sin","PI","numberReelFaceAngle","numberReelEdgeGeometry","CylinderBufferGeometry","numberReelEdgeMaterial","flatShading","numberReelEdgeMesh","numberReelEdgeMesh2","nr","reelFaceColor","cos","BoxBufferGeometry","polygonOffset","polygonOffsetFactor","renderOrder","numberReelFaces","finishVectors","start","reelNumberGeometry","reelNumberMaterial","reelNumberMesh","reelFaceGeometry","reelFaceMaterial","reelFaceMesh","reelFaceEdge","reelFaceOutline","reelFruitGeometry","reelFruitMaterial","reelFruitMesh","reelEdgeGeometry","reelEdgeMaterial","reelEdgeMesh","reelEdgeMesh2","reelEdgeEdge","reelEdgeOutline","reelEdgeOutline2","reelGroup","reelFaceGroup","fx","fz","fnextX","fnextZ","reelFaceSideLength","reelFaceAngle","xPosition","bonusReelPosition","rwxMath","randomInt","shuffleArray","rn","number","randomFruit","safeCloneObject","reelFruits","sizeDivide","undefined","EdgesGeometry","LineSegments","LineBasicMaterial","timeout","setReelRotation","createButton","hasBonus","hasFeature","amountOfNudges","updateNumberTrail","toFeatureBoard","winValue","setTombola","streakFruitIndex","streakFruits","reelsHaveSpunCallback","determineWin","assignHolds","assignNudges","ri","rr","currentFruits","sameAsPrev","prevName","index","findIndex","radians","currentSpinValues","fruitsArray","moneyArray","sort","streakLength","streakArrBounds","floor","superStreakArrBounds","megaStreakArrBounds","maxCoinValue","fruitName","reelNumbers","numberTrailHeld","numberTrailHeldFromBonus","spinNumberReelStep1","spinNumberReelStep1Ease","numberReelPreviousRotation","numberReelCurrentRotation","amountOfReelStrikes","strength","calculateStreakWinnersArray","streak","cachedRotations","stoppaReelIndex","stoppaReelPause","bonusStoppaReelSpeedDegrees","trailHeld","determineNumbers","reelStrikes","some","numbersInView","spinNumbersTotal","cf","before","after","every","first","is","isWin","determineFeature","determineBonus","reelToNudge","determineWinLine","reelsHaveNudged","win","hasReelStrikes","allHeld","rh","reelsHaveSpun","diff","numberOfFruitsPassed","round","counterIndex","res","cache","reelStrikeStopFlag","reelStrikeStep1","verticalToUse","reelStrikeStep1Ease","speed","children","nudgeReelStep1","nudgeReelStep1Ease","spinTimeoutCounter","judderReelCounter","winAnimationTimeoutCounter","judderReels","zoomThroughReelsStep3","counter","jr","val3","flashOpacityDirection","all","fruitMachineInitialAnimationStep3","fruitMachineInitialAnimationStep2","fruitMachineInitialAnimationStep4","fruitMachineInitialAnimationStep5","val4","initialAnimationStep5","val1","val2","FeatureBoard","createCubes","createDice","createHeartsAndIcons","createDOMHolders","fbGeometryGroup","fbCubesGroup","image","ou","OneUp","getNode","geo","mat","label","visible","diceGeometry","diceMesh","materialArray","rotations","addCubeFaceGroups","dn","currentNumber","outerCubesPerSide","innerCubesPerSide","cubeGeometry","cubeBackground","cubeTexture","cubeMesh","bounds","cubeSpacing","outerStartY","outerStartX","innerStartX","innerStartY","indexArrayMap","buildTextureToCubeMappingArray","dontDoAction","cubes","getCurrentBoardCubes","currentNumberIndex","gambleNumber","randomFeatureBoardCubeRotationMesh","diceRolled","diceGambled","diceGambleWon","runCubeAction","gameOver","nos","getCurrentNumberOfSquares","newNumber","interval","setInterval","prevNumberIndex","setPointLightToCube","clearInterval","outerBoard","reservedIndexes","randomsIndexes","reserved","ct","randoms","leftover","random","config","numberPickerEnabled","withOutNumberPicker","arrayToUse","randomValue","multiAdding","hasNumberPicker","setOptions","stoppaOrTaxiInterval","setTimeout","boardLength","setStoppaOrTaxiTimout","stoppa","includes","fb","hasExtraLife","numberOfHearts","up","hasGame","numberOfIcons","hasMystery","down","endFeature","collectionInterval","collectionFlashing","collected","availableForCollection","collectionCounter","csf","getCurrentSquare","what","cancelCollect","total","remainder","toCompare","keys","ok","rollingEven","rollingOdd","rollEvenOddResetStep1","rollEvenOddResetStep1Ease","getCurrentDiceRotations","stoppaRunning","prevRotations","rotationData","generateRandomRotations","diceLayout","getDiceLayout","geometry","clearGroups","addGroup","Infinity","cs","getWorldPosition","num","spinX","spinY","spinZ","rotateFeatureBoardCubeStep1","rotateFeatureBoardCubeStep1Ease","moveInStep1","moveInStep1Ease","moveOutStep1","moveOutStep1Ease","rollDiceStep1","diceHasRolled","rollDiceStep1Ease","timeoutPerCubeCounter","imgSrc","src","htmlDefinition","scale","rotate","createElement","oneUp","selector","numberOfIntervals","initialValue","measureMeter","prevValue","createIntervals","intervals","amount","amt","timePerOption","zStarter","stop","Promise","resolve","reject","innerHTML","option","options","setAttribute","createTextNode","zIndex","currentOptionIndex","callback","rwxFade","fadeOut","fadeIn","randomOption","helpers"],"mappings":"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","file":"js/index.5092db5c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([134,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","require(\"@babel/polyfill\");\nrequire('./index.scss');\n\nimport rwx from 'roseworx';\n\nimport { FruitMachineCore } from './fruitMachineCore';\n\nnew FruitMachineCore('#fruit-machine-container');\n\n/*\n  TODO  \n\n  finish off writing instructions\n  add help text to toggler\n\n  meta tags for google surfacing and SEO\n\n  find mininmal viable screen dimensions for suitable play and disabled for lower with message saying use bigger device\n  Check if it works on IE on windows partition and different browsers and message saying cant use if not\n*/\n\n/*\n  Future imporovements\n  Feature board - game when you get all icons\n  Win animation - some sort of light show/fireworks when zooming through the reels\n  Feature-board - set the point light to center of each feature board cube, will need to determine which side of screen its on and plus or minus x percentage based on that, same with y. Currently its a bit offset \n  Different themes fruit machines based on images and change background to a theme color or theme image repeat\n  Fruit machine - bank nudges\n  animated switching on and off of the lights between games\n  Sort out featureBoard cubes, make sure none of the same are next to eachother and at least one of each is there.\n  Loading animation instead of plain text\n  fade out the dom-element-hide and show mayb z-opaque it?\n*/\n\n/*\n  Known Bugs\n  Increasing reelWidth fucks up the fruit textures\n  sometimes when nudging, the reel does that thign where it spins backwards to index 0 (im assuming) need to recreate (perhaps set all reelIndexes to fruits.length and see if its that)\n  the animated popout has a line with a slightly darker portion to the right side of it - very noticeable\n  Number reel not working as expect, if no trail held and nudge with numbers on the same reel, the correct number gets highlighted but not rotated\n  coin count up on featureBoard is pulsating when initial feature board\n  when going back to fruitMachine from feature board if reel is held it seems to stay held\n  tippy animation not working\n*/\n\n/*\n  Priority Order\n  0. Feature Start\n  1. Win\n  2. Bonus\n  3. Hold\n  4. Nudges\n*/","import * as THREE from 'three';\n//import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { RectAreaLightUniformsLib } from 'three/examples/jsm/lights/RectAreaLightUniformsLib.js';\nimport { CSS2DRenderer, CSS2DObject } from 'three/examples/jsm/renderers/CSS2DRenderer.js';\n\nimport { Configuration } from './fruitMachineConfiguration.js';\nimport { FruitMachineData, FeatureBoardData } from './fruitMachineData';\nimport { FruitMachine } from './fruitMachine.js';\n\n/* Roseworx */\nimport rwxPreload from 'roseworx/js/modules/rwxPreload';\nimport rwxSlideTicker from 'roseworx/js/components/rwxSlideTicker';\nimport rwxTombola from 'roseworx/js/components/rwxTombola';\nimport rwxNumberSwitchers from 'roseworx/js/components/rwxNumberSwitchers';\nimport rwxNoticeBox from 'roseworx/js/components/rwxNoticeBox';\nimport rwxDuoSelector from 'roseworx/js/components/rwxDuoSelector';\n\nimport rwxMath from 'roseworx/js/helpers/rwxMathHelpers';\nimport rwxGeometry from 'roseworx/js/helpers/rwxGeometryHelpers';\nimport rwxAnimate from 'roseworx/js/helpers/rwxAnimateHelpers';\n\n/* Plugins */\nimport MeasureMeter from './measureMeter/measureMeter.js';\nimport NumberPicker from './numberPicker/numberPicker.js';\nimport tippy from 'tippy.js';\n//require('tippy.js/animations/scale.css');\n\nexport class FruitMachineCore extends FruitMachine {\n\tconstructor(element)\n\t{\n\t\tsuper();\n    window.addEventListener('load', ()=>{this.init(element);});\n    window.addEventListener('unload', ()=>{this.unInit()});\n    window.addEventListener('resize', ()=>{this.onResize()});\n\t}\n\n  unInit()\n  {\n    localStorage.setItem('storedCoins', this.amountOfCoins);\n  }\n\n  init(element)\n  {\n    this.container = document.querySelector(element);\n    if(!this.container){return;}\n\n    Object.assign(this, Configuration);\n    Object.assign(this, FruitMachineData);\n    Object.assign(this, FeatureBoardData);\n\n    this.width = window.innerWidth;\n    this.height = window.innerHeight;    \n\n    this.createVariables();\n    this.createDynamicVariables();\n    this.addPlugins();\n    this.createScene();\n    this.createCamera();\n    this.createLights();\n\n    this.createFruitMachine();\n    this.createFeatureBoard();\n\n    this.helperTips();\n\n    this.createRenderer();\n\n    this.featureBoardDevelop && this.developingFeatureBoard();\n    this.fruitMachineDevelop && this.developingFruitMachine();\n\t\tthis.fruitMachineInitAnimationFlag = (!this.fruitMachineDevelop && !this.featureBoardDevelop);\n    \n    this.eventDispatcher();\n    this.renderer.setAnimationLoop(() => {\n      this.update();\n    });\n\n    this.amountOfCoins = localStorage.getItem('storedCoins') ? parseInt(localStorage.getItem('storedCoins')) : this.startingCoins;\n    document.querySelector('.loading').remove();\n  }\n\n  onResize()\n  {\n    this.width = window.innerWidth;\n    this.height = window.innerHeight;\n    this.camera.aspect = this.width / this.height;\n    this.camera.updateProjectionMatrix();\n    this.renderer.setSize( this.width, this.height );     \n  }\n\n  helperTips()\n  {\n    if(!this.enableHelperTips){return;}\n    new tippy('[helper-tip]', {\n      //animation: 'scale',\n      content(ref) {\n        const id = ref.getAttribute('data-helper-tip-content-id');\n        const template = document.getElementById(id);\n        return template;\n      },\n      interactive:true,\n      placement:'auto',\n      trigger: 'click'\n    });\n    const helperTips = [...document.querySelectorAll('.helper-tip')].map(ht=>ht.id);\n    document.getElementById('helper-tip-toggler').addEventListener('click', (ev)=>{\n      ev.target.classList.toggle('active');\n      this.showDOMelements(ev.target.classList.contains('active'), helperTips);\n    });\n  }\n\n  showDOMelements(show, identifiers)\n  {\n    for(let dm of identifiers)\n    {\n      let el = document.getElementById(dm)\n      show && el.classList.remove('dom-element-hide');\n      !show && el.classList.add('dom-element-hide');\n    }\n  }\n\n  checkAndApplyHelperTip(mesh, id)\n  {\n    if(!this.enableHelperTips){return;}\n    let helperTip = document.getElementById(id);\n    if(helperTip)\n    {\n      helperTip = new CSS2DObject(helperTip);\n      mesh.add(helperTip);\n    }\n  }\n\n  assignVariables(array)\n  {\n  \tarray.falses && array.falses.map((f)=>{this[f] = false;});\n  \tarray.zeros && array.zeros.map((z)=>{this[z] = 0;});\n  \tarray.arrays && array.arrays.map((a)=>{this[a] = [];});\n  \tarray.threeGroups && array.threeGroups.map((tg)=>{this[tg] = new THREE.Group();});\n  }\n\n  createVariables()\n  {\n  \tlet initVariables = {\n  \t\tfalses: ['hasCollected', 'reelStrikeStopFlag', 'reelStrikeFlag', 'featureBoardInitAnimationFlag', 'fruitMachineInitAnimationFlag', 'numberReelSpinFlag', 'hasFeatureFlag', 'stoppaReelFlag', 'hasWonFlag', 'spinReelsFlag', 'nudgeReelFlag', 'flashButtonsFlag', 'rollDiceFlag', 'rotateFeatureBoardCubeFlag', 'moveInFlag', 'moveOutFlag', 'hasHolds2', 'hasBonus', 'numberTrailHeld' ],\n  \t\tzeros: ['spinTimeoutCounter', 'timeoutPerCubeCounter', 'numberOfIcons', 'numberOfHearts', 'amountOfReelStrikes1', 'amountOfNudges1', 'timeoutCounter', 'winValue', 'reelStrikeCount1', 'nudgeCount1', 'coinCount1', 'streakStrengthCount1', 'currentNumberIndex'],\n  \t\tarrays: ['iconsArray', 'heartsArray', 'currentFruits', 'currentSpinValues', 'nextSpinValues', 'reels', 'reelFruits', 'reelControlButtons', 'numberReelFaces', 'outerCubes', 'innerCubes', 'dice'],\n  \t\tthreeGroups: ['fbGeometryGroup', 'fbPersistentZGroup', 'fbCubesGroup']\n  \t};\n\n  \tthis.assignVariables(initVariables);\n\n    this.flashOpacityCounter = 1;\n    this.fruitMachineInitAnimationData = {reelFaces:[], reelEdges: [], buttons: [], numberReel:[]};\n    this.nudgeReelCounter = new Array(this.numberOfReels).fill(0);\n    this.reelHeldCounter = new Array(this.numberOfReels).fill(0);\n    if(!this.enableNumbers)\n    {\n      this.bonuses = this.bonuses.filter(b=>b.functionToRun!=\"bonusNumbersInView\");\n    }\n    this.reelYPos = 8.5;\n    this.numberOfNumbers = this.numbers.length;\n    this.numberOfFruits = this.fruits.length > 5 ? this.fruits.length : 5;\n    if(this.enableBonus){this.numberOfFruits+=1;}\n    this.oneRotation = (360 / this.numberOfFruits);\n    this.spinLength = rwxGeometry.toRadians(360 * this.numberOfFullRotations);\n    this.spinMoveBackDegrees = rwxGeometry.toRadians(this.degreesToMoveBackBeforeSpinning);\n    this.spinDuration = this.spinReelsDuration * 0.92;\n    this.spinMoveBackDuration = this.spinReelsDuration * 0.08;\n    this.zoomThroughReelsZ = this.reelSize * (this.zoomThroughReelsZPercentage/100);\n    this.zoomThroughReelsFinishX = (this.numberOfReels * this.reelWidth) + (this.numberOfReels-1 * this.reelSpacing) + this.zoomThroughReelsXGap;\n    this.zoomThroughReelsStartX = -this.zoomThroughReelsFinishX;\n    this.zoomThroughReelsStep1Duration = this.winAnimationDuration * 0.25;\n    this.zoomThroughReelsStep2Duration = this.winAnimationDuration * 0.50;\n    this.zoomThroughReelsStep3Duration = this.winAnimationDuration * 0.25; \n    this.winSpinLength = rwxGeometry.toRadians(360*2);\n    this.reelStrikeDataInitial = {verticalCounter: 0, horizontalCounter: 0, timeoutCounter: 0, direction: \"fwd\"};\n    this.reelStrikeData = {};\n    Object.assign(this.reelStrikeData, this.reelStrikeDataInitial);\n\n    // feature board\n    this.rollEvenOddDegrees = rwxGeometry.toRadians(this.rollEvenOddSpeed);\n\t\tthis.fbCameraDistance = 40;\n    this.outerBoardCubeSpacing = this.cubeSize+2.5;\n    this.innerBoardCubeSpacing = this.cubeSize+4;\n    this.innerBoardDistance = 50;\n    this.innerBoardInactiveOpacity = 0.1;\n    this.currentBoard = \"outer\";\n    this.cubeLightPosition = new THREE.Vector3();\n    this.diceSpinLength = rwxGeometry.toRadians(360 * this.diceSpinFullRotations);\n    this.fbDOMElements = [\n      {\n        domID: 'feature-board-nudge-count-container',\n        position: new THREE.Vector2(-8, 10),\n        helperTipID: 'helper-tip-fb-nudge-counter'\n      },\n      {\n        domID: 'feature-board-reel-strike-count-container',\n        position: new THREE.Vector2(0, 10),\n        helperTipID: 'helper-tip-fb-reel-strike-counter'\n      },\n      {\n        domID: 'feature-board-coin-count-container',\n        position: new THREE.Vector2(8,10),\n        helperTipID: 'helper-tip-fb-coin-counter'\n      },\n      {\n        domID: 'feature-board-streak-meter-container',\n        position: new THREE.Vector2(0,6),\n        helperTipID: 'helper-tip-fb-streak-meter'\n      },\n      {\n        domID: 'feature-board-heart1-container',\n        position: new THREE.Vector2(-9,-9.5),\n        helperTipID: 'helper-tip-fb-heart-counter'\n      },\n      {\n        domID: 'feature-board-heart2-container',\n        position: new THREE.Vector2(-6, -6)\n      },\n      {\n        domID: 'feature-board-heart3-container',\n        position: new THREE.Vector2(-3, -9.5)\n      },\n      {\n        domID: 'feature-board-icon1-container',\n        position: new THREE.Vector2(3,-9.5),\n        helperTipID: 'helper-tip-fb-icon-counter'\n      },\n      {\n        domID: 'feature-board-icon2-container',\n        position: new THREE.Vector2(6, -6)\n      },\n      {\n        domID: 'feature-board-icon3-container',\n        position: new THREE.Vector2(9, -9.5)\n      }\n    ]\n    this.collectables = [\n      {domID:'feature-board-streak-meter-container', variable: 'streakStrengthCount', text:'Streak', fmMethodToCall: 'streak'}, \n      {domID:'feature-board-nudge-count-container', variable: 'nudgeCount', text:'Nudges', fmLinkVariable: 'amountOfNudges'}, \n      {domID:'feature-board-reel-strike-count-container', variable: 'reelStrikeCount', text:'Reel Strikes', fmLinkVariable: 'amountOfReelStrikes', fmMethodToCall:'reelStrikes'}, \n      {domID:'feature-board-coin-count-container', variable: 'coinCount', text:'Coins', fmLinkVariable: 'amountOfCoins'}\n    ];\n\n    this.availableForMultiAdd = ['add-heart', 'add-icon', 'add-money', 'add-reel-strikes', 'add-streak-strength', 'add-nudges']; // hooks up to a name property in the cubeTextures array to specify which ones can be won on multi add\n    this.maxNumberOfIcons = 3; // maximum number of hearts or icons before extra life/ game\n  \n    //general\n    this.initialAnimationConfigurables = { // for both fruit machine and feature board initial animations\n      reelEdgeOffset: 500,\n      reelFaceOffset: 800,\n      amountOfSpin: rwxGeometry.toRadians(720),\n      cameraX: 100,\n      cameraZ: 40,\n      timeoutPerCube: 10\n    };\n\n    this.cameraPositionDefault = new THREE.Vector3(-10, 27, 55);\n    this.featureCameraPositionDefault = new THREE.Vector3(this.zoomThroughReelsFinishX, this.reelYPos, 0);\n    this.raycaster = new THREE.Raycaster();\n    this.mouse = new THREE.Vector2();\n  }\n\n  createDynamicVariables()\n  {\n    Object.defineProperty(this, 'amountOfCoins', { // for reels\n      get: function () { return this.amountOfCoins1; },\n      set: function (v) {\n        this.amountOfCoins1 = v;\n        rwxNumberSwitchers.switch('coins', v);\n      }\n    });\n\n    Object.defineProperty(this, 'amountOfReelStrikes', { // for reels\n      get: function () { return this.amountOfReelStrikes1 },\n      set: function (v) {\n        this.amountOfReelStrikes1 = v;\n        if(v==0)\n        {\n          this.rwxNoticeBox.close();\n        }\n        else\n        {\n          let word = v == 1 ? 'Strike' : 'Strikes';\n          this.rwxNoticeBox.setValue(`${v} Reel ${word}`, v==0);\n        }\n      }\n    });\n\n    Object.defineProperty(this, 'amountOfNudges', { // for reels\n      get: function () { return this.amountOfNudges1; },\n      set: function (v) {\n        this.amountOfNudges1 = v;\n        if(v==0)\n        {\n          this.rwxNoticeBox.close();\n          this.flashButtonsReset();\n        }\n        else\n        {\n          this.flashButtonsFlag = true;\n          let word = v == 1 ? 'Nudge' : 'Nudges';\n          if(this.reverseNudge){word = 'Reverse '+word}\n          this.rwxNoticeBox.setValue(`${v} ${word}`, v==0);\n        }\n      }\n    });\n\n    Object.defineProperty(this, 'hasHolds', { // for reels\n      get: function () { return this.hasHolds2; },\n      set: function (v) {\n        if(!v)\n        {\n          this.rwxNoticeBox.close();\n          this.flashButtonsReset();\n        }\n        else\n        {\n          this.flashButtonsFlag = true;\n          const innerText = this.hasHolds2 && !v ? '' : 'hold';\n          this.hasHolds2 = v;\n          this.rwxNoticeBox.setValue(innerText);\n        }\n      }\n    });\n\n    Object.defineProperty(this, 'streakStrengthCount', { // for featureboard\n      get: function () { return this.streakStrengthCount1; },\n      set: function (v) {\n        this.streakStrengthCount1 = v;\n        this.streakMeter.to(v);\n      }\n    });\n\n    Object.defineProperty(this, 'reelStrikeCount', { //for featureboard\n      get: function () { return this.reelStrikeCount1; },\n      set: function (v) {\n        this.reelStrikeCount1 = v;\n        rwxNumberSwitchers.switch('feature-board-reel-strike-count', v, true);\n      }\n    });\n\n    Object.defineProperty(this, 'nudgeCount', { // for featureboard\n      get: function () { return this.nudgeCount1; },\n      set: function (v) {\n        this.nudgeCount1 = v;\n        rwxNumberSwitchers.switch('feature-board-nudge-count', v, true);\n      }\n    });\n\n    Object.defineProperty(this, 'coinCount', { // for featureboard\n      get: function () { return this.coinCount1; },\n      set: function (v) {\n        this.coinCount1 = v<0 ? 0 : v;\n        rwxNumberSwitchers.switch('feature-board-coin-count', v);\n      }\n    });\n  }\n\n  addPlugins()\n  {\n    this.rwxNoticeBox = rwxNoticeBox;\n    this.rwxNoticeBox.setConfig({ position: \"bottom-left\", delay: 2 });\n    this.rwxDuoSelector = rwxDuoSelector;\n    this.rwxSlideTicker = rwxSlideTicker;\n    this.rwxTombola = rwxTombola;\n    this.streakMeter = new MeasureMeter('#feature-board-streak-meter', 10);\n    this.numberPicker = new NumberPicker('#number-picker');\n  }\n\n  createScene()\n  {\n    this.scene = new THREE.Scene();\n    this.scene.background = new THREE.Color( this.backgroundColor );    \n  }\n\n  createCamera()\n  {\n    this.fieldOfView = 50;\n    const aspectRatio = this.width / this.height;\n    const nearViewingPlane = 1;\n    const farViewingPlane = 800;\n    this.camera = new THREE.PerspectiveCamera( this.fieldOfView, aspectRatio, nearViewingPlane, farViewingPlane );\n    this.camera.position.set( this.cameraPositionDefault.x , this.cameraPositionDefault.y, this.cameraPositionDefault.z );\n  }\n\n  createLights()\n  {\n    RectAreaLightUniformsLib.init();\n    this.reelIllumination = new THREE.RectAreaLight( this.reelIlluminationColor, 4, this.fieldOfView*2, this.reelSize );\n    this.reelIllumination.position.set( 0, 10, 60 );\n    this.scene.add( this.reelIllumination );\n\n    this.sceneLight = new THREE.HemisphereLight( this.reelsColor, 0xffffff, 3 );\n    this.sceneLight.position.set(0, 50, 0);\n    this.scene.add( this.sceneLight );\n\n    this.featureBoardLight = new THREE.DirectionalLight( 0xffffff, 0 );\n    this.featureBoardLight.position.set(this.featureCameraPositionDefault.x, this.featureCameraPositionDefault.y, this.featureCameraPositionDefault.z);\n    this.scene.add( this.featureBoardLight );\n\n    this.cubeLight = new THREE.PointLight( 0xffffff, 0, 10 );\n    this.scene.add(this.cubeLight);\n\n    // var pointLightHelper = new THREE.PointLightHelper( this.cubeLight, 1 );\n    // this.scene.add(pointLightHelper);\n  }\n\n  createRenderer()\n  {\n    this.renderer = new THREE.WebGLRenderer({ antialias: true, sortObjects: false });\n    this.renderer.setSize( this.width, this.height );\n    this.renderer.setPixelRatio( window.devicePixelRatio );\n    this.renderer.physicallyCorrectLights = true;\n    this.container.appendChild( this.renderer.domElement );\n\n    this.labelRenderer = new CSS2DRenderer();\n    this.labelRenderer.setSize( this.width, this.height );\n    this.labelRenderer.domElement.style.position = 'absolute';\n    this.labelRenderer.domElement.style.top = 0;\n    this.container.appendChild( this.labelRenderer.domElement );\n    //this.controls = new OrbitControls( this.camera, this.renderer.domElement );\n  }\n\n  eventDispatcher()\n  {\n    document.body.addEventListener('keyup', (ev)=>{\n      if(this.featureActive)\n      {\n        ev.keyCode == 13 && this.collect();\n        (ev.keyCode == 32 && !this.hilo) && this.rollDiceEvent(\"ROLL\");\n        (ev.keyCode == 38 && this.ableToGambleHI) && this.rollDiceEvent(\"GAMBLEHI\");\n        (ev.keyCode == 40 && this.ableToGambleLO) && this.rollDiceEvent(\"GAMBLELO\");\n      }\n      else\n      {\n        (ev.keyCode == 32 && !this.streakRunning) && this.spinReelsEvent();\n      }\n    });\n\n    this.container.addEventListener('mouseup', (ev)=>{\n      if(this.rollEvenOddFlag){this.rollEvenOddStop(); return;}\n      if(this.stoppaOrTaxiRunning){this.stopStoppaOrTaxi(); return;}\n      if(this.reelStrikeFlag){this.stopReelStrike(); return;}\n      if(!this.hasNudges() && !this.hasHolds && !this.stoppaReelFlag){return;}\n      this.mouse.x = ( ev.clientX / this.width ) * 2 - 1;\n      this.mouse.y = -( ev.clientY / this.height ) * 2 + 1;\n      this.raycaster.setFromCamera( this.mouse, this.camera );\n      let intersects = this.raycaster.intersectObjects( this.reelControlButtons );\n      if(intersects.length > 0)\n      {\n        this.hasNudges() && this.nudgeReelEvent(intersects[0].object.reelIndex);\n        this.hasHolds && this.holdReelEvent(intersects[0].object.reelIndex);\n        this.stoppaReelFlag && this.stoppaReelEvent(intersects[0].object.reelIndex);\n      }\n    });\n  }\n\n  setTombola(arr, variable) // variable is something on the instance to set to false after callback\n  {\n    this.rwxTombola.setValues(arr).then((winner)=>{\n      this[variable] = false;\n      try { this[winner](); }\n      catch(err)\n      {\n        console.log(err);\n        console.log(`${winner} method not defined on the fruitMachine context.`)\n      }\n    });\n  }\n\n  render()\n  {\n    this.renderer.render( this.scene, this.camera );\n    this.labelRenderer.render( this.scene, this.camera );\n  }\n\n  update()\n  {\n    this.fruitMachineInitAnimationFlag && this.fruitMachineInitAnimation();\n    this.featureBoardInitAnimationFlag && this.featureBoardInitAnimation();\n\n    this.spinReelsFlag && this.spinReels();\n    this.nudgeReelFlag && this.nudgeReel();\n    this.stoppaReelFlag && this.stoppaReel();\n    this.reelStrikeFlag && this.reelStrike();\n    this.flashButtonsFlag && this.flashButtons();\n    this.numberReelSpinFlag && this.spinNumberReel();\n    (this.hasWonFlag && !this.spinReelsFlag && !this.nudgeReelFlag) && this.winAnimation();\n    (this.hasFeatureFlag && !this.nudgeReelFlag && !this.spinReelsFlag && !this.numberReelSpinFlag) && this.toFeatureAnimation();\n\n    this.rollDiceFlag && this.rollDice();\n    this.endFeatureFlag && this.toFruitMachineAnimation();\n    this.rotateFeatureBoardCubeFlag && this.rotateFeatureBoardCube();\n    this.moveInFlag && this.moveIn();\n    this.moveOutFlag && this.moveOut();\n    this.rollEvenOddFlag && this.rollEvenOdd();\n\n    if(!this.featureActive && !this.hasFeatureFlag)\n    {\n      this.camera.lookAt(0,0,0);\n    }\n    if(this.featureBoardDevelop)\n    {\n      this.camera.lookAt(this.featureCameraPositionDefault.x+this.fbCameraDistance+this.innerBoardDistance, this.featureCameraPositionDefault.y, this.featureCameraPositionDefault.z);\n    }\n    this.render();\n  }\n\n  //\n  // *** For development purposes (e.g skipping initial animations, setting camera correct, etc,  anything we dont wanna view when developing)\n  //\n  //\n\n  developingFeatureBoard()\n  {\n    this.showDOMelements(true, this.fbDOMElements.map(de=>de.domID));\n    this.camera.position.set(this.featureCameraPositionDefault.x, this.featureCameraPositionDefault.y, this.featureCameraPositionDefault.z);\n    this.showDOMelements(false, ['coins']);\n    this.featureActive = true;\n    this.switchLights(\"feature-board\");\n    this.featureBoardLight.target = this.dice[0];\n    for(let c of this.outerCubes)\n    {\n      c.cube.rotation.x = rwxGeometry.toRadians(0);\n      c.cube.material.map(c=> c.opacity=1);\n    }\n  }\n\n  developingFruitMachine()\n  {\n    for(let [i, reelFace] of this.fruitMachineInitAnimationData.reelFaces.entries())\n    {\n      reelFace.face.position.set(reelFace.finish.x,reelFace.finish.y,reelFace.finish.z);\n      reelFace.face.rotation.y = reelFace.rotation;       \n    }\n    if(this.enableNumbers)\n    {\n      for(let numberReel of this.fruitMachineInitAnimationData.numberReel)\n      {\n        numberReel.reel.position.y = 0;\n        numberReel.reel.position.z = numberReel.finish.z;\n      }\n    }\n    for(let button of this.fruitMachineInitAnimationData.buttons)\n    {\n      button.button.position.y = button.finishy;\n    }\n    for(let reelEdge of this.fruitMachineInitAnimationData.reelEdges)\n    {\n      reelEdge.edge.position.y = reelEdge.finishy;\n      reelEdge.outline.position.y = reelEdge.finishy;\n    }\n  }\n\n\n\n\n\n  //\n  // *** Methods which handle the conversion between featureBoard App and fruit machine App\n  //\n  //\n\n  switchLights(app)\n  {\n    let condition = app == \"feature-board\";\n    if(app == \"feature-board\")\n    {\n      this.reelIllumination.intensity = 0;\n      this.featureBoardLight.intensity = 1;\n      this.cubeLight.intensity = 7;\n    }\n    else if (app == \"fruit-machine\")\n    {\n      this.cubeLight.intensity = 0;\n      this.featureBoardLight.intensity = 0;\n      this.reelIllumination.intensity = 4;\n    }\n  }\n\n  afterFeatureBoard()\n  {\n    this.showDOMelements(true, ['coins']);\n    this.featureActive = false;\n    if(this.hasCollected)\n    {\n      if (this.hasCollected.fmLinkVariable)\n      {\n        this[this.hasCollected.fmLinkVariable] += this[this.hasCollected.variable];\n      }\n      if(this.hasCollected.fmMethodToCall)\n      {\n        this[this.hasCollected.fmMethodToCall](this[this.hasCollected.variable]);\n      }\n      this.hasCollected = false;\n    }\n    for(let cube of this.outerCubes)\n    {\n      cube.cube.rotation.x = rwxGeometry.toRadians(-90);\n      cube.cube.material.map(c=> c.opacity=0);\n    }\n    this.assignVariables({zeros:['timeoutPerCubeCounter', 'numberOfHearts','numberOfIcons','streakStrengthCount','reelStrikeCount','nudgeCount','coinCount']});\n    this.heartsArray.map(h=>h.clear());\n    this.iconsArray.map(i=>i.clear());\n    this.fbPersistentZGroup.position.z = 0;\n    this.innerCubes.map((ic)=>{ic.cube.material.map(m=>m.opacity = this.innerBoardInactiveOpacity)});\n    this.currentBoard = \"outer\";\n  }\n\n  toFeatureBoard()\n  {\n    this.rwxSlideTicker.setValue(\"Start Feature\");\n    this.hasFeatureFlag = true;\n    this.resetNumberTrail();\n    this.showDOMelements(false, ['coins']);\n    this.featureActive = true;\n    this.switchLights(\"feature-board\");\n    this.featureBoardLight.target = this.dice[0];\n  }\n\n  toFeatureAnimation()\n  {\n    if(!this.winSpin)\n    {\n      let val = rwxAnimate.getEasingValue('easingValueToFeatureWinSpin', 'easeInCubic', this.winAnimationDuration, () => { this.winSpin = true; });\n      for(let [i, reel] of this.reels.entries())\n      {\n        if(i%2==0)\n        {\n\n          reel.rotation.x = rwxAnimate.fromToCalc(this.nextSpinValues[i], (this.nextSpinValues[i]-this.winSpinLength), val);\n        }\n        else\n        {\n          reel.rotation.x = rwxAnimate.fromToCalc(this.nextSpinValues[i], (this.nextSpinValues[i]+this.winSpinLength), val);\n        } \n      }\n    }\n    if(!this.zoomThroughReelsStep1)\n    { \n      let val = rwxAnimate.getEasingValue('easingValueToFeatureZTRS1', 'easeOutCubic', this.zoomThroughReelsStep1Duration, () => { this.zoomThroughReelsStep1 = true; });\n      this.camera.position.set(rwxAnimate.fromToCalc(this.cameraPositionDefault.x, this.zoomThroughReelsStartX, val), rwxAnimate.fromToCalc(this.cameraPositionDefault.y, this.reelYPos, val), rwxAnimate.fromToCalc(this.cameraPositionDefault.z, 0, val));\n      this.camera.lookAt(rwxAnimate.fromToCalc(0, (this.featureCameraPositionDefault.x+this.fbCameraDistance+this.innerBoardDistance), val), rwxAnimate.fromToCalc(0, this.featureCameraPositionDefault.y, val), rwxAnimate.fromToCalc(0, this.featureCameraPositionDefault.z,val));\n    }\n    else\n    {\n      if(!this.zoomThroughReelsStep2)\n      {\n        let x = rwxAnimate.fromTo(this.zoomThroughReelsStartX, this.zoomThroughReelsFinishX, 'fromToToFeatureWinZTRS2', 'easeInOutQuad', this.zoomThroughReelsStep2Duration, () => { this.zoomThroughReelsStep2 = true; });\n        this.camera.position.set(x, this.reelYPos, 0);      \n      }\n    }\n    if(this.winSpin && this.zoomThroughReelsStep1 && this.zoomThroughReelsStep2)\n    { \n      this.winSpin = false;\n      this.winSpinEase = false;\n      this.zoomThroughReelsStep1 = false;\n      this.zoomThroughReelsStep1Ease = false;\n      this.zoomThroughReelsStep2 = false;\n      this.zoomThroughReelsStep2Ease = false;\n      this.featureBoardInitAnimationFlag = true;\n      this.hasFeatureFlag = false;\n    }\n  }\n\n  toFruitMachineAnimation()\n  {\n    if(!this.zoomToDefaultCameraStep1)\n    {\n      let val = rwxAnimate.getEasingValue('easingValueToFruitMachine', 'easeInQuart', 5000, () => { this.zoomToDefaultCameraStep1 = true; });\n\n      this.cameraPositionDefault = new THREE.Vector3(-10, 27, 55);\n      let addToX = this.currentBoard == \"inner\" ? this.innerBoardDistance : 0;\n      this.camera.position.set(rwxAnimate.fromToCalc((this.featureCameraPositionDefault.x+addToX), this.cameraPositionDefault.x, val), rwxAnimate.fromToCalc(this.featureCameraPositionDefault.y, this.cameraPositionDefault.y, val), rwxAnimate.fromToCalc(this.featureCameraPositionDefault.z, this.cameraPositionDefault.z, val));\n      this.camera.lookAt(rwxAnimate.fromToCalc((this.featureCameraPositionDefault.x+this.fbCameraDistance+this.innerBoardDistance), 0, val), rwxAnimate.fromToCalc(this.featureCameraPositionDefault.y, 0, val), rwxAnimate.fromToCalc(this.featureCameraPositionDefault.z, 0, val));    \n    }\n    else\n    {\n      this.afterFeatureBoard();\n      this.zoomToDefaultCameraStep1 = false;\n      this.zoomToDefaultCameraStep1Ease = false;\n      this.endFeatureFlag = false;\n    }\n  }\n}","export const Configuration = {\n    /*                                        General App createConfiguration                                          */\n    reelsColor: 0x0000ff,                       // Javascript Hexidecimal color which will be shone on the reels, its a gradient hemisphere light going from reelsColor to white (top to bottom)\n    reelIlluminationColor: 0xffffff,            // Javascript Hexidecimal color of the light which shines on the front win reels illuminating them\n    backgroundColor: 0x000000,                  // Javascript Hexidecimal Background color of the whole fruit machine scene\n    freePlay: false,                            // Setting to true will enable free play and no coins. To false will mean user has to have coins to spin\n    startingCoins: 1000,                        // How many coins the user will start play with if freePlay is set to false\n    costPerSpin: 50,                            // How many coins it costs for user to spin the reel if freePlay is set to false\n    enableHelperTips: true,                     // True or false weather helper tips are enabled and can be viewed - if set to false, in addition you will need to comment out the `${require(\"./helper-tips.html\")}` statement in the fruitMachine.html\n\n    /*                                        Reels Configuration                                                     */\n    numberOfReels: 4,                           // Number of reels - Minimum needs to be 2\n    reelWidth: 10,                              // How wide the reels are\n    reelSpacing: 5,                             // How much space between each reel\n    reelSize: 15,                               // How big the reels are\n    reelWinProbability: 6,                      // The probability as a fraction that the next reel will be the same as the previous (every 1 in reelWinProbability)\n\n    /*                                        Spin Animation Configuration                                            */\n    numberOfFullRotations: 5,                   // How man complete rotations before landing on the next fruit\n    spinTimeout: 10,                            // Number of milliseconds to wait before spinning the next reel\n    degreesToMoveBackBeforeSpinning: 5,         // How many degrees the reels reverse before spinning\n    spinReelsDuration: 2200,                    // How long it takes for the number of full rotations to happen in milliseconds\n\n    /*                                        Win Animation Configuration                                              */\n    zoomThroughReelsXGap: 50,                   // The gap between the the edge of the reels and the camera when zooming through\n    zoomThroughReelsZPercentage: 80,            // The size percentage of the reel size in which the cameras z coordinate should be when zooming\n    winAnimationDuration: 5000,                 // How long it takes for the win animation to complete in milliseconds\n    winJudderDuration: 60,                      // How long in milliseconds the reels judder before proceeding with win animation\n \n    /*                                        Nudge & Hold Configuration                                               */ \n    nudgeProbability: 4,                        // The probability as a fraction that user will get a nudge after spinning (every 1 in nudgeProbability)\n    nudgeDuration: 500,                         // The time in milliseconds it takes for a nudge to complete\n    holdProbability: 4,                         // The probability as a fraction that user will get a hold after spinning (every 1 in holdProbability)\n    flashButtonsSpeed: 0.01,                    // How quickly the buttons flash and move up and down when user has a nudge or hold\n\n    /*                                         Bonus Configuration                                                     */  \n    enableBonus: true,                          // If set to true a bonus face will be added to 1 of the reels and the other reels will have a random fruit added\n    bonusStoppaReelSpeed: 0.6,                  // The speed at which the reel turns whilst stoppaReel bonus game is being played\n    bonusStoppaReelIncrement: 0.7,              // How much faster per reel the reels get when moving to the next one whilst stoppaReel bonus game is being played\n    reelStrikeSpeed: 5,                         // The speed the light revolves the reels for the reel strikes\n    streakBounds: 50,                           // When user gets a streak, the payouts of each roll will be a random fruit value between 0 to this.streakBounds percent of the lowest value fruits\n    superStreakBounds: 80,                      // When user gets a super streak, the payouts of each roll will be a random fruit value between 0 to this.superStreakBounds percent of the lowest value fruits\n    megaStreakBounds: 100,                      // When user gets a streak, the payouts of each roll will be a random fruit value between 0 to this.megaStreakBounds percent of the lowest value fruits\n\n    /*                                          Number Trail Configuration                                              */\n    enableNumbers: true,                        // If set to true, random numbers between 1-5 will be added to a random number of reels and bonus trail will be enabled\n    numbersBonus: 6,                            // How many numbers needed for a bonus on the number reel\n    numberTrailHeldProbability: 3,              // The probability as a fraction a numberTrailHeld will be given on a spin (every 1 in numberTrailHeldProbability)\n    numberMaximumOnReels: 5,                    // The highest number that will appear on the reels - numbers are randomely generated between 0 and numberMaximumOnReels\n    numberTrailHeldColor: 0x76ef00,             // Javascript Hexidecimal color the faces of the numberReel go when the trail is held\n    numberHighlightColor: 0x000000,             // Javascript Hexidecimal color the current face on the number reel will go (the one highlighting the number to user is on)\n    numberBonusColor: 0xFF6600,                 // Javascript Hexidecimal color for the color of the Bonus number reel face set by numbersBonus\n    numberFeatureStartColor: 0xFF6600,          // Javascript Hexidecimal color for the color of the Feature Start number reel face which will be last in numbers array\n    \n    /*                                          Feature Board Configuration                                             */\n    cubeColor: 0xF05E23,                        // The color of the feature board cubes\n    diceColor: 0xFFFFFF,                        // The color of the feature board dice\n\tnumberOfOuterBoardSquares: 20, \t\t\t\t// Number of squares in the outer feature baord (must be multiple of 4)\n    numberOfInnerBoardSquares: 16, \t\t\t\t// Number of squares in the inner feature board (must be multiple of 4)\n    cubeSize: 3.5,\t\t\t\t\t\t\t\t// The size of the feature board cubes\n    diceSize: 5,\t\t\t\t\t\t\t\t// The size of the sice on the feature board\n    diceSpinDuration: 1000,\t\t\t\t\t\t// How long in milliseconds it takes the dice to spin the next value\n    diceSpinFullRotations: 1, \t\t\t\t\t// number of full rotations the dice does (in a random axis) before landing on next number\n    diceGambleWinProbability: 4, \t\t\t\t// Providing the current dice number is not 12 (highest) or 1 (lowest) - The probability as a fraction that the user will win a dice gamble HI/LO (every 1 in reelWinProbability)\n    streakStrengthMax: 10,\t\t\t\t\t\t// maximum intervals of streak strength, this is relative in that, if you have 20 or 5, if user reaches maximum they will still win the same range amount of money \n    moveCubeSpeed: 200,                         // How long, in milliseconds, it takes for the light to move from one cube to another. Used in normal dice spins AND stoppa function\n    stoppaOrTaxiTimeout: 10000,                 // How long, in milliseconds, the user has to click whilst stoppa or taxi are running before the machine chooses\n    rollEvenOddSpeed: 5                         // The speed in which the dice rolls when you have a roll even/odd\n}","import * as THREE from 'three';\nconst FruitMachineData = {\n  numbers: [\n    {\n      value: 1,\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/one.png\") )\n    },\n    {\n      value: 2,\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/two.png\") )\n    },\n    {\n      value: 3,\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/three.png\") )\n    },\n    {\n      value: 4,\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/four.png\") )\n    },\n    {\n      value: 5,\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/five.png\") )       \n    },\n    {\n      value: 6,\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/six.png\") )\n    },\n    {\n      value: 7,\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/seven.png\") )\n    },\n    {\n      value: 8,\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/eight.png\") )\n    },\n    {\n      value: 9,\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/nine.png\") )\n    },\n    {\n      value: 10,\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/ten.png\") )\n    },\n    {\n      value: 11,\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/eleven.png\") )\n    },\n    {\n      value: 12,\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/twelve.png\") )\n    }\n  ],\n  fruits: [\n    {\n      name: \"cherry\",\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/cherry.png\") ),\n      coinValue: 50\n    },\n    {\n      name: \"strawberry\",\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/strawberry.png\") ),\n      coinValue: 100\n    },\n    {\n      name: \"apple\",\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/apple.png\") ),\n      coinValue: 150\n    },\n    {\n      name: \"orange\",\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/orange.png\") ),\n      coinValue: 200\n    },\n    {\n      name: \"coconut\",\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/coconut.png\") ),\n      coinValue: 300\n    },\n    {\n      name: 'watermelon',\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/watermelon.png\") ),\n      coinValue: 500\n    },\n    {\n      name: \"rose\",\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/rose.png\") ),\n      coinValue: 1000\n    },\n    {\n      name: \"bell\",\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/bell.png\") ),\n      coinValue: 2000\n    },\n    {\n      name: \"star\",\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/star.png\") ),\n      coinValue: 3500\n    },\n    {\n      name: \"diamond\",\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/diamond.png\") ),\n      coinValue: 5000\n    },\n    {\n      name: \"gold-coin\",\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/gold-coin.png\") ),\n      coinValue: 10000\n    },\n    {\n      name: \"wild\",\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/wild.png\") )\n    }\n  ],\n  fruitMachineBonuses: [\n    {\n      displayName: \"4 NUDGES\",\n      value: \"bonusFourNudges\"\n    },\n    {\n      displayName: \"WIN SPIN\",\n      value: \"bonusWinSpin\"\n    },\n    {\n      displayName: \"UNLUCKY\",\n      value: \"bonusUnlucky\"\n    },\n    {\n      displayName: \"2 NUDGES\",\n      value: \"bonusTwoNudges\"\n    },\n    {\n      displayName: \"STOPPA REEL\",\n      value: \"bonusStoppaReel\"\n    },\n    {\n      displayName: \"2 REEL STRIKES\",\n      value: \"bonusTwoReelStrikes\"\n    },\n    {\n      displayName: \"3 REVERSE NUDGES\",\n      value: \"bonusThreeReverseNudges\"\n    },\n    {\n      displayName: \"START FEATURE\",\n      value: \"toFeatureBoard\"\n    },\n    {\n      displayName: \"UNLUCKY\",\n      value: \"bonusUnlucky\"\n    },\n    {\n      displayName: \"4 REVERSE NUDGES\",\n      value: \"bonusFourReverseNudges\"\n    },\n    {\n      displayName: \"STREAK\",\n      value: \"bonusStreak\"\n    },\n    {\n      displayName: \"NUMBERS IN VIEW\",\n      value: 'bonusNumbersInView'\n    },\n    {\n      displayName: \"REEL STRIKE\",\n      value: \"bonusOneReelStrike\"\n    }\n  ]\n}\n\nconst FeatureBoardData = {\n  diceNumbers: [\n  \t{\n  \t\tvalue:1,\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/dice-one.png\") ),\n  \t},\n  \t{\n  \t\tvalue:2,\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/dice-two.png\") )\n  \t},\n  \t{\n  \t\tvalue:3,\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/dice-three.png\") )\n  \t},\n  \t{\n  \t\tvalue:4,\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/dice-four.png\") )\n  \t},\n  \t{\n  \t\tvalue:5,\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/dice-five.png\") )\n  \t},\n  \t{\n  \t\tvalue:6,\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/dice-six.png\") )\n  \t}\n  ],\n  cubeTextures: [\n  \t{\n  \t\tname: 'game-over',\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/game-over.png\") ),\n  \t\ttype: 'reserved',\n  \t\touterAmountOfSquares: 1,\n  \t\tinnerAmountOfSquares: 1,\n  \t\tfunctionToRun: 'gameOver'\n  \t},\n  \t{\n  \t\tname: 'mystery',\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/mystery.png\") ),\n  \t\ttype: 'reserved',\n  \t\touterAmountOfSquares: 2,\n  \t\tinnerAmountOfSquares: 1,\n  \t\tfunctionToRun: 'mystery'\n  \t},\n  \t{\n   \t\tname: 'bonus',\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/fbBonus.png\") ),\n  \t\ttype: 'reserved',\n  \t\touterAmountOfSquares: 2,\n  \t\tinnerAmountOfSquares: 1,\n  \t\tfunctionToRun: 'fbBonus'   \t\t\n  \t},\n  \t{\n  \t\tname: 'arrow',\n   \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/arrow.png\") ),\n  \t\ttype: 'reserved',\n  \t\touterAmountOfSquares: 2,\n  \t\tinnerAmountOfSquares: 2,\n  \t\tfunctionToRun: 'moveToBoard'\n  \t},\n    {\n      name: 'add-heart',\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/heart.png\") ),\n      type: 'reserved',\n      outerAmountOfSquares: 1,\n      innerAmountOfSquares: 1,\n      functionToRun: 'addHeart'\n    },\n    {\n      name: 'add-icon',\n      texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/icon.png\") ),\n      type: 'reserved',\n      outerAmountOfSquares: 2,\n      innerAmountOfSquares: 1,\n      functionToRun: 'addIcon'\n    },\n  \t{\n  \t\tname: 'multi-add',\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/multi-add.png\") ),\n  \t\ttype: 'reserved',\n  \t\touterAmountOfSquares:1,\n  \t\tinnerAmountOfSquares:1,\n  \t\tfunctionToRun: 'multiAdd'\n  \t},\n  \t{\n  \t\tname: 'add-streak-strength',\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/plus-streak.png\") ),\n  \t\ttype: 'reserved',\n  \t\touterAmountOfSquares:1,\n  \t\tinnerAmountOfSquares:1,\n  \t\tfunctionToRun: 'addFeatureBoardValues',\n  \t\tfunctionToRunValues: {variable:'streakStrengthCount', values:[1, 2], direction: 'add', text:'Streak Strength'}\n  \t},\n  \t{\n  \t\tname: 'minus-money',\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/minus-money.png\") ),\n  \t\ttype: 'reserved',\n  \t\tfunctionToRun: 'addFeatureBoardValues',\n  \t\tfunctionToRunValues: {variable:'coinCount', values:[50, 100, 200, 250, 500, 'numberPicker'], direction: 'minus', text:'Coin'},\n      outerAmountOfSquares:2,\n      innerAmountOfSquares:0\n  \t},\n  \t{\n  \t\tname: 'add-money',\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/plus-money.png\") ),\n  \t\ttype: 'random',\n  \t\tfunctionToRun: 'addFeatureBoardValues',\n  \t\tfunctionToRunValues: {variable:'coinCount', values:[100, 200, 500, 750, 1000, 'numberPicker'], direction: 'add', text:'Coin'}\n  \t},\n  \t{\n  \t\tname: 'add-reel-strikes',\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/plus-strike.png\") ),\n  \t\ttype: 'random',\n  \t\tfunctionToRun: 'addFeatureBoardValues',\n  \t\tfunctionToRunValues: {variable:'reelStrikeCount', values:[1, 2], direction: 'add', text:'Reel Strike'}\n  \t},\n  \t{\n  \t\tname: 'add-nudges',\n  \t\ttexture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/plus-nudge.png\") ),\n  \t\ttype: 'random',\n  \t\tfunctionToRun: 'addFeatureBoardValues',\n  \t\tfunctionToRunValues: {variable:'nudgeCount', values:[1, 2, 3, 4], direction: 'add', text:'Nudge'}\n  \t}\n  ],\n  diceLayouts: {\n\t\t1: [\n\t\t\t[0,1]\n\t\t],\n\t\t2: [\n\t\t\t[2,0]\n\t\t],\n\t\t3: [\n\t\t\t[2,1],\n\t\t\t[3,0],\n\t\t\t[0,3]\n\t\t],\n\t\t4: [\n\t\t\t[3,1],\n\t\t\t[4,0],\n\t\t\t[0,4]\n\t\t],\n\t\t5: [\n\t\t\t[2,3],\n\t\t\t[4,1],\n\t\t\t[5,0],\n\t\t\t[0,5]\n\t\t],\n\t\t6: [\n\t\t\t[2,4],\n\t\t\t[3,3],\n\t\t\t[5,1],\n\t\t\t[6,0],\n\t\t\t[0,6]\n\t\t],\n\t\t7: [\n\t\t\t[2,5],\n\t\t\t[3,4],\n\t\t\t[4,3],\n\t\t\t[6,1]\n\t\t],\n\t\t8: [\n\t\t\t[2,6],\n\t\t\t[3,5],\n\t\t\t[4,4],\n\t\t\t[5,3]\n\t\t],\n\t\t9: [\n\t\t\t[3,6],\n\t\t\t[4,5],\n\t\t\t[5,4],\n\t\t\t[6,3]\n\t\t],\n\t\t10: [\n\t\t\t[4,6],\n\t\t\t[5,5],\n\t\t\t[6,4]\n\t\t],\n\t\t11: [\n\t\t\t[5,6],\n\t\t\t[6,5]\n\t\t],\n\t\t12: [\n\t\t\t[6,6]\n\t\t]\n\t},\n  featureBoardBonuses: [\n    {\n      displayName: \"Taxi\",\n      value: \"taxi\"\n    },\n    {\n      displayName: \"Multi Add\",\n      value: \"multiAdd\"\n    },\n    {\n      displayName: \"UNLUCKY\",\n      value: \"bonusUnlucky\"\n    },\n    {\n      displayName: \"Extra Heart\",\n      value: \"addHeart\"\n    },\n    {\n      displayName: \"Extra Icon\",\n      value: \"addIcon\"\n    },\n    {\n      displayName: \"Move In\",\n      value: \"moveToBoard\"\n    }\n  ],\n  featureBoardMystery: [\n    {\n      displayName: \"Game Over\",\n      value: \"gameOver\"\n    },\n    {\n      displayName: \"Stoppa\",\n      value: \"stoppa\"\n    },\n    {\n      displayName: \"Lose with cashpot\",\n      value: \"loseWithCashpot\"\n    },\n    {\n      displayName: \"HI/LO Continue\",\n      value: \"hiloContinue\"\n    },\n    {\n      displayName: \"Continue\",\n      value: \"continue\"\n    },\n    {\n      displayName: \"Roll Even\",\n      value: \"rollEven\"\n    },\n    {\n      displayName: \"Roll Odd\",\n      value: \"rollOdd\"\n    },\n    {\n      displayName: \"Move In/Out\",\n      value: \"moveToBoard\"\n    }\n  ]\n}\n\nexport {FruitMachineData, FeatureBoardData}","module.exports = __webpack_public_path__ + \"fruitMachineAssets/one.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/two.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/three.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/four.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/five.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/six.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/seven.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/eight.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/nine.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/ten.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/eleven.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/twelve.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/cherry.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/strawberry.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/apple.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/orange.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/coconut.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/watermelon.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/rose.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/bell.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/star.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/diamond.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/gold-coin.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/wild.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/dice-one.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/dice-two.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/dice-three.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/dice-four.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/dice-five.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/dice-six.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/game-over.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/mystery.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/fbBonus.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/arrow.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/multi-add.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/plus-streak.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/minus-money.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/plus-money.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/plus-strike.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/plus-nudge.png\";","import * as THREE from 'three';\n\nimport { FeatureBoard } from './featureBoard.js';\n\nimport rwxMath from 'roseworx/js/helpers/rwxMathHelpers';\nimport rwxMisc from 'roseworx/js/helpers/rwxMiscHelpers';\nimport rwxGeometry from 'roseworx/js/helpers/rwxGeometryHelpers';\nimport rwxAnimate from 'roseworx/js/helpers/rwxAnimateHelpers';\n\nexport class FruitMachine extends FeatureBoard {\n  constructor()\n  {\n    super();\n    this.fruitMachineDevelop = false;\n  }\n\n  //\n  // *** CREATORS\n  // *** These methods are responsible for creating the objects which render on the actual page\n  //\n  \n  createFruitMachine()\n  {\n    this.createReels();\n    this.enableNumbers && this.createNumberReel();\n  }\n\n  createButton(length, x, r)\n  {\n    let width = 6;\n    let buttonShape = new THREE.Shape();\n    buttonShape.moveTo( 0,0 );\n    buttonShape.lineTo( 0, width );\n    buttonShape.lineTo( length, width );\n    buttonShape.lineTo( length, 0 );\n    buttonShape.lineTo( 0, 0 );\n\n    let buttonExtrudeParameters = {\n      steps: 1,\n      depth: 0.5,\n      bevelEnabled: true,\n      bevelThickness: 0.5,\n      bevelSize: 0.8,\n      bevelOffset: 0,\n      bevelSegments: 1\n    };\n\n    let buttonGeometry = new THREE.ExtrudeBufferGeometry( buttonShape, buttonExtrudeParameters );\n    let buttonMaterial = new THREE.MeshStandardMaterial( { color: 0xffffff, transparent: true, opacity:0.5 } );\n    let buttonMesh = new THREE.Mesh( buttonGeometry, buttonMaterial ) ;\n    let y = -(this.reelSize - length - 3);\n    this.buttonYPosition = y;\n\n    let startVectors = new THREE.Vector3(x - length/2, -100, this.reelSize)\n\n    buttonMesh.position.set(startVectors.x, startVectors.y, startVectors.z);\n    this.fruitMachineInitAnimationData.buttons.push({button: buttonMesh, starty:startVectors.y, finishy:y});\n\n    buttonMesh.rotation.x = rwxGeometry.toRadians(90);\n    buttonMesh.reelIndex = r;\n    this.reelControlButtons.push(buttonMesh);\n    this.scene.add(buttonMesh);\n    r==0 && this.checkAndApplyHelperTip(buttonMesh, \"helper-tip-buttons\");\n  }\n\n  createNumberReel()\n  {\n    let x,z,nextX,nextZ,numberReelFaceGeometry,numberReelFaceMaterial,numberReelFaceMesh,numberReelFaceGroup,numberTextureGeometry,numberTextureMaterial,numberTextureMesh;\n    let clone = rwxMisc.safeCloneArrayOfObjects(this.numbers);\n    clone = [{\n        value:0,\n        texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/zero.png\") )\n    }, ...clone];\n    clone.reverse();\n    const numberReelSize = this.reelSize/4;\n    const numberReelWidth = this.reelWidth/4;\n    this.numberReelOneRotation = (360/clone.length);\n    const startRotation = this.numberReelOneRotation/2;\n    const numberReelGroup = new THREE.Group();\n    const numberReelFaceSideLength = ((2*numberReelSize) * Math.sin(Math.PI/clone.length));\n    const numberReelFaceAngle = 2 * Math.PI / clone.length;\n    const numberReelEdgeGeometry = new THREE.CylinderBufferGeometry(numberReelSize, numberReelSize, 0.3, clone.length);\n    const numberReelEdgeMaterial = new THREE.MeshStandardMaterial({color: 0xffffff, transparent:true, opacity:0.2, flatShading: true});\n    const numberReelEdgeMesh = new THREE.Mesh( numberReelEdgeGeometry, numberReelEdgeMaterial );\n    const numberReelEdgeMesh2 = numberReelEdgeMesh.clone();\n    numberReelEdgeMesh.position.y = -(numberReelWidth/2);\n    numberReelEdgeMesh2.position.y = (numberReelWidth/2);\n    for(let nr=0;nr<clone.length;nr++)\n    {\n      let reelFaceColor = nr == clone.length-1 ? this.numberHighlightColor : 0xffffff;\n      if(nr == this.numbersBonus){reelFaceColor = this.numberBonusColor;}\n      if(nr == 0){reelFaceColor = this.numberFeatureStartColor;}\n      numberReelFaceGroup = new THREE.Group();\n      x = numberReelSize * Math.sin(nr * numberReelFaceAngle);\n      z = numberReelSize * Math.cos(nr * numberReelFaceAngle);\n      nextX = numberReelSize * Math.sin((nr+1) * numberReelFaceAngle);\n      nextZ = numberReelSize * Math.cos((nr+1) * numberReelFaceAngle);\n\n      numberReelFaceGeometry = new THREE.BoxBufferGeometry( numberReelFaceSideLength, numberReelWidth, 0.1 );\n      numberReelFaceMaterial = new THREE.MeshStandardMaterial({color: reelFaceColor, transparent:true, opacity:0.6, flatShading: true});\n      numberReelFaceMaterial.polygonOffset = true;\n      numberReelFaceMaterial.polygonOffsetFactor = 0.1;\n      numberReelFaceMesh = new THREE.Mesh( numberReelFaceGeometry, numberReelFaceMaterial );\n      numberReelFaceMesh.renderOrder = 0;\n      numberReelFaceGroup.add(numberReelFaceMesh);\n\n      if(clone[nr].texture)\n      {\n        numberTextureGeometry = new THREE.BoxBufferGeometry( numberReelFaceSideLength/2, numberReelWidth/2, 0.1 );\n        numberTextureMaterial = new THREE.MeshStandardMaterial({transparent: true, map:clone[nr].texture});\n        numberTextureMesh = new THREE.Mesh( numberTextureGeometry, numberTextureMaterial );\n        numberTextureMesh.renderOrder = 1;\n        numberReelFaceGroup.add(numberTextureMesh);\n      }\n\n      numberReelFaceGroup.position.x = (x + nextX)/2;\n      numberReelFaceGroup.position.z = (z + nextZ)/2;\n      numberReelFaceGroup.rotation.y = rwxGeometry.toRadians(startRotation + (nr*this.numberReelOneRotation));\n      this.numberReelFaces.push(numberReelFaceMesh);\n      numberReelGroup.add(numberReelFaceGroup);\n    }\n\n    let finishVectors = new THREE.Vector3(8, 0, 32);\n    let startVectors = new THREE.Vector3(8, -100, 50);\n\n    numberReelGroup.position.set(startVectors.x, startVectors.y, startVectors.z);\n    this.fruitMachineInitAnimationData.numberReel.push({reel: numberReelGroup, start: startVectors, finish: finishVectors});\n\n    numberReelGroup.rotation.x = rwxGeometry.toRadians(-47.5);\n    this.numberReel = numberReelGroup;\n    this.scene.add(numberReelGroup);\n    this.checkAndApplyHelperTip(numberReelGroup, 'helper-tip-number-reel');\n  }\n\n  createReels()\n  {\n    let reelNumberGeometry, reelNumberMaterial, reelNumberMesh, reelFaceGeometry, reelFaceMaterial, reelFaceMesh, reelFaceEdge, reelFaceOutline, reelFruitGeometry,\n        reelFruitMaterial, reelFruitMesh, reelEdgeGeometry, reelEdgeMaterial, reelEdgeMesh, reelEdgeMesh2, reelEdgeEdge, reelEdgeOutline, reelEdgeOutline2, reelGroup,\n        reelFaceGroup, x, z, nextX, nextZ, fx, fz, fnextX, fnextZ, startVectors, finishVectors,\n        reelFaceSideLength = ((2*this.reelSize) * Math.sin(Math.PI/this.numberOfFruits)),\n        reelFaceAngle = 2 * Math.PI / this.numberOfFruits,\n        startRotation = this.oneRotation/2,\n        xPosition = -(this.numberOfReels-1)/2 * (this.reelWidth+this.reelSpacing),\n        bonusReelPosition = rwxMath.randomInt(0,this.numberOfReels-1);\n\n    for(let r=0;r<this.numberOfReels;r++)\n    {\n      reelGroup = new THREE.Group();\n      let shuffleArray = rwxMisc.safeCloneArrayOfObjects(this.fruits);\n      if(this.enableNumbers)\n      {\n        for(let rn=0;rn<rwxMath.randomInt(0, (this.numberOfFruits-1)/2);rn++)\n        {\n          shuffleArray[rn].number = this.numbers[rwxMath.randomInt(0, this.numberMaximumOnReels-1)];\n        }\n      }\n      if(this.enableBonus)\n      {\n        if(r == bonusReelPosition)\n        {\n          //Add bonus\n          shuffleArray.push({\n            name: \"bonus\",\n            texture: new THREE.TextureLoader().load( require(\"./fruitMachineAssets/bonus.png\") )\n          })\n        }\n        else\n        {\n          //Add random fruit\n          let randomFruit = rwxMisc.safeCloneObject(this.fruits[rwxMath.randomInt(0,this.fruits.length-1)])\n          shuffleArray.push(randomFruit);\n        }\n      }\n\n      rwxMisc.shuffleArray(shuffleArray);\n      this.reelFruits.push(shuffleArray);\n      for (let i=0;i<this.numberOfFruits;i++)\n      {\n        reelFaceGroup = new THREE.Group();\n        x = this.reelSize * Math.sin(i * reelFaceAngle);\n        z = this.reelSize * Math.cos(i * reelFaceAngle);\n        nextX = this.reelSize * Math.sin((i+1) * reelFaceAngle);\n        nextZ = this.reelSize * Math.cos((i+1) * reelFaceAngle);\n\n        fx = this.initialAnimationConfigurables.reelFaceOffset * Math.sin(i * reelFaceAngle);\n        fz = this.initialAnimationConfigurables.reelFaceOffset * Math.cos(i * reelFaceAngle);\n        fnextX = this.initialAnimationConfigurables.reelFaceOffset * Math.sin((i+1) * reelFaceAngle);\n        fnextZ = this.initialAnimationConfigurables.reelFaceOffset * Math.cos((i+1) * reelFaceAngle);\n\n        reelFaceGeometry = new THREE.BoxBufferGeometry( reelFaceSideLength, this.reelWidth, 0.1 );\n        reelFaceMaterial = new THREE.MeshStandardMaterial({color: 0xffffff, transparent:true, opacity:0.5, flatShading: true});\n        reelFaceMaterial.polygonOffset = true;\n        reelFaceMaterial.polygonOffsetFactor = 0.1;\n        reelFaceMesh = new THREE.Mesh( reelFaceGeometry, reelFaceMaterial );\n        reelFaceMesh.renderOrder = 0;\n        reelFaceGroup.add(reelFaceMesh);\n\n        if(shuffleArray[i] && shuffleArray[i].texture)\n        {\n          let sizeDivide = (shuffleArray[i].name == \"wild\" || shuffleArray[i].name == \"bonus\") ? 1.2 : 2; // wild and bonus word is bigger to be seen / readable\n          reelFruitGeometry = new THREE.BoxBufferGeometry( reelFaceSideLength/sizeDivide, this.reelWidth/sizeDivide, 0.1 );\n          reelFruitMaterial = new THREE.MeshStandardMaterial({transparent: true, map:shuffleArray[i].texture});\n          reelFruitMesh = new THREE.Mesh( reelFruitGeometry, reelFruitMaterial );\n          reelFruitMesh.rotation.z = rwxGeometry.toRadians(-90); \n          reelFruitMesh.renderOrder = 1;\n          reelFaceGroup.add(reelFruitMesh);\n        }\n\n        if(shuffleArray[i] && shuffleArray[i].number !== undefined)\n        {\n          reelNumberGeometry = new THREE.BoxBufferGeometry( 1.5, 1.5, 0.1 );\n          reelNumberMaterial = new THREE.MeshStandardMaterial({transparent:true, map:shuffleArray[i].number.texture});\n          reelNumberMesh = new THREE.Mesh( reelNumberGeometry, reelNumberMaterial );\n          reelNumberMesh.renderOrder = 2;\n          reelNumberMesh.position.y = -(this.reelWidth/2-1.5);\n          reelNumberMesh.position.x = -(reelFaceSideLength/2-1.5);\n          reelNumberMesh.rotation.z = rwxGeometry.toRadians(-90);\n          reelFaceGroup.add(reelNumberMesh);\n        }\n\n        reelFaceEdge = new THREE.EdgesGeometry(reelFaceGeometry);\n        reelFaceOutline = new THREE.LineSegments(reelFaceEdge, new THREE.LineBasicMaterial({ color: 0xffffff }));        \n        reelFaceGroup.add(reelFaceOutline);\n\n        startVectors = new THREE.Vector3((fx + fnextX)/2, 0, (fz + fnextZ)/2);\n        finishVectors = new THREE.Vector3((x + nextX)/2, 0, (z + nextZ)/2);\n        reelFaceGroup.position.set(startVectors.x, startVectors.y, startVectors.z);\n        \n        this.fruitMachineInitAnimationData.reelFaces.push({start: startVectors, finish: finishVectors, face: reelFaceGroup, timeout:i*10, rotation:rwxGeometry.toRadians(startRotation + (i*this.oneRotation))});\n\n        reelGroup.add(reelFaceGroup);\n      }\n\n      reelEdgeGeometry = new THREE.CylinderBufferGeometry(this.reelSize, this.reelSize, 0.3, this.numberOfFruits);\n      reelEdgeMaterial = new THREE.MeshStandardMaterial({color: 0xffffff, transparent:true, opacity:0.2, flatShading: true});\n      reelEdgeMesh = new THREE.Mesh( reelEdgeGeometry, reelEdgeMaterial );\n      reelEdgeMesh2 = reelEdgeMesh.clone();\n\n      reelEdgeEdge = new THREE.EdgesGeometry(reelEdgeGeometry);\n      reelEdgeOutline = new THREE.LineSegments(reelEdgeEdge, new THREE.LineBasicMaterial({ color: 0xffffff }));\n      reelEdgeOutline2 = reelEdgeOutline.clone();\n\n      reelEdgeMesh.position.y = -(this.reelWidth/2)-this.initialAnimationConfigurables.reelEdgeOffset;\n      reelEdgeOutline.position.y = -(this.reelWidth/2)-this.initialAnimationConfigurables.reelEdgeOffset;\n\n      this.fruitMachineInitAnimationData.reelEdges.push({edge: reelEdgeMesh, outline:reelEdgeOutline, finishy: -(this.reelWidth/2), starty: -(this.reelWidth/2)-this.initialAnimationConfigurables.reelEdgeOffset});\n\n      reelGroup.add( reelEdgeMesh );\n      reelGroup.add( reelEdgeOutline );\n\n      reelEdgeMesh2.position.y = (this.reelWidth/2)+this.initialAnimationConfigurables.reelEdgeOffset;\n      reelEdgeOutline2.position.y = (this.reelWidth/2)+this.initialAnimationConfigurables.reelEdgeOffset;\n\n      this.fruitMachineInitAnimationData.reelEdges.push({edge: reelEdgeMesh2, outline:reelEdgeOutline2, finishy: (this.reelWidth/2), starty: (this.reelWidth/2)+this.initialAnimationConfigurables.reelEdgeOffset});\n\n      reelGroup.add( reelEdgeMesh2 ); \n      reelGroup.add( reelEdgeOutline2 );\n      \n      reelGroup.position.y = this.reelYPos;\n      reelGroup.position.x = xPosition;\n      reelGroup.rotation.z = rwxGeometry.toRadians(90);\n      reelGroup.rotation.x = this.setReelRotation(r, 'spin');\n      this.reels.push(reelGroup);\n      this.scene.add(reelGroup);\n\n      this.createButton(reelFaceSideLength, xPosition, r);\n\n      xPosition += (this.reelWidth + this.reelSpacing);\n      r==0 && this.checkAndApplyHelperTip(reelGroup, 'helper-tip-reels');\n    }\n  }\n\n\n\n\n\n  //\n  // *** MISCELLANEOUS\n  //\n  //\n\n  reelsHaveNudged()\n  {\n    if(!this.hasNudges() || this.hasWonFlag || this.hasBonus || this.hasFeature)\n    {\n      this.amountOfNudges = 0;\n      this.nudgeReelCounter = new Array(this.numberOfReels).fill(0);\n      this.reverseNudge = false;\n      console.log(\"NO MORE NUDGES\");\n    }\n\n    this.enableNumbers && this.updateNumberTrail();\n    this.hasFeature && this.toFeatureBoard();\n    if(!this.freePlay && this.hasWonFlag)\n    {\n      this.amountOfCoins += this.winValue;\n    }\n    (this.enableBonus && this.hasBonus) && this.setTombola(this.fruitMachineBonuses, 'hasBonus'); \n  }\n\n  reelsHaveSpun()\n  {\n    if(this.streakRunning)\n    {\n      this.hasWonFlag = false;\n      if(this.streakFruitIndex == this.streakFruits.length-1)\n      {\n        this.rwxNoticeBox.setValue(\"That's your lot!\", true);\n        this.streakRunning = false;\n        this.reelsHaveSpunCallback = true;\n        return;\n      }\n      else\n      {\n        this.spinReelsFlag = false;\n        this.streakFruitIndex+=1;\n        this.determineWin();\n        if(!this.freePlay)\n        {\n          this.amountOfCoins += this.winValue;\n          this.rwxNoticeBox.setValue(`Won ${this.winValue} coins!`, true);\n        }       \n        this.spinReelsEvent(this.streakFruits[this.streakFruitIndex]);\n      }\n      return;\n    }\n\n    this.enableNumbers && this.updateNumberTrail();\n    this.hasFeature && this.toFeatureBoard();\n    if(!this.freePlay && this.hasWonFlag)\n    {\n      this.amountOfCoins += this.winValue;\n      this.rwxNoticeBox.setValue(`Won ${this.winValue} coins!`, true);\n    }\n\n    (this.enableBonus && this.hasBonus) && this.setTombola(this.fruitMachineBonuses, 'hasBonus');\n\n    if(!this.hasWonFlag && !this.hasBonus && !this.hasFeature)\n    {\n      this.assignHolds();\n      if(!this.hasHolds){\n        this.assignNudges();\n      }\n    }\n\n    this.reelHeldCounter = new Array(this.numberOfReels).fill(0);\n  }\n\n  setReelRotation(reelIndex, type)\n  {\n    let ri;\n    let rr;\n    if(type == 'spin' || type == 'randomWin')\n    {\n      // FOR DEBUGGING - SET RR & RI TO this.reelFruits[reelIndex].findIndex(d=>d.name==\"FRUITNAME\"); to get the fruit you want and comment out rest\n      if(this.reelHeldCounter[reelIndex] === 1) // reel is held\n      {\n        ri = this.currentFruits[reelIndex];\n        rr = ri;\n      }\n      else\n      {\n        let sameAsPrev = type=='randomWin' ? 0 : rwxMath.randomInt(0, this.reelWinProbability);\n        let prevName;\n        if(reelIndex !=0 ) {prevName = this.reelFruits[reelIndex-1][this.currentFruits[reelIndex-1]].name;}\n        if(sameAsPrev == 0 && reelIndex != 0 && prevName != \"bonus\")\n        {\n          for(let [index,fruit] of this.reelFruits[reelIndex].entries())\n          {\n            if(fruit.name == prevName)\n            {\n              ri = index;\n              break;\n            }\n          }\n        }\n        else\n        {\n          ri = rwxMath.randomInt(0, this.numberOfFruits-1);\n        }\n        rr = ri;\n      }\n    }\n    else if (type == 'nudge')\n    {\n      /*  \n          If you nudge and the rotation reaches the number of fruits on the reel, we need ot reset the currentFruitIndex\n          back to 0 as that will be the index of the current fruit. However if you then calculate radians from 0 when \n          nudging, it will spin all the way back round to 0 instead of nudging forward. We need a nudgeCounter to determine\n          if the index goes past the numberOfFruits and then continue on from that to calculate the radius.\n       */\n      if(this.reverseNudge)\n      {\n        ri = this.currentFruits[reelIndex] == 0 ? this.numberOfFruits-1 : this.currentFruits[reelIndex] - 1;\n\n        if(this.nudgeReelCounter[reelIndex] < 0)\n        {\n          this.nudgeReelCounter[reelIndex] -= 1;\n          rr = this.nudgeReelCounter[reelIndex];\n        }\n        else if(this.currentFruits[reelIndex] == 0)\n        {\n          rr = -1;\n          this.nudgeReelCounter[reelIndex] = rr;\n        }\n        else\n        {\n          rr = ri;\n        }\n      }\n      else\n      {\n        ri = this.currentFruits[reelIndex] == this.numberOfFruits-1 ? 0 : this.currentFruits[reelIndex] + 1;\n        if(this.nudgeReelCounter[reelIndex] > this.numberOfFruits-1)\n        {\n          this.nudgeReelCounter[reelIndex] += 1;\n          rr = this.nudgeReelCounter[reelIndex];\n        }\n        else if(this.currentFruits[reelIndex] == this.numberOfFruits-1)\n        {\n          rr = this.numberOfFruits;\n          this.nudgeReelCounter[reelIndex] = rr;\n        }\n        else\n        {\n          rr = ri;\n        }\n      }\n    }\n    else //type will be name of fruit which needs to win\n    {\n      ri = this.reelFruits[reelIndex].findIndex(d=>d.name==type)\n      rr = ri;\n    }\n\n    this.currentFruits[reelIndex] = ri;\n    let radians = rwxGeometry.toRadians(this.oneRotation * rr);\n    //Set the current spin values to equal the next spin values which are actually at this point the current ones - before it sets the new spin vals\n    this.currentSpinValues[reelIndex] = this.currentSpinValues.length > 0 ? this.nextSpinValues[reelIndex] : radians;\n    this.nextSpinValues[reelIndex] = radians;\n    return radians;\n  }\n\n\n\n\n\n  //\n  // *** HELPERS / GETTERS\n  // *** These are helper functions specific to this class for doing quick, repeatable things or retrieving quick pieces of information from elsewhere within the app\n  //\n\n  calculateStreakWinnersArray(type)\n  {\n    let fruitsArray = [];\n    let moneyArray = [];\n    let monetaryValue = this.fruits.map((f)=>f.coinValue && moneyArray.push(f.coinValue));\n    moneyArray.sort((a, b)=> a-b);\n\n    let streakLength;\n    if(type=='streak'){streakLength = rwxMath.randomInt(3,7);}\n    else if(type=='super'){streakLength = rwxMath.randomInt(4,8);}\n    else if(type=='mega'){streakLength = rwxMath.randomInt(5,10);}\n\n    let streakArrBounds = Math.floor(moneyArray.length * (this.streakBounds/100));\n    let superStreakArrBounds = Math.floor(moneyArray.length * (this.superStreakBounds/100));\n    let megaStreakArrBounds = Math.floor(moneyArray.length * (this.megaStreakBounds/100));\n    let maxCoinValue;\n    if(type=='streak'){maxCoinValue = streakArrBounds;}\n    else if(type=='super'){maxCoinValue = superStreakArrBounds;}\n    else if(type=='mega'){maxCoinValue = megaStreakArrBounds;}\n\n    for(let i=0;i<streakLength;i++)\n    {\n      let coinValue = moneyArray[rwxMath.randomInt(0, maxCoinValue)];\n      let fruitName = this.fruits.filter(f=>f.coinValue==coinValue)[0].name;\n      fruitsArray.push(fruitName);\n    }\n    return fruitsArray;\n  }\n\n  resetNumberTrail()\n  {\n    this.reelNumbers = 0;\n    this.numberTrailHeld = false;\n    this.numberTrailHeldFromBonus = false;\n  }\n\n  updateNumberTrail()\n  {\n    this.spinNumberReelStep1 = false;\n    this.spinNumberReelStep1Ease = false;\n    this.numberReelPreviousRotation = this.numberReelPreviousRotation=== undefined ? 0 : this.numberReelCurrentRotation;\n    let rotation = this.reelNumbers >= this.numberOfNumbers ? this.numberOfNumbers : this.reelNumbers;\n    this.numberReelCurrentRotation = rwxGeometry.toRadians(rotation*this.numberReelOneRotation);\n    if(this.numberReelPreviousRotation == this.numberReelCurrentRotation)return;\n    this.numberReelSpinFlag = true;\n    let color = this.numberTrailHeld || this.numberTrailHeldFromBonus ? this.numberTrailHeldColor : 0xffffff;\n    for(let [index,f] of this.numberReelFaces.entries())\n    {\n      f.material.color.set(color);\n      //numberReelFaces is reversed remember\n      if(index==0){f.material.color.set(this.numberFeatureStartColor);}\n      else if(index==(this.numberReelFaces.length-1-this.numbersBonus)){f.material.color.set(this.numberBonusColor);}\n      else if(index==(this.numberReelFaces.length-1-rotation)){f.material.color.set(this.numberHighlightColor);};\n    }\n    this.numberTrailHeld && this.rwxNoticeBox.setValue('Number trail held', true);\n  }\n\n  hasNudges()\n  {\n    return this.amountOfNudges>0;\n  }\n\n  hasReelStrikes()\n  {\n    return this.amountOfReelStrikes>0;\n  }\n\n  assignNudges()\n  {\n    let p = rwxMath.randomInt(0,this.nudgeProbability);\n    if(p>0){return;}\n    this.amountOfNudges = rwxMath.randomInt(1, 4);\n  }\n\n  assignHolds()\n  {\n    // this.hasHolds = true;\n    // return;\n    let p = rwxMath.randomInt(0,this.holdProbability);\n    if(p>0){return;}\n    this.numberTrailHeld = true;\n    this.hasHolds = true;\n  }\n\n\n\n\n\n  //\n  // *** Functional\n  // *** These methods actually do the things which happen during the game\n  //\n  streak(strength)\n  {\n    this.streakRunning = true;\n    this.streakFruitIndex = 0;\n    let type;\n    if(strength<=(this.streakBounds/10))type='streak';\n    else if(strength>(this.streakBounds/10) && strength<=(this.superStreakBounds/10))type='super';\n    else if(strength>(this.superStreakBounds/10) <=(this.megaStreakBounds/10))type='mega';\n    this.streakFruits = this.calculateStreakWinnersArray(type);\n    this.spinReelsEvent(this.streakFruits[this.streakFruitIndex]);\n  }\n\n  reelStrikes()\n  {\n    this.reelStrikeFlag = true;\n  }\n\n  bonusStreak()\n  {\n    this.streak(5);\n  }\n\n  bonusWinSpin()\n  {\n    this.spinReelsEvent('randomWin');\n  }\n\n  bonusStoppaReel()\n  {\n    this.cachedRotations = this.reels.map(a => a.rotation.x);\n    this.stoppaReelIndex = 0;\n    this.stoppaReelPause = false;\n    this.bonusStoppaReelSpeedDegrees = rwxGeometry.toRadians(this.bonusStoppaReelSpeed);\n    this.stoppaReelFlag = true;\n  }\n\n  bonusNumbersInView()\n  {\n    this.trailHeld = true;\n    this.determineNumbers(true, \"all\");\n    this.updateNumberTrail();\n    if(this.hasFeature)\n    {\n      this.toFeatureBoard();\n    }\n    else if(this.hasBonus)\n    {\n      this.setTombola(this.fruitMachineBonuses, 'hasBonus');\n    }\n  }\n\n  bonusOneReelStrike()\n  {\n    this.amountOfReelStrikes = 1;\n    this.reelStrikes();\n  }\n\n  bonusTwoReelStrikes()\n  {\n    this.amountOfReelStrikes = 3;\n    this.reelStrikes();\n  }\n\n  bonusTwoNudges()\n  {\n    this.amountOfNudges = 2;\n    this.flashButtonsFlag = true;\n  }\n\n  bonusFourNudges()\n  {\n    this.amountOfNudges = 4;\n    this.flashButtonsFlag = true;\n  }\n\n  bonusThreeReverseNudges()\n  {\n    this.nudgeReelCounter = new Array(this.numberOfReels).fill(0);\n    this.reverseNudge = true;\n    this.amountOfNudges = 3;\n    this.flashButtonsFlag = true;\n  }\n\n  bonusFourReverseNudges()\n  {\n    this.nudgeReelCounter = new Array(this.numberOfReels).fill(0);\n    this.reverseNudge = true;\n    this.amountOfNudges = 4;\n    this.flashButtonsFlag = true;\n  }\n\n  bonusUnlucky()\n  {\n    return;\n  }\n\n\n\n\n\n  //\n  // *** DETERMINATIONS\n  // *** These methods process information and determine conditions\n  //\n\n  determineBonus(reelIndex=\"all\") // for nudges just check the reel being nudged not all\n  {\n    let hasBonus;\n    if(reelIndex == \"all\")\n    {\n      hasBonus = this.currentFruits.some((f, i)=> {return this.reelFruits[i][f].name == \"bonus\"});\n    }\n    else\n    {\n      hasBonus = this.reelFruits[reelIndex][this.currentFruits[reelIndex]].name == \"bonus\";\n    }\n    return hasBonus;\n  }\n\n  determineNumbers(numbersInView=false, reelIndex)\n  {\n    let spinNumbersTotal = 0;\n    this.currentFruits.map((cf,i)=>{\n      if(this.reelFruits[i][cf].number !== undefined){\n        if(this.numberTrailHeldFromBonus && reelIndex!=i && reelIndex!='all')return;\n        if(this.numberTrailHeld && reelIndex!=i && reelIndex!='all')return;\n        spinNumbersTotal += this.reelFruits[i][cf].number.value;\n      }\n      if(numbersInView)\n      {\n        let before = cf==0 ? this.numberOfFruits-1 : cf-1;\n        let after = cf==this.numberOfFruits-1 ? 0 : cf+1;\n        if(this.reelFruits[i][before].number !== undefined){\n          spinNumbersTotal += this.reelFruits[i][before].number.value;\n        }\n        if(this.reelFruits[i][after].number !== undefined){\n          spinNumbersTotal += this.reelFruits[i][after].number.value;\n        }\n      }\n    });\n    if(this.numberTrailHeld || this.numberTrailHeldFromBonus)\n    {\n      this.reelNumbers += spinNumbersTotal;\n    }\n    else\n    {\n      this.reelNumbers = spinNumbersTotal;\n    }\n\n    if(this.reelNumbers == this.numbersBonus && !this.numberTrailHeldFromBonus && !this.hasBonus)\n    {\n      this.hasBonus = true;\n      this.numberTrailHeld = true;\n      this.numberTrailHeldFromBonus = true;\n    }\n    if(this.reelNumbers >= this.numberOfNumbers)\n    {\n      this.hasBonus = false;\n      this.hasFeature = true;\n      return;\n    }\n\n    if(!this.numberTrailHeldFromBonus && reelIndex == 'all')\n    {\n      let p = rwxMath.randomInt(0,this.numberTrailHeldProbability);\n      this.numberTrailHeld = p==0;\n    }\n    if(this.reelNumbers == 0)\n    {\n      this.numberTrailHeld = false;\n    }\n  }\n\n  determineFeature()\n  {\n    let hasFeature = this.currentFruits.every((cf, i)=>{return (this.reelFruits[i][cf].name == \"wild\")});\n    return hasFeature;\n  }\n\n  determineWin()\n  {\n    let first;\n    for(let is=0;is<this.currentFruits.length;is++)\n    {\n      if(this.reelFruits[is][this.currentFruits[is]].name == \"wild\" || this.reelFruits[is][this.currentFruits[is]].name == \"bonus\"){continue;}\n      else{first = this.reelFruits[is][this.currentFruits[is]].name; break;}\n    }\n    let isWin = this.currentFruits.every((cf, i)=>{return (this.reelFruits[i][cf].name == first || this.reelFruits[i][cf].name == \"wild\")});\n    if(isWin)\n    {\n      this.winValue = this.fruits.filter(f=>f.name==first)[0].coinValue;\n    }\n    return isWin;\n  }\n\n  determineWinLine(reelIndex=\"all\")\n  {\n    this.hasFeature = this.determineFeature();\n    if(!this.hasFeature)\n    {\n      this.hasWonFlag = this.determineWin();\n      if(!this.hasWonFlag)\n      {\n        if(this.enableBonus)\n        {\n          this.hasBonus = this.determineBonus(reelIndex);\n        }\n        if(this.enableNumbers)\n        {\n          this.determineNumbers(false, reelIndex);\n        }\n      }\n    }\n  }\n\n\n\n\n\n\n  //\n  // *** EVENTS\n  // These methods are triggered by a user interaction on the page (distributed by the core)\n  //\n\n  holdReelEvent(reelIndex)\n  {\n    this.reelHeldCounter[reelIndex] = this.reelHeldCounter[reelIndex] == 0 ? 1 : 0;\n  }\n\n  nudgeReelEvent(reelIndex)\n  {\n    if(this.nudgeReelFlag || this.hasWonFlag || this.spinReelsFlag || this.hasFeatureFlag || this.hasBonus)return;\n    this.amountOfNudges -= 1;\n    this.reelToNudge = reelIndex;\n    this.setReelRotation(this.reelToNudge, 'nudge');\n\n    this.determineWinLine(reelIndex);\n\n    this.nudgeReelFlag = true;\n\n    this.reelsHaveNudged();//only take half a second isnt worth waiting for animation to complete\n  }\n\n  spinReelsEvent(win=false)\n  {\n    if(this.hasHolds){\n      this.flashButtonsReset();\n      this.hasHolds = false;\n    }\n\n    if(this.spinReelsFlag || this.hasWonFlag || this.nudgeReelFlag || this.hasNudges() || this.hasReelStrikes() || this.hasBonus || this.stoppaReelFlag || this.hasFeatureFlag || this.fruitMachineInitAnimationFlag)return;\n\n    if(this.amountOfCoins<=0 && !this.freePlay){\n      this.rwxNoticeBox.setValue(\"No more coins\");\n      console.log(\"BUY MORE COINS!\");\n      return;\n    }\n\n    this.numberTrailHeldFromBonus = false;\n\n    if(!this.freePlay && !win)\n    {\n      this.amountOfCoins -= this.costPerSpin;\n    }\n\n    if(!this.numberTrailHeld && this.enableNumbers)\n    {\n      this.reelNumbers = 0;\n      this.updateNumberTrail();\n    }\n\n    for(let r=0;r<this.numberOfReels;r++)\n    {\n      let type = win ? win : 'spin';\n      this.setReelRotation(r, type);\n    }\n\n    this.determineWinLine();\n\n    if(this.hasWonFlag || this.hasBonus || this.hasFeature)\n    {\n      this.flashButtonsReset();\n    }\n\n    let allHeld = this.reelHeldCounter.every(rh=>rh==1);\n    if(allHeld)\n    {\n      this.reelsHaveSpun();\n    }\n    else\n    {\n      this.spinReelsFlag = true;\n    }\n  }\n\n  stoppaReelEvent(reelIndex)\n  {\n    if(reelIndex != this.stoppaReelIndex)return;\n    this.stoppaReelPause = true;\n    let diff = this.reels[reelIndex].rotation.x - this.cachedRotations[reelIndex];\n    let numberOfFruitsPassed = Math.round(diff/rwxGeometry.toRadians(this.oneRotation));\n    let counterIndex = this.currentFruits[reelIndex];\n    for(let f=0;f<numberOfFruitsPassed;f++)\n    {\n      counterIndex = counterIndex==this.numberOfFruits-1 ? 0 : counterIndex+1;\n    }\n\n    this.reels[reelIndex].rotation.x = counterIndex * rwxGeometry.toRadians(this.oneRotation);\n    this.nextSpinValues[reelIndex] = counterIndex * rwxGeometry.toRadians(this.oneRotation);\n    this.currentFruits[reelIndex] = counterIndex;\n    this.flashButtonsReset();\n    if(this.stoppaReelIndex == this.numberOfReels-1)\n    {\n      this.stoppaReelFlag = false;\n      this.determineWinLine();\n      this.reelsHaveSpun();\n      return;\n    }\n    else\n    {\n      this.stoppaReelIndex +=1 ;\n      this.bonusStoppaReelSpeedDegrees = rwxGeometry.toRadians((this.bonusStoppaReelSpeed+(this.stoppaReelIndex * this.bonusStoppaReelIncrement)));\n      this.stoppaReelPause = false;\n    }\n  }\n\n  stopReelStrike(winner=false)\n  {\n    if(winner)\n    {\n      this.amountOfReelStrikes -= 1;\n      if(this.hasReelStrikes())\n      {\n        this.rwxDuoSelector.setValues([{displayName: 'Gamble', value: 'gamble'}, {displayName: `Collect`, value: 'collect'}]).then((res)=>{\n          if(res==\"gamble\")\n          {\n            this.reelStrikeFlag = true;\n          }\n          else\n          {\n            this.amountOfReelStrikes = 0;\n            this.spinReelsEvent(winner); \n            this.reelStrikeData.cache.material.opacity = 0.5;\n          }\n        })\n      }\n      else\n      {\n        this.spinReelsEvent(winner);\n        this.reelStrikeData.cache.material.opacity = 0.5;\n      }\n    }\n    else\n    {\n      this.reelStrikeStopFlag = true;\n    }\n  }\n\n\n\n\n\n  //\n  // *** ANIMATIONS\n  // *** These are all called from the animation loop when a certain variable is set\n  //\n\n  reelStrike()\n  {\n    if(!this.reelStrikeStep1)\n    {\n      let speed = this.reelStrikeSpeed;\n      if(this.reelStrikeStopFlag)\n      {\n        speed = rwxAnimate.fromTo(this.reelStrikeSpeed, (this.reelStrikeSpeed*4), 'fromToReelStrike', 'linear', 3000, () => { this.reelStrikeStep1 = true; });\n      }\n      if(this.reelStrikeData.timeoutCounter >= speed)\n      {\n        if(this.reelStrikeData.horizontalCounter == this.reels.length-1 && this.reelStrikeData.direction==\"fwd\"){this.reelStrikeData.direction = \"dwn\";}\n        if(this.reelStrikeData.verticalCounter == 2 && this.reelStrikeData.direction==\"dwn\"){this.reelStrikeData.direction = \"bck\";}\n        if(this.reelStrikeData.horizontalCounter == 0 && this.reelStrikeData.direction==\"bck\"){this.reelStrikeData.direction = \"up\";}\n        if(this.reelStrikeData.verticalCounter == 0 && this.reelStrikeData.direction==\"up\"){this.reelStrikeData.direction = \"fwd\";}\n        if(this.reelStrikeData.direction==\"fwd\") this.reelStrikeData.horizontalCounter += 1;\n        if(this.reelStrikeData.direction==\"dwn\") this.reelStrikeData.verticalCounter += 1;\n        if(this.reelStrikeData.direction==\"bck\") this.reelStrikeData.horizontalCounter -= 1;\n        if(this.reelStrikeData.direction==\"up\") this.reelStrikeData.verticalCounter -= 1;\n        if(this.reelStrikeData.cache)this.reelStrikeData.cache.material.opacity = 0.5;\n        this.reelStrikeData.verticalToUse = this.currentFruits[this.reelStrikeData.horizontalCounter]+this.reelStrikeData.verticalCounter-1;\n        if(this.reelStrikeData.verticalToUse > 12){this.reelStrikeData.verticalToUse = 0;}\n        else if(this.reelStrikeData.verticalToUse < 0){this.reelStrikeData.verticalToUse = 12;}\n        this.reelStrikeData.cache = this.reels[this.reelStrikeData.horizontalCounter].children[this.reelStrikeData.verticalToUse].children[0]\n        this.reelStrikeData.cache.material.opacity = 1;\n        this.reelStrikeData.timeoutCounter = 0;\n      }\n      this.reelStrikeData.timeoutCounter += 1;\n    }\n    else\n    {\n      let winner = this.reelFruits[this.reelStrikeData.horizontalCounter][this.reelStrikeData.verticalToUse].name;\n      Object.assign(this.reelStrikeData, this.reelStrikeDataInitial);\n      this.stopReelStrike(winner);\n      this.reelStrikeStep1 = false;\n      this.reelStrikeStep1Ease = false;\n      this.reelStrikeStopFlag = false;\n      this.reelStrikeFlag = false;\n    }\n  }\n\n  nudgeReel()\n  {\n    if(!this.nudgeReelStep1)\n    {\n      this.reels[this.reelToNudge].rotation.x = rwxAnimate.fromTo(this.currentSpinValues[this.reelToNudge], this.nextSpinValues[this.reelToNudge], 'fromToNudgeReel', 'easeOutQuad', this.nudgeDuration, () => { this.nudgeReelStep1 = true; });\n    }\n    else\n    {\n      this.nudgeReelFlag = false;\n      this.nudgeReelStep1 = false;\n      this.nudgeReelStep1Ease = false;\n      this.nudgeReelFlag = false;\n    }\n  }\n\n  stoppaReel()\n  {\n    if(this.stoppaReelPause)return;\n    this.reels[this.stoppaReelIndex].rotation.x += this.bonusStoppaReelSpeedDegrees;\n    this.flashButtons(false, this.stoppaReelIndex);\n  }\n\n  spinNumberReel()\n  {\n    if(!this.spinNumberReelStep1)\n    {\n      let val = rwxAnimate.getEasingValue('easingValueSpinNumberReel', 'easeOutCubic', 500, () => { this.spinNumberReelStep1 = true; });\n      if(this.numberReelPreviousRotation>this.numberReelCurrentRotation)\n      {\n        if(this.numberReelCurrentRotation == 0)\n        {\n          this.numberReel.rotation.y = rwxAnimate.fromToCalc(this.numberReelPreviousRotation, 0, val);\n        }\n        else\n        {\n          this.numberReel.rotation.y = rwxAnimate.fromToCalc(this.numberReelPreviousRotation, this.numberReelPreviousRotation, val);\n        }\n      }\n      else\n      {\n        this.numberReel.rotation.y = rwxAnimate.fromToCalc(this.numberReelPreviousRotation, this.numberReelCurrentRotation, val);\n      }\n    }\n    else\n    {\n      this.spinNumberReelStep1 = false\n      this.spinNumberReelStep1Ease = false;\n      this.numberReelSpinFlag = false;\n    }\n  }\n\n  spinReels()\n  { \n    for(let [i, reel] of this.reels.entries())\n    {\n      if(this.spinTimeoutCounter <= (this.spinTimeout*i)){continue;}\n      else\n      {\n        if(!this[`spinReelsStep1-${i}`])\n        {\n          if(!this.reelHeldCounter[i] == 1)\n          {\n            reel.rotation.x = rwxAnimate.fromTo(this.currentSpinValues[i], (this.currentSpinValues[i] - this.spinMoveBackDegrees), `fromToSpinReelsStep1-${i}`, 'easeOutQuad', this.spinMoveBackDuration, () => { this[`spinReelsStep1-${i}`] = true; });\n          }\n        }\n        else\n        {\n          if(!this[`spinReelsStep2-${i}`])\n          {\n            if(!this.reelHeldCounter[i] == 1)\n            {\n              reel.rotation.x = rwxAnimate.fromTo((this.currentSpinValues[i]-this.spinMoveBackDegrees), (this.spinLength + this.nextSpinValues[i]), `fromToSpinReelsStep2-${i}`, 'easeInOutQuint', this.spinDuration, () => { this[`spinReelsStep2-${i}`] = true; });\n            }    \n          }\n          else\n          {\n            if(i == (this.reels.length-1)){\n              this.reelsHaveSpun();\n              for(let i=0;i<this.reels.length;i++)\n              {\n                this[`spinReelsStep1-${i}`] = false;\n                this[`spinReelsStep1-${i}Ease`] = false;\n                this[`spinReelsStep2-${i}`] = false;\n                this[`spinReelsStep2-${i}Ease`] = false;\n              }\n              this.spinTimeoutCounter = 0;\n              this.spinReelsFlag = false;\n            }            \n          }\n        }        \n      }\n    }\n    this.spinTimeoutCounter += 1;\n  }\n\n  judderReels()\n  {\n    for(let [i, reel] of this.reels.entries())\n    {\n      if(this.judderReelCounter[i] == 0) {reel.rotation.x -= rwxGeometry.toRadians(1);}\n      if(this.judderReelCounter[i] == 4) {reel.rotation.x -= rwxGeometry.toRadians(2);}\n      if(this.judderReelCounter[i] == 8) {reel.rotation.x += rwxGeometry.toRadians(1);}\n      if(this.judderReelCounter[i] == 12) {reel.rotation.x += rwxGeometry.toRadians(2);}\n      this.judderReelCounter[i] += 1;\n      if(this.judderReelCounter[i] == 16) this.judderReelCounter[i] = 0;     \n    }     \n  }\n\n  winAnimation()\n  {\n    this.flashButtons();\n    if(this.winAnimationTimeoutCounter < this.winJudderDuration)\n    {\n      this.judderReels();\n    }\n    else\n    {\n      if(!this.winSpin)\n      {\n        let val = rwxAnimate.getEasingValue('easingValueWinAnimation', 'linear', this.winAnimationDuration, () => { this.winSpin = true; });\n        for(let [i, reel] of this.reels.entries())\n        {\n          if(i%2==0)\n          {\n            reel.rotation.x = rwxAnimate.fromToCalc(this.nextSpinValues[i], (this.nextSpinValues[i]-this.winSpinLength), val);\n          }\n          else\n          {\n            reel.rotation.x = rwxAnimate.fromToCalc(this.nextSpinValues[i], (this.nextSpinValues[i]+this.winSpinLength), val);\n          } \n        }\n        this.numberReel.rotation.y = rwxAnimate.fromToCalc(0, (this.numberReelCurrentRotation + this.winSpinLength), val);\n      }\n\n      if(!this.zoomThroughReelsStep1)\n      { \n        let val = rwxAnimate.getEasingValue('easingValueWinAnimationZTRS1', 'easeOutCubic', this.zoomThroughReelsStep1Duration, () => { this.zoomThroughReelsStep1 = true; });\n        this.camera.position.set(rwxAnimate.fromToCalc(this.cameraPositionDefault.x, this.zoomThroughReelsStartX, val), rwxAnimate.fromToCalc(this.cameraPositionDefault.y, this.reelYPos, val), rwxAnimate.fromToCalc(this.cameraPositionDefault.z, this.zoomThroughReelsZ, val));  \n      }\n      else\n      {\n        if(!this.zoomThroughReelsStep2)\n        {\n          let x = rwxAnimate.fromTo(this.zoomThroughReelsStartX, this.zoomThroughReelsFinishX, 'easingValueWinAnimationZTRS2', 'easeInOutQuad', this.zoomThroughReelsStep2Duration, () => { this.zoomThroughReelsStep2 = true; });\n          this.camera.position.set(x, this.reelYPos, this.zoomThroughReelsZ);      \n        }\n        else\n        {\n          if(!this.zoomThroughReelsStep3)\n          {\n            let val3 = rwxAnimate.getEasingValue('easingValueWinAnimationZTRS3', 'easeInOutQuad', this.zoomThroughReelsStep3Duration, () => { this.zoomThroughReelsStep3 = true; });\n            this.camera.position.set(rwxAnimate.fromToCalc(this.zoomThroughReelsFinishX, this.cameraPositionDefault.x, val3), rwxAnimate.fromToCalc(this.reelYPos, this.cameraPositionDefault.y, val3), rwxAnimate.fromToCalc(this.zoomThroughReelsZ, this.cameraPositionDefault.z, val3));                \n          }\n          else\n          {\n            this.flashButtonsReset();\n            this.winSpin = false;\n            this.winSpinEase = false;\n            for(let z=1;z<4;z++)\n            {\n              this[`zoomThroughReelsStep${z}`] = false;\n              this[`zoomThroughReelsStep${z}Ease`] = false;\n            }\n            let counter = 0;\n            this.judderReelCounter = [];\n            for(let jr=0;jr<this.numberOfReels;jr++)\n            {\n              this.judderReelCounter.push(counter);\n              counter += 2;\n            }\n            this.winAnimationTimeoutCounter = 0;\n            this.hasWonFlag = false;\n          }\n        }\n      }\n    }\n    this.winAnimationTimeoutCounter +=1;\n  }\n\n  flashButtonsReset()\n  {\n    this.flashButtonsFlag = false;\n    this.flashOpacityCounter = 1;\n    this.flashOpacityDirection = \"DOWN\";\n    for(let button of this.reelControlButtons)\n    {\n      button.material.opacity = 0.5;\n      button.position.y = this.buttonYPosition;\n    }    \n  }\n\n  flashButtons(all=true, index=0)\n  {\n    if(this.flashOpacityCounter <= 0.5)this.flashOpacityDirection = \"UP\";\n    if(this.flashOpacityCounter >= 1)this.flashOpacityDirection = \"DOWN\";\n\n    this.flashOpacityCounter = this.flashOpacityDirection == \"DOWN\" ? this.flashOpacityCounter - this.flashButtonsSpeed : this.flashOpacityCounter + this.flashButtonsSpeed;\n\n    for(let [i, button] of this.reelControlButtons.entries())\n    {\n      if(!all && i!=index){continue;}\n      if(this.reelHeldCounter[i] === 1){\n        button.material.opacity = 1;\n        button.position.y = this.buttonYPosition;\n      }\n      else\n      {\n        button.material.opacity = this.flashOpacityCounter;\n        button.position.y = this.buttonYPosition - (1-this.flashOpacityCounter);\n      }\n    }\n  }\n\n  fruitMachineInitAnimation()\n  {\n    for(let [i, reelFace] of this.fruitMachineInitAnimationData.reelFaces.entries())\n    {\n      if(this.timeoutCounter <= reelFace.timeout){continue;}\n      else\n      {\n        if(!this[`fruitMachineInitialAnimationStep1-${i}`])\n        {\n          let val = rwxAnimate.getEasingValue(`easingValueFruitMachineInitialAnimationStep1-${i}`, 'easeInOutQuart', 4000, () => { this[`fruitMachineInitialAnimationStep1-${i}`] = true; });\n          reelFace.face.position.set(rwxAnimate.fromToCalc(reelFace.start.x, reelFace.finish.x, val), rwxAnimate.fromToCalc(reelFace.start.y, reelFace.finish.y, val), rwxAnimate.fromToCalc(reelFace.start.z, reelFace.finish.z, val));\n          reelFace.face.rotation.y = rwxAnimate.fromToCalc(0, (this.initialAnimationConfigurables.amountOfSpin + reelFace.rotation), val);\n        }\n        else\n        {\n          if(i == (this.fruitMachineInitAnimationData.reelFaces.length-1) && this.fruitMachineInitialAnimationStep3 && this.fruitMachineInitialAnimationStep2 && this.fruitMachineInitialAnimationStep4 && this.fruitMachineInitialAnimationStep5){\n            this.fruitMachineInitAnimationFlag = false;\n          }            \n        }\n      }\n    }\n\n    if(this.enableNumbers && !this.fruitMachineInitialAnimationStep5)\n    {\n      if(this.timeoutCounter> 100)\n      {\n        let val4 = rwxAnimate.getEasingValue('easingValueFruitMachineInitialAnimationStep5', 'easeOutQuart', 5000, () => { this.fruitMachineInitialAnimationStep5 = true; });\n        for(let numberReel of this.fruitMachineInitAnimationData.numberReel)\n        {\n          numberReel.reel.position.y = rwxAnimate.fromToCalc(numberReel.start.y, 0, val4);\n          numberReel.reel.position.z = rwxAnimate.fromToCalc(numberReel.start.z, numberReel.finish.z, val4);\n          numberReel.reel.rotation.y = rwxAnimate.fromToCalc(0, this.initialAnimationConfigurables.amountOfSpin, val4);\n        }\n      }        \n    }\n    else\n    {\n      this.initialAnimationStep5 = true;\n    }\n\n    if(!this.fruitMachineInitialAnimationStep4)\n    {\n      let val1 = rwxAnimate.getEasingValue('easingValueFruitMachineInitialAnimationStep4', 'easeInOutCubic', 5000, () => { this.fruitMachineInitialAnimationStep4 = true; });\n      for(let button of this.fruitMachineInitAnimationData.buttons)\n      {\n        button.button.position.y = rwxAnimate.fromToCalc(button.starty, button.finishy, val1);\n      }      \n    }\n\n    if(!this.fruitMachineInitialAnimationStep3 && this.timeoutCounter > 20)\n    {\n      let val3 = rwxAnimate.getEasingValue('easingValueFruitMachineInitialAnimationStep3', 'easeInOutQuart', 4000, () => { this.fruitMachineInitialAnimationStep3 = true; });\n      for(let reelEdge of this.fruitMachineInitAnimationData.reelEdges)\n      {\n        reelEdge.edge.position.y = rwxAnimate.fromToCalc(reelEdge.starty, reelEdge.finishy, val3);\n        reelEdge.outline.position.y = rwxAnimate.fromToCalc(reelEdge.starty, reelEdge.finishy, val3);\n      }\n    }\n\n    if(!this.fruitMachineInitialAnimationStep2)\n    {\n      let val2 = rwxAnimate.getEasingValue('easingValueFruitMachineInitialAnimationStep2', 'easeInOutQuad', 6000, () => { this.fruitMachineInitialAnimationStep2 = true; });\n      this.camera.position.x = rwxAnimate.fromToCalc((this.cameraPositionDefault.x+this.initialAnimationConfigurables.cameraX), this.cameraPositionDefault.x, val2);\n      this.camera.position.z = rwxAnimate.fromToCalc((this.cameraPositionDefault.z+this.initialAnimationConfigurables.cameraZ), this.cameraPositionDefault.z, val2);\n    }\n    this.timeoutCounter+=1;\n  }\n}","import * as THREE from 'three';\nimport { CSS2DObject } from 'three/examples/jsm/renderers/CSS2DRenderer.js';\n\nimport OneUp from './oneUp/oneUp.js';\n\nimport rwxMath from 'roseworx/js/helpers/rwxMathHelpers';\nimport rwxMisc from 'roseworx/js/helpers/rwxMiscHelpers';\nimport rwxGeometry from 'roseworx/js/helpers/rwxGeometryHelpers';\nimport rwxAnimate from 'roseworx/js/helpers/rwxAnimateHelpers';\n\nexport class FeatureBoard {\n\tconstructor()\n\t{\n\t\tthis.featureBoardDevelop = false;\n\t}\n\n\t//\n\t// *** CREATORS\n\t// *** These methods are responsible for creating the objects which render on the actual page\n\t//\n\n\tcreateFeatureBoard()\n\t{\n\t\tthis.createCubes();\n\t\tthis.createDice();\n\t\tthis.createHeartsAndIcons();\n\t\tthis.createDOMHolders();\n\t\tthis.fbGeometryGroup.add(this.fbCubesGroup);\n\t\tthis.fbGeometryGroup.add(this.fbPersistentZGroup);\n\t\tthis.fbGeometryGroup.rotation.y = rwxGeometry.toRadians(-90);\n\t\tthis.fbGeometryGroup.position.set(this.featureCameraPositionDefault.x+this.fbCameraDistance, this.featureCameraPositionDefault.y, this.featureCameraPositionDefault.z);\t\n\t\tthis.scene.add( this.fbGeometryGroup );\n\t\t\n\t\t// setTimeout(()=>{\n\t\t// \tconsole.log(this.getCurrentSquare());\n\t\t// }, 5000);\n\n\t}\n\n\tcreateHeartsAndIcons()\n\t{\n    let data = [\n\t    {\n\t    \tid: 'heart',\n\t    \timage: require('./fruitMachineAssets/heart.png'),\n\t    \tvariable: 'heartsArray'\n\t    },\n\t    {\n\t    \tid: 'icon',\n\t    \timage: require('./fruitMachineAssets/icon.png'),\n\t    \tvariable: 'iconsArray'\n\t    }\n    ]\n\n    for(let d of data)\n    {\n\t    for(let h=0;h<this.maxNumberOfIcons;h++)\n\t    {\n\t    \tlet ou = new OneUp(d.image, `feature-board-${d.id}${h+1}-container`);\n\t    \tthis[d.variable].push(ou)\n\t    \tou.getNode().classList.add('dom-element-hide');\n\t    }\n    }\n\t}\n\n\tcreateDOMHolders()\n\t{\n\t\t// Invisible cubes which serve as placeholders to set the FB DOM elements into the THREE space\n\t\tlet geo, mat, mesh, domElement, label;\n\t\tfor(let de of this.fbDOMElements)\n\t\t{\n\t\t\tgeo = new THREE.BoxBufferGeometry(1,1,1);\n\t\t\tmat = new THREE.MeshStandardMaterial({color: 0x000000});\n\t\t\tmesh = new THREE.Mesh(geo, mat);\n\t\t\tmesh.position.x = de.position.x;\n\t\t\tmesh.position.y = de.position.y;\n\t\t\tif(de.helperTipID)\n\t\t\t{\n\t\t\t\tthis.checkAndApplyHelperTip(mesh, de.helperTipID);\n\t\t\t}\n\t\t\tdomElement = document.getElementById(de.domID);\n\t\t\tlabel = new CSS2DObject(domElement);\n\t\t\tmesh.add(label);\n\t\t\tmesh.visible = false;\n\t\t\tthis.fbPersistentZGroup.add(mesh);\n\t\t}\n\t}\n\n\tcreateDice()\n\t{\n\t\tlet diceGeometry, diceMesh, helperTip;\n\t\tfor(let d=0;d<2;d++)\n\t\t{\n\t\t\tlet materialArray = [];\n\t\t\tlet rotations = {};\n\t\t\tdiceGeometry = new THREE.BoxBufferGeometry(this.diceSize,this.diceSize,this.diceSize);\n\t\t\tthis.addCubeFaceGroups(diceGeometry);\n\t\t\tmaterialArray.push(new THREE.MeshStandardMaterial({color: this.diceColor}));\n\t\t\tfor(let dn of this.diceNumbers)\n\t\t\t{\n\t\t\t\tif((d==0 && dn.value == 1) || (d==1 && dn.value == 2))\n\t\t\t\t{\n\t\t\t\t\tmaterialArray.push(new THREE.MeshStandardMaterial({color: this.diceColor}));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tmaterialArray.push(new THREE.MeshStandardMaterial( { transparent: true, map:dn.texture } ));\n\t\t\t\t}\n\t\t\t}\n\t\t\tdiceMesh = new THREE.Mesh( diceGeometry, materialArray );\n\t\t\tdiceMesh.position.x = d==0 ? -this.diceSize : this.diceSize;\n\t\t\t// 5 = no rotation  \n\t\t\t//3 = x rotation 90 \n\t\t\t//6 = x rotation 180 \n\t\t\t//4 = x rotation 270 2 = first dice y rotation 90 1 = second dice y rotation -90; 0 = second dice y rotation 90 , first dice y rotation -90\n\t\t\trotations[6] = new THREE.Vector3(rwxGeometry.toRadians(180),0,0);\n\t\t\trotations[5] = new THREE.Vector3(0,0,0);\n\t\t\trotations[4] = new THREE.Vector3(rwxGeometry.toRadians(270),0,0);\n\t\t\trotations[3] = new THREE.Vector3(rwxGeometry.toRadians(90),0,0);\n\t\t\tif(d==0){rotations[2] = new THREE.Vector3(0,rwxGeometry.toRadians(90),0)}\n\t\t\tif(d==1){rotations[1] = new THREE.Vector3(0,-rwxGeometry.toRadians(90),0)}\n\t\t\trotations[0] = d==0 ? new THREE.Vector3(0,-rwxGeometry.toRadians(90),0) : new THREE.Vector3(0,rwxGeometry.toRadians(90),0);\n\t\t\tdiceMesh.rotations = rotations;\n\n\n\t\t\td==0 && this.checkAndApplyHelperTip(diceMesh, 'helper-tip-dice');\n\n\t\t\tthis.dice.push(diceMesh);\n\t\t\tthis.fbPersistentZGroup.add(diceMesh);\n\t\t\tthis.ableToGambleHI = true;\n\t\t\tthis.ableToGambleLO = true;\n\t\t\tthis.currentNumber = 10; // interim solution, when dice are created it always shows up as 2 5's\n\t\t}\n\t}\n\n\tcreateCubes()\n\t{\n\t\tconst outerCubesPerSide = (((this.numberOfOuterBoardSquares/4)+1)/2);\n\t\tconst innerCubesPerSide = (((this.numberOfInnerBoardSquares/4)+1)/2);\n\t\tlet cubeGeometry, cubeBackground, cubeTexture, cubeMesh, counter, bounds, x, y, cubeSpacing, outerStartY, outerStartX, innerStartX, innerStartY, toPush, opacity;\n\t\tfor(let i=0;i<2;i++)\n\t\t{\n\t\t\tcounter = i == 0 ? this.numberOfOuterBoardSquares : this.numberOfInnerBoardSquares;\n\t\t\tcubeSpacing = i == 0 ? this.outerBoardCubeSpacing : this.innerBoardCubeSpacing;\n\t\t\touterStartY = (outerCubesPerSide * cubeSpacing) - cubeSpacing/2;\n\t\t\touterStartX = -outerStartY;\n\t\t\tinnerStartY = (innerCubesPerSide * cubeSpacing) - cubeSpacing/2;\n\t\t\tinnerStartX = -innerStartY;\n\t\t\tlet indexArrayMap = this.buildTextureToCubeMappingArray(counter, i==0);\n\t\t\tbounds = counter/4;\n\t\t\topacity = i==0 ? 0 : this.innerBoardInactiveOpacity;\n\t\t\tx = i==0 ? outerStartX : innerStartX;\n\t\t\ty = i==0 ? outerStartY : innerStartY;\n\t\t\tfor(let s=0;s<counter;s++)\n\t\t\t{\n\t\t\t\tcubeGeometry = new THREE.BoxBufferGeometry( this.cubeSize, this.cubeSize, this.cubeSize );\n\t\t\t\tthis.addCubeFaceGroups(cubeGeometry);\n\t\t\t\tcubeBackground = new THREE.MeshStandardMaterial( { color: this.cubeColor, transparent:true, opacity:opacity } );\n\t\t\t\tcubeTexture = new THREE.MeshStandardMaterial( { transparent:true, map: this.cubeTextures[indexArrayMap[s]].texture, opacity:opacity } );\n\t\t\t\tcubeMesh = new THREE.Mesh( cubeGeometry, [cubeBackground, cubeTexture,cubeTexture,cubeTexture,cubeTexture,cubeTexture,cubeTexture] );\n\t\t\t\tcubeMesh.position.x = x;\n\t\t\t\tcubeMesh.position.y = y;\n\t\t\t\tif(i==1)\n\t\t\t\t{\n\t\t\t\t\tcubeMesh.position.z = -this.innerBoardDistance;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcubeMesh.rotation.x = rwxGeometry.toRadians(-90);\n\t\t\t\t}\n\n\t\t\t\ttoPush = i==0 ? this.outerCubes : this.innerCubes;\n\t\t\t\ttoPush.push({functionToRun:this.cubeTextures[indexArrayMap[s]].functionToRun, functionToRunValues:this.cubeTextures[indexArrayMap[s]].functionToRunValues, cube:cubeMesh});\n\n\t\t\t\tthis.fbCubesGroup.add(cubeMesh);\n\n\t\t\t\tif(s <= bounds-1)\n\t\t\t\t{\n\t\t\t\t\tx += cubeSpacing;\n\t\t\t\t}\n\t\t\t\telse if(s > bounds-1 && s <= (bounds*2)-1)\n\t\t\t\t{\n\t\t\t\t\ty -= cubeSpacing;\n\t\t\t\t}\n\t\t\t\telse if(s > (bounds*2)-1 && s <= (bounds*3)-1)\n\t\t\t\t{\n\t\t\t\t\tx -= cubeSpacing;\n\t\t\t\t}\n\t\t\t\telse if(s > (bounds*3)-1)\n\t\t\t\t{\n\t\t\t\t\ty += cubeSpacing;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\n\n\t//\n\t// *** MISCELLANEOUS\n\t//\n\t//\n\n\tendFeature()\n\t{\n\t\tthis.endFeatureFlag = true;\n    this.showDOMelements(false, this.fbDOMElements.map(de=>de.domID));\n    this.switchLights(\"fruit-machine\");\n\t}\n\n\trunCubeAction(dontDoAction)\n\t{\n\t\tconst cubes = this.getCurrentBoardCubes();\n\t\tif(!dontDoAction)\n\t\t{\n\t\t\tcubes[this.currentNumberIndex].functionToRunValues ? this[cubes[this.currentNumberIndex].functionToRun](cubes[this.currentNumberIndex].functionToRunValues) : this[cubes[this.currentNumberIndex].functionToRun]();\n\t\t}\n\t\tif(cubes[this.currentNumberIndex].functionToRun == \"mystery\" || cubes[this.currentNumberIndex].functionToRun == \"moveToBoard\")\n\t\t{\n\t\t\tthis.ableToGambleHI = false;\n\t\t\tthis.ableToGambleLO = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.ableToGambleHI = this.gambleNumber ? (this.gambleNumber<12) : (this.currentNumber<12);\n\t\t\tthis.ableToGambleLO = this.gambleNumber ? (this.gambleNumber>1) : (this.currentNumber>1);\n\t\t}\n\n\t\tthis.randomFeatureBoardCubeRotationMesh = cubes[this.currentNumberIndex].cube;\n\t\tthis.rotateFeatureBoardCubeFlag = true;\n\t\tcubes[this.currentNumberIndex].cube.rotation.x = rwxGeometry.toRadians(45);\n\t\tthis.diceRolled = false;\n\t\tthis.hilo = false;\n\t}\n\n\tdiceHasRolled()\n\t{\n\t\tconst cubes = this.getCurrentBoardCubes();\n\t\tif(this.diceGambled){\n\t\t\tif(this.diceGambleWon)\n\t\t\t{\n\t\t\t\tthis.rwxNoticeBox.setValue(\"Gamble Won\", true);\n\t\t\t\tthis.runCubeAction(this.hilo);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.gameOver();\n\t\t\t\tthis.hilo = false;\n\t\t\t\tthis.diceRolled = false;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tconst nos = this.getCurrentNumberOfSquares();\n\t\tconst newNumber = this.currentNumberIndex+this.currentNumber;\n\t\tthis.currentNumberIndex = newNumber > nos-1 ? (newNumber-nos) : newNumber;\n\t\tlet interval = setInterval(()=>{\n\t\t\tthis.prevNumberIndex+=1;\n\t\t\tif(this.prevNumberIndex > nos-1){this.prevNumberIndex=0;}\n\t\t\tthis.setPointLightToCube(this.prevNumberIndex)\n\t\t\tif(this.prevNumberIndex == this.currentNumberIndex){clearInterval(interval);this.runCubeAction();}\n\t\t}, this.moveCubeSpeed);\n\t}\n\n\tbuildTextureToCubeMappingArray(counter, outerBoard)\n\t{\n\t\tconst reservedIndexes = [];\n\t\tconst randomsIndexes = [];\n\t\tconst reserved = this.cubeTextures.filter((ct, index)=>{ct.type=='reserved' && reservedIndexes.push(index); return ct.type == 'reserved'});\n\t\tconst randoms = this.cubeTextures.filter((ct, index)=>{ct.type=='random' && randomsIndexes.push(index); return ct.type == 'random'});\n\t\tconst a = [];\n\n\t\tfor(let [index,r] of reserved.entries())\n\t\t{\n\t\t\tlet counter = outerBoard ? r.outerAmountOfSquares : r.innerAmountOfSquares;\n\t\t\tfor(let x=0;x<counter;x++)\n\t\t\t{\n\t\t\t\ta.push(reservedIndexes[index])\n\t\t\t}\n\t\t}\n\t\tconst leftover = outerBoard ? (this.numberOfOuterBoardSquares - a.length) : (this.numberOfInnerBoardSquares - a.length);\n\t\tfor(let l=0;l<leftover;l++)\n\t\t{\n\t\t\tlet random = rwxMath.randomInt(0,randoms.length-1)\n\t\t\ta.push(randomsIndexes[random]);\n\t\t}\n\t\trwxMisc.shuffleArray(a);\n\t\treturn a;\n\t}\n\n\taddFeatureBoardValues(config, numberPickerEnabled=true)\n\t{\n\t\tif(config.direction=='minus' && this[config.variable] == 0){return;}\n\t\tlet withOutNumberPicker = [...config.values].filter(v=>v!='numberPicker');\n\t\tlet arrayToUse = numberPickerEnabled ? config.values : withOutNumberPicker;\n\t\tlet randomValue = arrayToUse[rwxMath.randomInt(0,arrayToUse.length-1)];\n\t\tif(config.direction == 'minus' && (this[config.variable]-randomValue) < 0)\n\t\t{\n\t\t\trandomValue = this[config.variable];\n\t\t}\n\t\tif(randomValue<0){return;}\n\n\t\tconst functionToRun = (val)=>{\n\t\t\tlet text = val == 1 ? config.text : `${config.text}s`;\n\t\t\ttext = `${config.direction} ${val} ${text}`;\n\t\t\tlet v = config.direction == 'minus' ? -val : val;\n\t\t\tthis[config.variable] += v;\n\t\t\tthis.multiAdding ? this.rwxNoticeBox.setValue(text, true, ()=>{this.multiAdding=false;}) : this.rwxNoticeBox.setValue(text, true);\n\t\t}\n\n\t\tif(randomValue == 'numberPicker')\n\t\t{\n\t\t\tthis.rwxNoticeBox.setValue('How Much?');\n\t\t\tthis.hasNumberPicker = true;\n\t\t\tthis.numberPicker.setOptions(withOutNumberPicker).then((res)=>{\n\t\t\t\tfunctionToRun(res);\n\t\t\t\tthis.hasNumberPicker = false;\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfunctionToRun(randomValue);\n\t\t}\n\t}\n\n\n\n\n\n\t//\n\t// *** Functional\n\t// *** These methods actually do the things which happen during the game\n\t//\n\n\tstopStoppaOrTaxi()\n\t{\n\t\tclearInterval(this.stoppaOrTaxiInterval);\n\t\tthis.stoppaOrTaxiRunning=false;\n\t\tthis.runCubeAction();\n\t}\n\n\tsetStoppaOrTaxiTimout()\n\t{\n\t\tsetTimeout(()=>{\n\t\t\tif(!this.stoppaOrTaxiRunning){return;}\n\t\t\tthis.stopStoppaOrTaxi();\n\t\t}, this.stoppaOrTaxiTimeout);\n\t}\n\n\tstoppa()\n\t{\n\t\tthis.stoppaOrTaxiRunning = true;\n\t\tlet boardLength = this.getCurrentBoardCubes().length;\n\t\tthis.stoppaOrTaxiInterval = setInterval(()=>{\n\t\t\tlet random = rwxMath.randomInt(0, boardLength-1);\n\t\t\tthis.setPointLightToCube(random);\n\t\t\tthis.currentNumberIndex = random;\n\t\t}, this.moveCubeSpeed);\n\t\tthis.setStoppaOrTaxiTimout();\n\t}\n\n\ttaxi()\n\t{\n\t\tthis.stoppaOrTaxiRunning = true;\n\t\tlet boardLength = this.getCurrentBoardCubes().length;\n\t\tthis.stoppaOrTaxiInterval = setInterval(()=>{\n\t\t\tthis.currentNumberIndex+=1;\n\t\t\tif(this.currentNumberIndex > boardLength-1){this.currentNumberIndex=0;}\n\t\t\tthis.setPointLightToCube(this.currentNumberIndex)\n\t\t}, this.moveCubeSpeed);\n\t\tthis.setStoppaOrTaxiTimout();\n\t}\n\n\tmoveToBoard()\n\t{\n\t\tif(this.currentBoard == 'outer')\n\t\t{\n\t\t\tthis.rwxNoticeBox.setValue(\"Move In\", true);\n\t\t\tthis.currentBoard = 'inner';\n\t\t\tthis.moveInFlag = true;\n\t\t\tthis.stoppa();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.rwxNoticeBox.setValue(\"Move Out\", true);\n\t\t\tthis.currentBoard = 'outer';\n\t\t\tthis.moveOutFlag = true;\n\t\t\tthis.stoppa();\n\t\t}\n\t}\n\n\tmultiAdd()\n\t{\n\t\tthis.multiAdding = true;\n\t\tlet to = 0;\n\t\tfor(let ct of this.cubeTextures)\n\t\t{\n\t\t\tif(this.availableForMultiAdd.includes(ct.name))\n\t\t\t{\n\t\t\t\tlet toAdd = rwxMath.randomInt(0,1);\n\t\t\t\tif(toAdd==1){continue;}\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tct.functionToRunValues ? this[ct.functionToRun](ct.functionToRunValues, false) : this[ct.functionToRun]();\n\t\t\t\t}, to);\n\t\t\t\tto+=750;\n\t\t\t}\n\t\t}\n\t}\n\n\tfbBonus()\n\t{\n\t\tthis.hasBonus = true;\n\t\tlet arr = this.currentBoard == \"outer\" ? this.featureBoardBonuses : this.featureBoardBonuses.filter(fb=>fb.displayName!=\"Move In\");\n\t\tthis.setTombola(arr, 'hasBonus');\n\t}\n\n\taddHeart()\n\t{\n\t\tif(this.hasExtraLife()){return;}\n\t\telse\n\t\t{\n\t\t\tthis.heartsArray[this.numberOfHearts].up();\n\t\t\tthis.numberOfHearts += 1;\n\t\t\tthis.hasExtraLife() ? this.rwxSlideTicker.setValue(\"Extra Life\") : this.rwxNoticeBox.setValue(\"Add Heart\", true);\n\t\t}\n\t}\n\n\taddIcon()\n\t{\n\t\tif(this.hasGame()){return;}\n\t\tthis.iconsArray[this.numberOfIcons].up();\n\t\tthis.numberOfIcons += 1;\n\t\tthis.rwxNoticeBox.setValue(\"Add Icon\", true);\n\t\tif(this.hasGame())\n\t\t{\n\t\t\tthis.rwxSlideTicker.setValue(\"Coming Soon\");\n\t\t\t// Launch to Game\n\t\t\t// highjack click events so they dont run board\n\t\t\t// reset evyerhting after game ran\n\t\t\treturn;\t\t\t\n\t\t}\n\t}\n\n\tmystery()\n\t{\n\t\tthis.hasMystery = true;\n\t\tthis.setTombola(this.featureBoardMystery, 'hasMystery');\n\t}\n\n\tgameOver()\n\t{\n\t\tif(this.hasExtraLife())\n\t\t{\n\t\t\tthis.numberOfHearts = 0;\n\t\t\tthis.heartsArray.map(h=>h.down());\n\t\t\tthis.rwxSlideTicker.setValue(\"Extra Life\");\n\t\t\treturn;\n\t\t}\n\t\tif(this.featureBoardDevelop){return;}\n\t\tthis.rwxSlideTicker.setValue(\"Game Over\");\n\t\tthis.endFeature();\n\t}\n\n\tcancelCollect()\n\t{\n\t\tclearInterval(this.collectionInterval);\n\t\tthis.rwxNoticeBox.close();\n\t\tthis.collectionFlashing = false;\n\t\tthis.collectables.map((c)=>{\n\t\t\tdocument.getElementById(c.domID).classList.remove('collection-background');\n\t\t});\n\t}\n\n\tcollect()\n\t{\n\t\tif(this.collectionFlashing){\n\t\t\tclearInterval(this.collectionInterval);\n\t\t\tlet collected;\n\t\t\tthis.collectables.map((c)=>{\n\t\t\t\tif(document.getElementById(c.domID).classList.contains('collection-background')){collected=c;}\n\t\t\t});\n\t\t\tthis.collected(collected);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet availableForCollection = [];\n\t\t\tthis.collectables.map((c)=>{\n\t\t\t\tthis[c.variable] > 0 && availableForCollection.push(c);\n\t\t\t})\n\t\t\tif(availableForCollection.length == 0){console.log(\"Nothing available to collect\");return;}\n\t\t\tthis.rwxNoticeBox.setValue('Press enter again to collect highlighted item');\n\t\t\tlet collectionCounter = 0;\n\t\t\tthis.collectionFlashing = true;\n\t\t\tlet csf = this.getCurrentSquare().functionToRun;\n\t\t\tif(csf == \"mystery\" || csf == \"gameOver\"){return;}\n\t\t\tthis.collectionInterval = setInterval(()=>{\n\t\t\t\tif(collectionCounter==availableForCollection.length)collectionCounter=0;\n\t\t\t\tfor(let [index,c] of availableForCollection.entries())\n\t\t\t\t{\n\t\t\t\t\t(collectionCounter==index && this[c.variable]!==0) ? document.getElementById(c.domID).classList.add('collection-background') : document.getElementById(c.domID).classList.remove('collection-background')\n\t\t\t\t}\n\t\t\t\tcollectionCounter+=1;\n\t\t\t}, 1000)\n\t\t}\n\t}\n\n\tcollected(what)\n\t{\n\t\tthis.cancelCollect();\n\t\tthis.hasCollected = what;\n\t\tthis.rwxSlideTicker.setValue(`Collected ${what.text}`);\n\t\tthis.endFeature();\n\t}\n\n\tcontinue()\n\t{\n\t\treturn;\n\t}\n\n\trollEvenOddStop()\n\t{\n\t\tthis.rollEvenOddFlag = false;\n\t\tlet total = 0;\n\t\tfor(let [i,d] of this.dice.entries())\n\t\t{\n\t\t\tlet diff = Math.round(d.rotation.x/rwxGeometry.toRadians(90));\n\t\t\tlet remainder = diff-(Math.floor(diff/4)*4);\n\t\t\tlet radians = rwxGeometry.toRadians(remainder*90);\n\t\t\td.rotation.x = radians;\n\t\t\tlet toCompare = new THREE.Vector3(radians, 0, 0);\n\t\t\tlet number = Object.keys(d.rotations).filter((ok)=>{return (d.rotations[ok].x == toCompare.x && d.rotations[ok].y == toCompare.y)});\n\t\t\ttotal += parseInt(number[0]);\n\t\t}\n\t\tif((this.rollingEven && (total%2 == 0)) || (this.rollingOdd && !(total%2 == 0)))\n\t\t{\n\t\t\tthis.rwxNoticeBox.setValue(\"Good Job!\", true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.gameOver();\n\t\t}\n\t\tthis.currentNumber = total;\n\t\tthis.rollingEven = false;\n\t\tthis.rollingOdd = false;\n\t\tthis.rollEvenOddResetStep1 = false;\n\t\tthis.rollEvenOddResetStep1Ease = false;\n\t}\n\n\trollEven()\n\t{\n\t\tthis.rwxNoticeBox.setValue(\"Roll Even..\");\n\t\tthis.cachedRotations = this.getCurrentDiceRotations();\n\t\tthis.rollingEven = true;\n\t\tthis.rollEvenOddFlag = true;\n\t}\n\n\trollOdd()\n\t{\n\t\tthis.rwxNoticeBox.setValue(\"Roll Odd..\");\n\t\tthis.cachedRotations = this.getCurrentDiceRotations();\n\t\tthis.rollingOdd = true;\n\t\tthis.rollEvenOddFlag = true;\n\t}\n\n\thiloContinue()\n\t{\n\t\tthis.rwxNoticeBox.setValue(\"HI / LO Continue..\");\n\t\tthis.ableToGambleHI = (this.currentNumber<12);\n\t\tthis.ableToGambleLO = (this.currentNumber>1);\n\t\tthis.hilo = true;\n\t}\n\n\tloseWithCashpot()\n\t{\n\t\tthis.collected({variable: 'coinCount', text: 'Coins', fmLinkVariable:'amountOfCoins'});\n\t}\n\n\n\n\n\n\t//\n\t// *** EVENTS\n\t// These methods are triggered by a user interaction on the page (distributed by the core)\n\t//\n\n\trollDiceEvent(type)\n\t{\n\t\tif(this.collectionFlashing){this.cancelCollect();}\n\t\tif(this.diceRolled || this.stoppaRunning || this.multiAdding || this.hasNumberPicker || this.hasNumberPicker || this.hasMystery || this.hasBonus || this.hasMystery || this.stoppaOrTaxiRunning || this.endFeatureFlag || this.featureBoardInitAnimationFlag || this.rollEvenOddFlag){return;}\n\t\tthis.diceRolled=true;\n\t\tthis.prevRotations = this.getCurrentDiceRotations();\n\t\tthis.rotationData = this.generateRandomRotations();\n\n\t\tlet currentNumber = this.gambleNumber ? this.gambleNumber : this.currentNumber;\n\t\tif(type==\"GAMBLEHI\")\n\t\t{\n\t\t\tthis.rwxNoticeBox.setValue(\"Going Higher\", true);\n\t\t\tthis.diceGambled = true;\n\t\t\tif(currentNumber == 1)\n\t\t\t{\n\t\t\t\tthis.gambleNumber = rwxMath.randomInt(2,12);\n\t\t\t\tthis.diceGambleWon = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.diceGambleWon = (rwxMath.randomInt(0, this.diceGambleWinProbability) == 0)\n\t\t\t\tthis.gambleNumber = this.diceGambleWon ? rwxMath.randomInt(currentNumber+1, 12) : rwxMath.randomInt(1,currentNumber-1);\n\t\t\t}\n\t\t}\n\t\telse if(type==\"GAMBLELO\")\n\t\t{\n\t\t\tthis.rwxNoticeBox.setValue(\"Going Lower\", true);\n\t\t\tthis.diceGambled = true;\n\t\t\tif(currentNumber == 12)\n\t\t\t{\n\t\t\t\tthis.gambleNumber = rwxMath.randomInt(1,11);\n\t\t\t\tthis.diceGambleWon = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.diceGambleWon = (rwxMath.randomInt(0, this.diceGambleWinProbability) == 0)\n\t\t\t\tthis.gambleNumber = this.diceGambleWon ? rwxMath.randomInt(1,currentNumber-1) : rwxMath.randomInt(currentNumber+1, 12);\n\t\t\t}\n\t\t}\n\t\telse if(type==\"ROLL\")\n\t\t{\n\t\t\tthis.diceGambled = false;\n\t\t\tthis.prevNumberIndex = this.currentNumberIndex;\n\t\t\tthis.gambleNumber = false;\n\t\t\tthis.currentNumber = rwxMath.randomInt(1, 12);\n\t\t}\n\t\tcurrentNumber = this.gambleNumber ? this.gambleNumber : this.currentNumber;\n\t\tthis.diceLayout = this.getDiceLayout(currentNumber);\n\t\tthis.rollDiceFlag = true;\n\t}\n\n\n\n\n\n\t//\n\t// *** HELPERS / GETTERS\n\t// *** These are helper functions specific to this class for doing quick, repeatable things or retrieving quick pieces of information from elsewhere within the app\n\t//\n\n\taddCubeFaceGroups(geometry) // splits geometry into groups allowing for first material index to be background color and other 6 material indexes to be seperate textures\n\t{\n\t\tgeometry.clearGroups();\n\t\tgeometry.addGroup(0, Infinity, 0);\n\t\tfor(let cs=0;cs<6;cs++)\n\t\t{\n\t\t\tgeometry.addGroup(cs*6, 6, cs+1);\n\t\t}\n\t}\n\n\tsetPointLightToCube(index)\n\t{\n\t\tlet cubes = this.getCurrentBoardCubes();\n\t\tcubes[index].cube.getWorldPosition(this.cubeLightPosition);\n\t\tthis.cubeLight.position.set(this.cubeLightPosition.x-5,this.cubeLightPosition.y,this.cubeLightPosition.z);\n\t}\n\n\thasGame()\n\t{\n\t\treturn this.numberOfIcons == this.maxNumberOfIcons;\n\t}\n\n\thasExtraLife()\n\t{\n\t\treturn this.numberOfHearts == this.maxNumberOfIcons;\n\t}\n\n\tgetCurrentDiceRotations()\n\t{\n\t\treturn this.dice.map((d)=>{return new THREE.Vector3(d.rotation.x, d.rotation.y, d.rotation.z)});\n\t}\n\n\tgetCurrentNumberOfSquares()\n\t{\n\t\treturn this.currentBoard == \"outer\" ? this.numberOfOuterBoardSquares : this.numberOfInnerBoardSquares;\n\t}\n\n\tgetCurrentBoardCubes()\n\t{\n\t\treturn this.currentBoard == \"outer\" ? this.outerCubes : this.innerCubes;\n\t}\n\n\tgetDiceLayout(num)\n\t{\n\t\treturn this.diceLayouts[num][rwxMath.randomInt(0,this.diceLayouts[num].length-1)];\n\t}\n\n\tgetCurrentSquare()\n\t{\n\t\treturn this.getCurrentBoardCubes()[this.currentNumberIndex];\n\t}\n\n\tgenerateRandomRotations()\n\t{\n\t\tlet spinX=0, spinY=0, spinZ=0;\n\t\treturn this.dice.map((d)=> {\n\t\t\tlet x = rwxMath.randomInt(0,1);\n\t\t\tlet y = rwxMath.randomInt(0,1);\n\t\t\tlet z = (!x && !y) ? 1 : rwxMath.randomInt(0,1);\n\t\t\tif(x){spinX = rwxMath.randomInt(0,1) == 0 ? this.diceSpinLength : -this.diceSpinLength}\n\t\t\tif(y){spinY = rwxMath.randomInt(0,1) == 0 ? this.diceSpinLength : -this.diceSpinLength}\n\t\t\tif(z){spinZ = rwxMath.randomInt(0,1) == 0 ? this.diceSpinLength : -this.diceSpinLength}\n\t\t\treturn {x,y,z,spinX,spinY,spinZ}\n\t\t})\n\t}\n\n\n\n\n\n\t//\n\t// *** ANIMATIONS\n\t// *** These are all called from the animation loop when a certain variable is set\n\t//\n\n\trollEvenOdd()\n\t{\n\t\tif(!this.rollEvenOddResetStep1)\n\t\t{\n\t\t\tlet val = rwxAnimate.getEasingValue('easingValueRollEvenOdd', 'linear', 500, () => { this.rollEvenOddResetStep1 = true; });\n\t\t\tfor(let [index, d] of this.dice.entries())\n\t\t\t{\n\t\t\t\td.rotation.set(rwxAnimate.fromToCalc(this.cachedRotations[index].x, 0, val), rwxAnimate.fromToCalc(this.cachedRotations[index].y, 0, val), rwxAnimate.fromToCalc(this.cachedRotations[index].z, 0, val));\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor(let [index,d] of this.dice.entries())\n\t\t\t{\n\t\t\t\td.rotation.x += index==0 ? this.rollEvenOddDegrees : -this.rollEvenOddDegrees;\n\t\t\t}\n\t\t}\t\n\t}\n\n\trotateFeatureBoardCube()\n\t{\n\t\tif(!this.rotateFeatureBoardCubeStep1)\n\t\t{\n\t\t\tthis.randomFeatureBoardCubeRotationMesh.rotation.x = rwxAnimate.fromTo(0, rwxGeometry.toRadians(90), 'fromToRotateFeatureBoardCube', 'easeInOutQuart', 500, () => { this.rotateFeatureBoardCubeStep1 = true; });\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.rotateFeatureBoardCubeStep1 = false;\n\t\t\tthis.rotateFeatureBoardCubeStep1Ease = false;\n\t\t\tthis.rotateFeatureBoardCubeFlag = false;\n\t\t}\n\t}\n\n\tmoveIn()\n\t{\n\t\tif(!this.moveInStep1)\n\t\t{\n\t\t\tlet val = rwxAnimate.getEasingValue('easingValueMoveIn', 'easeInOutCubic', 1000, () => { this.moveInStep1 = true; });\n\t\t\tthis.camera.position.x = rwxAnimate.fromToCalc(this.featureCameraPositionDefault.x, (this.featureCameraPositionDefault.x + this.innerBoardDistance), val);\n\t\t\tthis.fbPersistentZGroup.position.z = rwxAnimate.fromToCalc(0, -this.innerBoardDistance, val);\n\t\t\tthis.innerCubes.map((ic)=>{ic.cube.material.map(m=>m.opacity = rwxAnimate.fromToCalc(this.innerBoardInactiveOpacity, 1, val))});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.moveInStep1 = false;\n\t\t\tthis.moveInStep1Ease = false\n\t\t\tthis.moveInFlag = false;\n\t\t}\n\t}\n\n\tmoveOut()\n\t{\n\t\tif(!this.moveOutStep1)\n\t\t{\n\t\t\tlet val = rwxAnimate.getEasingValue('easingValueMoveOut', 'easeInOutCubic', 1000, () => { this.moveOutStep1 = true; });\n\t\t\tthis.camera.position.x = rwxAnimate.fromToCalc((this.featureCameraPositionDefault.x + this.innerBoardDistance), this.featureCameraPositionDefault.x, val);\n\t\t\tthis.fbPersistentZGroup.position.z = rwxAnimate.fromToCalc(-this.innerBoardDistance, 0, val);\n\t\t\tthis.innerCubes.map((ic)=>{ic.cube.material.map(m=>m.opacity = rwxAnimate.fromToCalc(1, this.innerBoardInactiveOpacity, val))});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.moveOutStep1 = false;\n\t\t\tthis.moveOutStep1Ease = false;\n\t\t\tthis.moveOutFlag = false;\n\t\t}\n\t}\n\n\trollDice()\n\t{\n\t\tif(!this.rollDiceStep1)\n\t\t{\n\t\t\tlet val = rwxAnimate.getEasingValue('easingValueRollDice', 'easeOutQuad', this.diceSpinDuration, () => { this.rollDiceStep1 = true; });\n\t\t\tfor(let [index,d] of this.dice.entries())\n\t\t\t{\n\t\t\t\td.rotation.set(rwxAnimate.fromToCalc((this.prevRotations[index].x - this.rotationData[index].spinX), (this.rotationData[index].spinX + d.rotations[this.diceLayout[index]].x), val), rwxAnimate.fromToCalc((this.prevRotations[index].y - this.rotationData[index].spinY), (this.rotationData[index].spinY + d.rotations[this.diceLayout[index]].y), val), rwxAnimate.fromToCalc((this.prevRotations[index].z - this.rotationData[index].spinZ), (this.rotationData[index].spinZ + d.rotations[this.diceLayout[index]].z), val));\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.diceHasRolled();\n\t\t\tthis.rollDiceStep1 = false;\n\t\t\tthis.rollDiceStep1Ease = false;\n\t\t\tthis.rollDiceFlag = false;\n\t\t}\n\t}\n\n\tfeatureBoardInitAnimation()\n\t{\n\t\tfor(let [i,cube] of this.outerCubes.entries())\n\t\t{\n\t\t\tif(this.timeoutPerCubeCounter <= (this.initialAnimationConfigurables.timeoutPerCube*i)){continue;}\n\t\t\telse\n\t\t\t{\n        if(!this[`featureBoardInitialAnimationStep1-${i}`])\n        {\n        \tlet val = rwxAnimate.getEasingValue(`easingValueFeatureBoardInitAnimation-${i}`, 'easeOutQuart', 500, () => { this[`featureBoardInitialAnimationStep1-${i}`] = true; });\n\t\t\t\t\tcube.cube.rotation.x = rwxAnimate.fromToCalc(rwxGeometry.toRadians(-90), rwxGeometry.toRadians(0), val);\n\t\t\t\t\tcube.cube.material.map(c=> c.opacity= rwxAnimate.fromToCalc(0, 1, val));\n        }\n        else\n        {\n          if(i == (this.outerCubes.length-1)){\n          \tif(!this.featureBoardDevelop)\n          \t{\n\t\t\t\t\t\t\tthis.showDOMelements(true, this.fbDOMElements.map(de=>de.domID));\n\t\t\t\t\t\t\tthis.stoppa();\n          \t}\n          \tfor(let i=0;i<this.outerCubes.length;i++)\n\t\t\t\t    {\n\t\t\t\t    \tthis[`featureBoardInitialAnimationStep1-${i}`] = false;\n\t\t\t\t    \tthis[`featureBoardInitialAnimationStep1-${i}Ease`] = false;\n\t\t\t\t    }\n\t\t\t\t\t\tthis.featureBoardInitAnimationFlag = false;\n          }            \n        }\n\t\t\t}\n\t\t}\t\n\t\tthis.timeoutPerCubeCounter +=1;\n\t}\n}","require('./oneUp.scss');\nclass OneUp {\n\tconstructor(imgSrc, id, container=false)\n\t{\n\t\tthis.src = imgSrc;\n\t\tthis.id = id;\n\t\tthis.container = container ? document.querySelector(container) : document.body;\n\t\tthis.htmlDefinition();\n\t}\n\n\thtmlDefinition()\n\t{\n\t\tlet container, scale, rotate, color;\n  \tcontainer = document.createElement('div');\n  \tcontainer.classList.add('one-up');\n  \tcontainer.id = this.id;\n  \tscale = document.createElement('div');\n  \tscale.classList.add('one-up-scale');\n  \trotate = document.createElement('div');\n  \trotate.classList.add('one-up-rotate');\n  \tcolor = document.createElement('img');\n  \tcolor.classList.add('one-up-color');\n  \tcolor.src = this.src;\n  \tcolor.classList.add('one-up-image');\n  \trotate.appendChild(color);\n  \tscale.appendChild(rotate);\n  \tcontainer.appendChild(scale);\n  \tthis.scale = scale;\n  \tthis.rotate = rotate;\n  \tthis.color = color;\n  \tthis.oneUp = container;\n  \tthis.container.appendChild(container);\n\t}\n\n\tgetNode()\n\t{\n\t\treturn this.oneUp;\n\t}\n\n\tup()\n\t{\n\t\tthis.scale.classList.add('go');\n\t\tthis.color.classList.add('go');\n\t\tthis.rotate.classList.add('go');\n\t}\n\n\tdown()\n\t{\n\t\tthis.scale.classList.add('ungo');\n\t\tthis.color.classList.add('ungo');\n\t\tthis.rotate.classList.add('ungo');\n\t}\n\n\tclear()\n\t{\n\t\tthis.scale.classList.remove('go');\n\t\tthis.color.classList.remove('go');\n\t\tthis.rotate.classList.remove('go');\n\t\tthis.scale.classList.remove('ungo');\n\t\tthis.color.classList.remove('ungo');\n\t\tthis.rotate.classList.remove('ungo');\n\t}\n}\n\nexport default OneUp;","module.exports = __webpack_public_path__ + \"fruitMachineAssets/zero.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/bonus.png\";","class MeasureMeter {\n\tconstructor(selector, numberOfIntervals, initialValue=0)\n\t{\n\t\tthis.measureMeter = document.querySelector(selector);\n\t\tif(!this.measureMeter){return;}\n\t\tthis.numberOfIntervals = numberOfIntervals;\n\t\tthis.prevValue = initialValue;\n\t\tthis.timeout = 100;\n\t\tthis.createIntervals();\n\t\tfor(let [index,i] of this.intervals.entries())\n\t\t{\n\t\t\tif(index==initialValue){break;}\n\t\t\ti.classList.add('measure-meter-interval-fill');\n\t\t}\n\t}\n\n\tcreateIntervals()\n\t{\n\t\tlet el;\n\t\tthis.intervals = [];\n\t\tfor(let i=0;i<this.numberOfIntervals;i++)\n\t\t{\n\t\t\tel = document.createElement('span');\n\t\t\tel.classList.add('measure-meter-interval');\n\t\t\tthis.measureMeter.appendChild(el);\n\t\t\tthis.intervals.push(el);\n\t\t}\n\t}\n\n\tto(amount)\n\t{\n\t\tif(this.prevValue == amount){return;}\n\t\tlet amt;\n\t\tamt = amount < 0 ? 0 : amount;\n\t\tamt = amount > this.numberOfIntervals ? this.numberOfIntervals : amount;\n\t\tlet interval = setInterval(()=>{\n\t\t\tif(this.prevValue==amt || amt<0)\n\t\t\t{\n\t\t\t\tclearInterval(interval);\n\t\t\t}\n\t\t\telse if(this.prevValue > amt)\n\t\t\t{\n\t\t\t\tthis.intervals[this.prevValue-1].classList.remove('measure-meter-interval-fill');\n\t\t\t\tthis.prevValue-=1;\n\t\t\t}\n\t\t\telse if(this.prevValue < amt)\n\t\t\t{\n\t\t\t\tthis.intervals[this.prevValue].classList.add('measure-meter-interval-fill');\n\t\t\t\tthis.prevValue+=1;\n\t\t\t}\n\t\t}, this.timeout);\n\t}\n}\n\nexport default MeasureMeter;","import helpers from '../helpers';\nimport rwxFade from 'roseworx/js/effects/rwxFade';\nimport rwxMath from 'roseworx/js/helpers/rwxMathHelpers';\n\nclass NumberPicker\n{\n  constructor(selector)\n  {\n    this.numberPicker = document.querySelector(selector);\n    if(!this.numberPicker){return;}\n    this.timePerOption = 100;\n    this.zStarter = 9000;\n    this.stop = this.stop.bind(this);\n    this.numberPicker.addEventListener('click', this.stop)\n  }\n\n  setOptions(arr)\n  {\n    if(arr.length == 1)\n    {\n      return new Promise((resolve, reject)=>{\n        resolve(arr[0]);\n      });      \n    }\n  \tthis.numberPicker.innerHTML = \"\";\n    let option;\n    this.options = [];\n    for(let [index,val] of arr.entries())\n    {\n      option = document.createElement('div');\n      option.classList.add('number-picker-option');\n      option.setAttribute('data-value', val);\n      option.appendChild(document.createTextNode(val));\n      option.style.zIndex = index==arr.length-1 ? this.zStarter+1 : this.zStarter;\n      this.numberPicker.appendChild(option);\n      this.options.push(option);\n      if(index==arr.length-1)\n      {\n        this.currentOptionIndex = index\n      }\n    }\n    this.start();\n    return new Promise((resolve, reject)=>{\n      this.callback = resolve;\n    });\n  }\n\n  stop()\n  {\n    clearInterval(this.interval);\n    this.options[this.currentOptionIndex].classList.add('result');\n    setTimeout(()=>{\n    \tthis.callback(parseInt(this.options[this.currentOptionIndex].getAttribute('data-value')));\n    \trwxFade.fadeOut(this.numberPicker);\n    }, 500);\n  }\n\n  start()\n  {\n  \trwxFade.fadeIn(this.numberPicker);\n  \tlet randomOption;\n    this.interval = setInterval(()=>{\n\t\t\twhile (true) {\n\t\t\t\trandomOption = rwxMath.randomInt(0,this.options.length-1);\n\t\t\t\tif (randomOption != this.currentOptionIndex){            \n\t\t\t\t\tbreak;\n\t\t\t\t} \n\t\t\t}\n      this.options[randomOption].style.zIndex = this.zStarter+1;\n      this.options[this.currentOptionIndex].style.zIndex = this.zStarter;\n      this.currentOptionIndex = randomOption;\n    },this.timePerOption);\n  }\n}\n\nexport default NumberPicker;","const helpers = {\n\n  showDOMelements(show, identifiers)\n  {\n    for(let dm of identifiers)\n    {\n      let el = document.getElementById(dm)\n      show && el.classList.remove('dom-element-hide');\n      !show && el.classList.add('dom-element-hide');\n    }\n  }\n}\n\nexport default helpers;","module.exports = __webpack_public_path__ + \"fruitMachineAssets/heart.png\";","module.exports = __webpack_public_path__ + \"fruitMachineAssets/icon.png\";"],"sourceRoot":""}