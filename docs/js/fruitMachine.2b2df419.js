!function(e){function t(t){for(var n,o,s=t[0],u=t[1],l=t[2],c=0,d=[];c<s.length;c++)o=s[c],r[o]&&d.push(r[o][0]),r[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(h&&h(t);d.length;)d.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,s=1;s<i.length;s++){var u=i[s];0!==r[u]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=i[0]))}return e}var n={},r={4:0},a=[];function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=n,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var h=u;a.push([334,0,13]),i()}({10:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={toRadians:function(e){return e*Math.PI/180},randomInt:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},safeCloneArrayOfObjects:function(e){var t=this,i=[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(e));return i.map((function(e,n){i[n]=t.safeCloneObject(i[n])})),i},safeCloneObject:function(e){return Object.assign({},e)},shuffleArray:function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),n=[e[i],e[t]];e[t]=n[0],e[i]=n[1]}return e},zOpaqueIn:function(e){e.classList.contains("zOpaqueOut")&&e.classList.remove("zOpaqueOut"),e.classList.add("zOpaqueIn")},zOpaqueOut:function(e){e.classList.add("zOpaqueOut")},noConcurrentEntryArray:function(e){},showDOMelements:function(e,t){var i=!0,n=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value,u=document.getElementById(s);e&&u.classList.remove("dom-element-hide"),!e&&u.classList.add("dom-element-hide")}}catch(e){n=!0,r=e}finally{try{!i&&o.return&&o.return()}finally{if(n)throw r}}},removePreload:function(){document.body.classList.contains("preload")&&document.body.classList.remove("preload")},getEasingFunctions:function(){return{linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}}}};t.default=n},100:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(10),s=(n=o)&&n.__esModule?n:{default:n};i(101);var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numberPicker=document.querySelector(t),this.numberPicker&&(this.timePerOption=100,this.zStarter=9e3,this.stop=this.stop.bind(this),this.numberPicker.addEventListener("click",this.stop))}return a(e,[{key:"setOptions",value:function(e){var t=this;if(1==e.length)return new Promise((function(t,i){t(e[0])}));s.default.removePreload(),this.numberPicker.innerHTML="";var i=void 0;this.options=[];var n=!0,a=!1,o=void 0;try{for(var u,l=e.entries()[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var h=r(u.value,2),c=h[0],d=h[1];(i=document.createElement("div")).classList.add("number-picker-option"),i.setAttribute("data-value",d),i.appendChild(document.createTextNode(d)),i.style.zIndex=c==e.length-1?this.zStarter+1:this.zStarter,this.numberPicker.appendChild(i),this.options.push(i),c==e.length-1&&(this.currentOptionIndex=c)}}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return this.start(),new Promise((function(e,i){t.callback=e}))}},{key:"stop",value:function(){var e=this;clearInterval(this.interval),this.options[this.currentOptionIndex].classList.add("result"),setTimeout((function(){e.callback(parseInt(e.options[e.currentOptionIndex].getAttribute("data-value"))),s.default.zOpaqueOut(e.numberPicker)}),500)}},{key:"start",value:function(){var e=this;s.default.zOpaqueIn(this.numberPicker);var t=void 0;this.interval=setInterval((function(){for(;(t=s.default.randomInt(0,e.options.length-1))==e.currentOptionIndex;);e.options[t].style.zIndex=e.zStarter+1,e.options[e.currentOptionIndex].style.zIndex=e.zStarter,e.currentOptionIndex=t}),this.timePerOption)}}]),e}();t.default=u},101:function(e,t,i){},102:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(10),o=(n=a)&&n.__esModule?n:{default:n};i(103);var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.infoContainer=document.querySelector(t),this.infoContainer&&(this.infoContainerDelay=2e3)}return r(e,[{key:"set",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o.default.removePreload(),clearTimeout(this.infoContainerTimeout),""!=e&&(this.infoContainer.innerText=e,this.infoContainer.classList.add("show")),i||""!=e||(i=!0),i&&(this.infoContainerTimeout=setTimeout((function(){t.infoContainer.classList.remove("show"),n&&n()}),this.infoContainerDelay))}},{key:"close",value:function(){this.infoContainer.classList.remove("show")}}]),e}();t.default=s},103:function(e,t,i){},104:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();i(105);var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.duoPicker=document.querySelector(t),this.duoPicker}return n(e,[{key:"answer",value:function(e){var t=this;this.callback(e),[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(this.duoPicker.querySelectorAll(".duo-picker-item"))).map((function(e){return e.classList.add("remove")})),setTimeout((function(){t.duoPicker.innerHTML=""}),1e3)}},{key:"ask",value:function(e){var t=this,i=void 0,n=void 0,r=!0,a=!1,o=void 0;try{for(var s,u=function(){var e=s.value;(i=document.createElement("div")).classList.add("duo-picker-item"),(n=document.createElement("div")).classList.add("duo-picker-item-button"),n.innerHTML=t.createButtonDefinition(e.displayName),n.addEventListener("click",(function(){t.answer(e.value)})),i.appendChild(n),t.duoPicker.appendChild(i)},l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)u()}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return new Promise((function(e,i){t.callback=e}))}},{key:"createButtonDefinition",value:function(e){return'\n\t\t\t<svg height="100" width="400" xmlns="http://www.w3.org/2000/svg">\n\t\t\t<rect class="shape" height="100" width="400" />\n\t\t\t<div class="text">\n\t\t\t\t<div><span class="spot"></span>'+e+"</div>\n\t\t\t</div>\n\t\t"}}]),e}();t.default=r},105:function(e,t,i){},140:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/heart.png"},141:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/icon.png"},334:function(e,t,i){"use strict";new(i(335).FruitMachineCore)("#fruit-machine-container")},335:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FruitMachineCore=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=S(i(10)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(39)),s=i(336),u=i(139),l=i(337),h=i(338),c=i(379),d=S(i(92)),f=S(i(94)),m=S(i(96)),p=S(i(98)),v=S(i(100)),b=S(i(102)),y=S(i(104)),g=S(i(383));function S(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}i(386);var R=a.default.getEasingFunctions();t.FruitMachineCore=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.container=document.querySelector(e),i.container?(window.addEventListener("load",(function(){i.init()})),window.addEventListener("unload",(function(){i.unInit()})),window.addEventListener("resize",(function(){i.onResize()})),i):C(i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"unInit",value:function(){localStorage.setItem("storedCoins",this.amountOfCoins)}},{key:"init",value:function(){var e=this;document.body.classList.contains("preload")&&document.body.classList.remove("preload"),Object.assign(this,l.Configuration),Object.assign(this,h.FruitMachineData),Object.assign(this,h.FeatureBoardData),this.createVariables(),this.createDynamicVariables(),this.addPlugins(),this.createScene(),this.createCamera(),this.createLights(),this.createFruitMachine(),this.createFeatureBoard(),this.helperTips(),this.createRenderer(),this.featureBoardDevelop&&this.developingFeatureBoard(),this.fruitMachineDevelop&&this.developingFruitMachine(),this.fruitMachineInitAnimationFlag=!this.fruitMachineDevelop&&!this.featureBoardDevelop,this.eventDispatcher(),this.renderer.setAnimationLoop((function(){e.update()})),document.querySelector(".loading-mask").remove()}},{key:"onResize",value:function(){this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight)}},{key:"helperTips",value:function(){if(this.enableHelperTips){new g.default("[helper-tip]",{content:function(e){var t=e.getAttribute("data-helper-tip-content-id");return document.getElementById(t)},interactive:!0,placement:"auto",trigger:"click"});var e=[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(document.querySelectorAll(".helper-tip"))).map((function(e){return e.id}));document.getElementById("helper-tip-toggler").addEventListener("click",(function(t){t.target.classList.toggle("active"),a.default.showDOMelements(t.target.classList.contains("active"),e)}))}}},{key:"checkAndApplyHelperTip",value:function(e,t){if(this.enableHelperTips){var i=document.getElementById(t);i&&(i=new u.CSS2DObject(i),e.add(i))}}},{key:"assignVariables",value:function(e){var t=this;e.falses&&e.falses.map((function(e){t[e]=!1})),e.zeros&&e.zeros.map((function(e){t[e]=0})),e.arrays&&e.arrays.map((function(e){t[e]=[]})),e.threeGroups&&e.threeGroups.map((function(e){t[e]=new o.Group}))}},{key:"createVariables",value:function(){this.assignVariables({falses:["hasCollected","reelStrikeStopFlag","reelStrikeFlag","featureBoardInitAnimationFlag","fruitMachineInitAnimationFlag","numberReelSpinFlag","hasFeatureFlag","stoppaReelFlag","hasWonFlag","spinReelsFlag","nudgeReelFlag","flashButtonsFlag","rollDiceFlag","rotateFeatureBoardCubeFlag","moveInFlag","moveOutFlag","hasHolds2","hasBonus","numberTrailHeld"],zeros:["spinTimeoutCounter","timeoutPerCubeCounter","numberOfIcons","numberOfHearts","amountOfReelStrikes1","amountOfNudges1","timeoutCounter","winValue","reelStrikeCount1","nudgeCount1","coinCount1","streakStrengthCount1","currentNumberIndex"],arrays:["iconsArray","heartsArray","currentFruits","currentSpinValues","nextSpinValues","reels","reelFruits","reelControlButtons","numberReelFaces","outerCubes","innerCubes","dice"],threeGroups:["fbGeometryGroup","fbPersistentZGroup","fbCubesGroup"]}),this.amountOfCoins1=localStorage.getItem("storedCoins")?parseInt(localStorage.getItem("storedCoins")):this.startingCoins,this.flashOpacityCounter=1,this.fruitMachineInitAnimationData={reelFaces:[],reelEdges:[],buttons:[],numberReel:[]},this.nudgeReelCounter=new Array(this.numberOfReels).fill(0),this.reelHeldCounter=new Array(this.numberOfReels).fill(0),this.enableNumbers||(this.bonuses=this.bonuses.filter((function(e){return"bonusNumbersInView"!=e.functionToRun}))),this.reelYPos=8.5,this.numberOfNumbers=this.numbers.length,this.numberOfFruits=this.fruits.length>5?this.fruits.length:5,this.enableBonus&&(this.numberOfFruits+=1),this.oneRotation=360/this.numberOfFruits,this.spinLength=a.default.toRadians(360*this.numberOfFullRotations),this.spinMoveBackDegrees=a.default.toRadians(this.degreesToMoveBackBeforeSpinning),this.spinDuration=.92*this.spinReelsDuration,this.spinMoveBackDuration=.08*this.spinReelsDuration,this.zoomThroughReelsZ=this.reelSize*(this.zoomThroughReelsZPercentage/100),this.zoomThroughReelsFinishX=this.numberOfReels*this.reelWidth+(this.numberOfReels-1*this.reelSpacing)+this.zoomThroughReelsXGap,this.zoomThroughReelsStartX=-this.zoomThroughReelsFinishX,this.zoomThroughReelsStep1Duration=.25*this.winAnimationDuration,this.zoomThroughReelsStep2Duration=.5*this.winAnimationDuration,this.zoomThroughReelsStep3Duration=.25*this.winAnimationDuration,this.winSpinLength=a.default.toRadians(720),this.reelStrikeDataInitial={verticalCounter:0,horizontalCounter:0,timeoutCounter:0,direction:"fwd"},this.reelStrikeData={},Object.assign(this.reelStrikeData,this.reelStrikeDataInitial),this.rollEvenOddDegrees=a.default.toRadians(this.rollEvenOddSpeed),this.fbCameraDistance=40,this.outerBoardCubeSpacing=this.cubeSize+2.5,this.innerBoardCubeSpacing=this.cubeSize+4,this.innerBoardDistance=50,this.innerBoardInactiveOpacity=.1,this.currentBoard="outer",this.cubeLightPosition=new o.Vector3,this.diceSpinLength=a.default.toRadians(360*this.diceSpinFullRotations),this.fbDOMElements=[{domID:"feature-board-nudge-count-container",position:new o.Vector2(-8,10),helperTipID:"helper-tip-fb-nudge-counter"},{domID:"feature-board-reel-strike-count-container",position:new o.Vector2(0,10),helperTipID:"helper-tip-fb-reel-strike-counter"},{domID:"feature-board-coin-count-container",position:new o.Vector2(8,10),helperTipID:"helper-tip-fb-coin-counter"},{domID:"feature-board-streak-meter-container",position:new o.Vector2(0,6),helperTipID:"helper-tip-fb-streak-meter"},{domID:"feature-board-heart1-container",position:new o.Vector2(-9,-9.5),helperTipID:"helper-tip-fb-heart-counter"},{domID:"feature-board-heart2-container",position:new o.Vector2(-6,-6)},{domID:"feature-board-heart3-container",position:new o.Vector2(-3,-9.5)},{domID:"feature-board-icon1-container",position:new o.Vector2(3,-9.5),helperTipID:"helper-tip-fb-icon-counter"},{domID:"feature-board-icon2-container",position:new o.Vector2(6,-6)},{domID:"feature-board-icon3-container",position:new o.Vector2(9,-9.5)}],this.collectables=[{domID:"feature-board-streak-meter-container",variable:"streakStrengthCount",text:"Streak",fmMethodToCall:"streak"},{domID:"feature-board-nudge-count-container",variable:"nudgeCount",text:"Nudges",fmLinkVariable:"amountOfNudges"},{domID:"feature-board-reel-strike-count-container",variable:"reelStrikeCount",text:"Reel Strikes",fmLinkVariable:"amountOfReelStrikes",fmMethodToCall:"reelStrikes"},{domID:"feature-board-coin-count-container",variable:"coinCount",text:"Coins",fmLinkVariable:"amountOfCoins"}],this.availableForMultiAdd=["add-heart","add-icon","add-money","add-reel-strikes","add-streak-strength","add-nudges"],this.maxNumberOfIcons=3,this.initialAnimationConfigurables={reelEdgeOffset:500,reelFaceOffset:800,amountOfSpin:a.default.toRadians(720),cameraX:100,cameraZ:40,timeoutPerCube:10},this.cameraPositionDefault=new o.Vector3(-10,27,55),this.featureCameraPositionDefault=new o.Vector3(this.zoomThroughReelsFinishX,this.reelYPos,0),this.raycaster=new o.Raycaster,this.mouse=new o.Vector2}},{key:"createDynamicVariables",value:function(){Object.defineProperty(this,"amountOfCoins",{get:function(){return this.amountOfCoins1},set:function(e){this.amountOfCoins1=e,this.coinsCounter.to(e)}}),Object.defineProperty(this,"amountOfReelStrikes",{get:function(){return this.amountOfReelStrikes1},set:function(e){if(this.amountOfReelStrikes1=e,0==e)this.infoContainer.close();else{var t=1==e?"Strike":"Strikes";this.infoContainer.set(e+" Reel "+t,0==e)}}}),Object.defineProperty(this,"amountOfNudges",{get:function(){return this.amountOfNudges1},set:function(e){if(this.amountOfNudges1=e,0==e)this.infoContainer.close(),this.flashButtonsReset();else{this.flashButtonsFlag=!0;var t=1==e?"Nudge":"Nudges";this.reverseNudge&&(t="Reverse "+t),this.infoContainer.set(e+" "+t,0==e)}}}),Object.defineProperty(this,"hasHolds",{get:function(){return this.hasHolds2},set:function(e){if(e){this.flashButtonsFlag=!0;var t=this.hasHolds2&&!e?"":"hold";this.hasHolds2=e,this.infoContainer.set(t)}else this.infoContainer.close(),this.flashButtonsReset()}}),Object.defineProperty(this,"streakStrengthCount",{get:function(){return this.streakStrengthCount1},set:function(e){this.streakStrengthCount1=e,this.streakMeter.to(e)}}),Object.defineProperty(this,"reelStrikeCount",{get:function(){return this.reelStrikeCount1},set:function(e){this.reelStrikeCount1=e,this.reelStrikeCountUp.to(e,!0)}}),Object.defineProperty(this,"nudgeCount",{get:function(){return this.nudgeCount1},set:function(e){this.nudgeCount1=e,this.nudgeCountUp.to(e,!0)}}),Object.defineProperty(this,"coinCount",{get:function(){return this.coinCount1},set:function(e){this.coinCount1=e<0?0:e,this.coinCountUp.to(e)}})}},{key:"addPlugins",value:function(){this.streakMeter=new p.default("#feature-board-streak-meter",10),this.reelStrikeCountUp=new m.default("#feature-board-reel-strike-count"),this.nudgeCountUp=new m.default("#feature-board-nudge-count"),this.coinCountUp=new m.default("#feature-board-coin-count"),this.infoContainer=new b.default("#info-container"),this.duoPicker=new y.default("#duo-picker"),this.animatedPopout=new d.default("#animated-popout"),this.randomRotatingSelectionList=new f.default("#random-rotating-selection-list"),this.numberPicker=new v.default("#number-picker"),this.freePlay||(this.coinsCounter=new m.default("#coins",this.amountOfCoins))}},{key:"createScene",value:function(){this.scene=new o.Scene,this.scene.background=new o.Color(this.backgroundColor)}},{key:"createCamera",value:function(){this.fieldOfView=50;var e=this.container.clientWidth/this.container.clientHeight;this.camera=new o.PerspectiveCamera(this.fieldOfView,e,1,800),this.camera.position.set(this.cameraPositionDefault.x,this.cameraPositionDefault.y,this.cameraPositionDefault.z)}},{key:"createLights",value:function(){s.RectAreaLightUniformsLib.init(),this.reelIllumination=new o.RectAreaLight(this.reelIlluminationColor,4,2*this.fieldOfView,this.reelSize),this.reelIllumination.position.set(0,10,60),this.scene.add(this.reelIllumination),this.sceneLight=new o.HemisphereLight(this.reelsColor,16777215,3),this.sceneLight.position.set(0,50,0),this.scene.add(this.sceneLight),this.featureBoardLight=new o.DirectionalLight(16777215,0),this.featureBoardLight.position.set(this.featureCameraPositionDefault.x,this.featureCameraPositionDefault.y,this.featureCameraPositionDefault.z),this.scene.add(this.featureBoardLight),this.cubeLight=new o.PointLight(16777215,0,10),this.scene.add(this.cubeLight)}},{key:"createRenderer",value:function(){this.renderer=new o.WebGLRenderer({antialias:!0,sortObjects:!1}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.physicallyCorrectLights=!0,this.container.appendChild(this.renderer.domElement),this.labelRenderer=new u.CSS2DRenderer,this.labelRenderer.setSize(window.innerWidth,window.innerHeight),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top=0,this.container.appendChild(this.labelRenderer.domElement)}},{key:"eventDispatcher",value:function(){var e=this;document.body.addEventListener("keyup",(function(t){e.featureActive?(13==t.keyCode&&e.collect(),32==t.keyCode&&!e.hilo&&e.rollDiceEvent("ROLL"),38==t.keyCode&&e.ableToGambleHI&&e.rollDiceEvent("GAMBLEHI"),40==t.keyCode&&e.ableToGambleLO&&e.rollDiceEvent("GAMBLELO")):32==t.keyCode&&!e.streakRunning&&e.spinReelsEvent()})),this.container.addEventListener("mouseup",(function(t){if(e.rollEvenOddFlag)e.rollEvenOddStop();else if(e.stoppaOrTaxiRunning)e.stopStoppaOrTaxi();else if(e.reelStrikeFlag)e.stopReelStrike();else if(e.hasNudges()||e.hasHolds||e.stoppaReelFlag){e.mouse.x=t.clientX/e.container.clientWidth*2-1,e.mouse.y=-t.clientY/e.container.clientHeight*2+1,e.raycaster.setFromCamera(e.mouse,e.camera);var i=e.raycaster.intersectObjects(e.reelControlButtons);i.length>0&&(e.hasNudges()&&e.nudgeReelEvent(i[0].object.reelIndex),e.hasHolds&&e.holdReelEvent(i[0].object.reelIndex),e.stoppaReelFlag&&e.stoppaReelEvent(i[0].object.reelIndex))}}))}},{key:"setRandomRotatingSelectionList",value:function(e,t){var i=this;this.randomRotatingSelectionList.startSpin(e).then((function(e){i[t]=!1;try{i[e]()}catch(t){console.log(t),console.log(e+" method not defined on the fruitMachine context.")}}))}},{key:"easingFunction",value:function(e,t,i){var n=t+"Ease";this[n]||(this[n]=performance.now());var r=(performance.now()-this[n])/i,a=R[e](r);return performance.now()-this[n]>i?(delete this[n],t&&(this[t]=!0),1):a.toFixed(8)}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera),this.labelRenderer.render(this.scene,this.camera)}},{key:"update",value:function(){this.fruitMachineInitAnimationFlag&&this.fruitMachineInitAnimation(),this.featureBoardInitAnimationFlag&&this.featureBoardInitAnimation(),this.spinReelsFlag&&this.spinReels(),this.nudgeReelFlag&&this.nudgeReel(),this.stoppaReelFlag&&this.stoppaReel(),this.reelStrikeFlag&&this.reelStrike(),this.flashButtonsFlag&&this.flashButtons(),this.numberReelSpinFlag&&this.spinNumberReel(),this.hasWonFlag&&!this.spinReelsFlag&&!this.nudgeReelFlag&&this.winAnimation(),this.hasFeatureFlag&&!this.nudgeReelFlag&&!this.spinReelsFlag&&!this.numberReelSpinFlag&&this.toFeatureAnimation(),this.rollDiceFlag&&this.rollDice(),this.endFeatureFlag&&this.toFruitMachineAnimation(),this.rotateFeatureBoardCubeFlag&&this.rotateFeatureBoardCube(),this.moveInFlag&&this.moveIn(),this.moveOutFlag&&this.moveOut(),this.rollEvenOddFlag&&this.rollEvenOdd(),this.featureActive||this.hasFeatureFlag||this.camera.lookAt(0,0,0),this.featureBoardDevelop&&this.camera.lookAt(this.featureCameraPositionDefault.x+this.fbCameraDistance+this.innerBoardDistance,this.featureCameraPositionDefault.y,this.featureCameraPositionDefault.z),this.render()}},{key:"fromTo",value:function(e,t,i){return e+(t-e)*i}},{key:"toSelf",value:function(e,t){return e*t}},{key:"developingFeatureBoard",value:function(){a.default.showDOMelements(!0,this.fbDOMElements.map((function(e){return e.domID}))),this.camera.position.set(this.featureCameraPositionDefault.x,this.featureCameraPositionDefault.y,this.featureCameraPositionDefault.z),a.default.showDOMelements(!1,["coins"]),this.featureActive=!0,this.switchLights("feature-board"),this.featureBoardLight.target=this.dice[0];var e=!0,t=!1,i=void 0;try{for(var n,r=this.outerCubes[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;o.cube.rotation.x=a.default.toRadians(0),o.cube.material.map((function(e){return e.opacity=1}))}}catch(e){t=!0,i=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}}},{key:"developingFruitMachine",value:function(){var e=!0,t=!1,i=void 0;try{for(var r,a=this.fruitMachineInitAnimationData.reelFaces.entries()[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=n(r.value,2),s=(o[0],o[1]);s.face.position.set(s.finish.x,s.finish.y,s.finish.z),s.face.rotation.y=s.rotation}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}if(this.enableNumbers){var u=!0,l=!1,h=void 0;try{for(var c,d=this.fruitMachineInitAnimationData.numberReel[Symbol.iterator]();!(u=(c=d.next()).done);u=!0){var f=c.value;f.reel.position.y=0,f.reel.position.z=f.finish.z}}catch(e){l=!0,h=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw h}}}var m=!0,p=!1,v=void 0;try{for(var b,y=this.fruitMachineInitAnimationData.buttons[Symbol.iterator]();!(m=(b=y.next()).done);m=!0){var g=b.value;g.button.position.y=g.finishy}}catch(e){p=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(p)throw v}}var S=!0,C=!1,R=void 0;try{for(var k,O=this.fruitMachineInitAnimationData.reelEdges[Symbol.iterator]();!(S=(k=O.next()).done);S=!0){var x=k.value;x.edge.position.y=x.finishy,x.outline.position.y=x.finishy}}catch(e){C=!0,R=e}finally{try{!S&&O.return&&O.return()}finally{if(C)throw R}}}},{key:"switchLights",value:function(e){"feature-board"==e?(this.reelIllumination.intensity=0,this.featureBoardLight.intensity=1,this.cubeLight.intensity=7):"fruit-machine"==e&&(this.cubeLight.intensity=0,this.featureBoardLight.intensity=0,this.reelIllumination.intensity=4)}},{key:"afterFeatureBoard",value:function(){var e=this;a.default.showDOMelements(!0,["coins"]),this.featureActive=!1,this.hasCollected&&(this.hasCollected.fmLinkVariable&&(this[this.hasCollected.fmLinkVariable]+=this[this.hasCollected.variable]),this.hasCollected.fmMethodToCall&&this[this.hasCollected.fmMethodToCall](this[this.hasCollected.variable]),this.hasCollected=!1);var t=!0,i=!1,n=void 0;try{for(var r,o=this.outerCubes[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;s.cube.rotation.x=a.default.toRadians(-90),s.cube.material.map((function(e){return e.opacity=0}))}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}this.assignVariables({zeros:["timeoutPerCubeCounter","numberOfHearts","numberOfIcons","streakStrengthCount","reelStrikeCount","nudgeCount","coinCount"]}),this.heartsArray.map((function(e){return e.clear()})),this.iconsArray.map((function(e){return e.clear()})),this.fbPersistentZGroup.position.z=0,this.innerCubes.map((function(t){t.cube.material.map((function(t){return t.opacity=e.innerBoardInactiveOpacity}))})),this.currentBoard="outer"}},{key:"toFeatureBoard",value:function(){this.animatedPopout.setWord("Start Feature"),this.hasFeatureFlag=!0,this.resetNumberTrail(),a.default.showDOMelements(!1,["coins"]),this.featureActive=!0,this.switchLights("feature-board"),this.featureBoardLight.target=this.dice[0]}},{key:"toFeatureAnimation",value:function(){if(!this.winSpin){var e=this.easingFunction("linear","winSpin",this.winAnimationDuration),t=!0,i=!1,r=void 0;try{for(var a,o=this.reels.entries()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=n(a.value,2),u=s[0],l=s[1];l.rotation.x=u%2==0?this.fromTo(this.nextSpinValues[u],this.nextSpinValues[u]-this.winSpinLength,e):this.fromTo(this.nextSpinValues[u],this.nextSpinValues[u]+this.winSpinLength,e)}}catch(e){i=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw r}}}if(this.zoomThroughReelsStep1){if(!this.zoomThroughReelsStep2){var h=this.easingFunction("easeInOutQuad","zoomThroughReelsStep2",this.zoomThroughReelsStep2Duration),c=this.fromTo(this.zoomThroughReelsStartX,this.zoomThroughReelsFinishX,h);this.camera.position.set(c,this.reelYPos,0)}}else{var d=this.easingFunction("easeOutCubic","zoomThroughReelsStep1",this.zoomThroughReelsStep1Duration);this.camera.position.set(this.fromTo(this.cameraPositionDefault.x,this.zoomThroughReelsStartX,d),this.fromTo(this.cameraPositionDefault.y,this.reelYPos,d),this.fromTo(this.cameraPositionDefault.z,0,d)),this.camera.lookAt(this.toSelf(this.featureCameraPositionDefault.x+this.fbCameraDistance+this.innerBoardDistance,d),this.toSelf(this.featureCameraPositionDefault.y,d),this.toSelf(this.featureCameraPositionDefault.z,d))}this.winSpin&&this.zoomThroughReelsStep1&&this.zoomThroughReelsStep2&&(this.winSpin=!1,this.winSpinEase=!1,this.zoomThroughReelsStep1=!1,this.zoomThroughReelsStep1Ease=!1,this.zoomThroughReelsStep2=!1,this.zoomThroughReelsStep2Ease=!1,this.featureBoardInitAnimationFlag=!0,this.hasFeatureFlag=!1)}},{key:"toFruitMachineAnimation",value:function(){if(this.zoomToDefaultCameraStep1)this.afterFeatureBoard(),this.zoomToDefaultCameraStep1=!1,this.zoomToDefaultCameraStep1Ease=!1,this.endFeatureFlag=!1;else{var e=this.easingFunction("easeInQuart","zoomToDefaultCameraStep1",5e3);this.cameraPositionDefault=new o.Vector3(-10,27,55);var t="inner"==this.currentBoard?this.innerBoardDistance:0;this.camera.position.set(this.fromTo(this.featureCameraPositionDefault.x+t,this.cameraPositionDefault.x,e),this.fromTo(this.featureCameraPositionDefault.y,this.cameraPositionDefault.y,e),this.fromTo(this.featureCameraPositionDefault.z,this.cameraPositionDefault.z,e)),this.camera.lookAt(this.fromTo(this.featureCameraPositionDefault.x+this.fbCameraDistance+this.innerBoardDistance,0,e),this.fromTo(this.featureCameraPositionDefault.y,0,e),this.fromTo(this.featureCameraPositionDefault.z,0,e))}}}]),t}(c.FruitMachine)},337:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Configuration={reelsColor:255,reelIlluminationColor:16777215,backgroundColor:0,freePlay:!1,startingCoins:1e3,costPerSpin:50,enableHelperTips:!0,numberOfReels:4,reelWidth:10,reelSpacing:5,reelSize:15,reelWinProbability:6,numberOfFullRotations:5,spinTimeout:10,degreesToMoveBackBeforeSpinning:5,spinReelsDuration:2200,zoomThroughReelsXGap:50,zoomThroughReelsZPercentage:80,winAnimationDuration:5e3,winJudderDuration:60,nudgeProbability:4,nudgeDuration:500,holdProbability:4,flashButtonsSpeed:.01,enableBonus:!0,bonusStoppaReelSpeed:.6,bonusStoppaReelIncrement:.7,reelStrikeSpeed:5,streakBounds:50,superStreakBounds:80,megaStreakBounds:100,enableNumbers:!0,numbersBonus:6,numberTrailHeldProbability:3,numberMaximumOnReels:5,numberTrailHeldColor:7794432,numberHighlightColor:0,numberBonusColor:16737792,numberFeatureStartColor:16737792,cubeColor:15752739,diceColor:16777215,numberOfOuterBoardSquares:20,numberOfInnerBoardSquares:16,cubeSize:3.5,diceSize:5,diceSpinDuration:1e3,diceSpinFullRotations:1,diceGambleWinProbability:4,streakStrengthMax:10,moveCubeSpeed:200,stoppaOrTaxiTimeout:1e4,rollEvenOddSpeed:5}},338:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureBoardData=t.FruitMachineData=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(39));var r={numbers:[{value:1,texture:(new n.TextureLoader).load(i(339))},{value:2,texture:(new n.TextureLoader).load(i(340))},{value:3,texture:(new n.TextureLoader).load(i(341))},{value:4,texture:(new n.TextureLoader).load(i(342))},{value:5,texture:(new n.TextureLoader).load(i(343))},{value:6,texture:(new n.TextureLoader).load(i(344))},{value:7,texture:(new n.TextureLoader).load(i(345))},{value:8,texture:(new n.TextureLoader).load(i(346))},{value:9,texture:(new n.TextureLoader).load(i(347))},{value:10,texture:(new n.TextureLoader).load(i(348))},{value:11,texture:(new n.TextureLoader).load(i(349))},{value:12,texture:(new n.TextureLoader).load(i(350))}],fruits:[{name:"cherry",texture:(new n.TextureLoader).load(i(351)),coinValue:50},{name:"strawberry",texture:(new n.TextureLoader).load(i(352)),coinValue:100},{name:"apple",texture:(new n.TextureLoader).load(i(353)),coinValue:150},{name:"orange",texture:(new n.TextureLoader).load(i(354)),coinValue:200},{name:"coconut",texture:(new n.TextureLoader).load(i(355)),coinValue:300},{name:"watermelon",texture:(new n.TextureLoader).load(i(356)),coinValue:500},{name:"rose",texture:(new n.TextureLoader).load(i(357)),coinValue:1e3},{name:"bell",texture:(new n.TextureLoader).load(i(358)),coinValue:2e3},{name:"star",texture:(new n.TextureLoader).load(i(359)),coinValue:3500},{name:"diamond",texture:(new n.TextureLoader).load(i(360)),coinValue:5e3},{name:"gold-coin",texture:(new n.TextureLoader).load(i(361)),coinValue:1e4},{name:"wild",texture:(new n.TextureLoader).load(i(362))}],fruitMachineBonuses:[{displayName:"4 NUDGES",returnValue:"bonusFourNudges"},{displayName:"WIN SPIN",returnValue:"bonusWinSpin"},{displayName:"UNLUCKY",returnValue:"bonusUnlucky"},{displayName:"2 NUDGES",returnValue:"bonusTwoNudges"},{displayName:"STOPPA REEL",returnValue:"bonusStoppaReel"},{displayName:"2 REEL STRIKES",returnValue:"bonusTwoReelStrikes"},{displayName:"3 REVERSE NUDGES",returnValue:"bonusThreeReverseNudges"},{displayName:"START FEATURE",returnValue:"toFeatureBoard"},{displayName:"UNLUCKY",returnValue:"bonusUnlucky"},{displayName:"4 REVERSE NUDGES",returnValue:"bonusFourReverseNudges"},{displayName:"STREAK",returnValue:"bonusStreak"},{displayName:"NUMBERS IN VIEW",returnValue:"bonusNumbersInView"},{displayName:"REEL STRIKE",returnValue:"bonusOneReelStrike"}]},a={diceNumbers:[{value:1,texture:(new n.TextureLoader).load(i(363))},{value:2,texture:(new n.TextureLoader).load(i(364))},{value:3,texture:(new n.TextureLoader).load(i(365))},{value:4,texture:(new n.TextureLoader).load(i(366))},{value:5,texture:(new n.TextureLoader).load(i(367))},{value:6,texture:(new n.TextureLoader).load(i(368))}],cubeTextures:[{name:"game-over",texture:(new n.TextureLoader).load(i(369)),type:"reserved",outerAmountOfSquares:1,innerAmountOfSquares:1,functionToRun:"gameOver"},{name:"mystery",texture:(new n.TextureLoader).load(i(370)),type:"reserved",outerAmountOfSquares:2,innerAmountOfSquares:1,functionToRun:"mystery"},{name:"bonus",texture:(new n.TextureLoader).load(i(371)),type:"reserved",outerAmountOfSquares:2,innerAmountOfSquares:1,functionToRun:"fbBonus"},{name:"arrow",texture:(new n.TextureLoader).load(i(372)),type:"reserved",outerAmountOfSquares:2,innerAmountOfSquares:2,functionToRun:"moveToBoard"},{name:"add-heart",texture:(new n.TextureLoader).load(i(140)),type:"reserved",outerAmountOfSquares:1,innerAmountOfSquares:1,functionToRun:"addHeart"},{name:"add-icon",texture:(new n.TextureLoader).load(i(141)),type:"reserved",outerAmountOfSquares:2,innerAmountOfSquares:1,functionToRun:"addIcon"},{name:"multi-add",texture:(new n.TextureLoader).load(i(373)),type:"reserved",outerAmountOfSquares:1,innerAmountOfSquares:1,functionToRun:"multiAdd"},{name:"add-streak-strength",texture:(new n.TextureLoader).load(i(374)),type:"reserved",outerAmountOfSquares:1,innerAmountOfSquares:1,functionToRun:"addFeatureBoardValues",functionToRunValues:{variable:"streakStrengthCount",values:[1,2],direction:"add",text:"Streak Strength"}},{name:"minus-money",texture:(new n.TextureLoader).load(i(375)),type:"reserved",functionToRun:"addFeatureBoardValues",functionToRunValues:{variable:"coinCount",values:[50,100,200,250,500,"numberPicker"],direction:"minus",text:"Coin"},outerAmountOfSquares:2,innerAmountOfSquares:0},{name:"add-money",texture:(new n.TextureLoader).load(i(376)),type:"random",functionToRun:"addFeatureBoardValues",functionToRunValues:{variable:"coinCount",values:[100,200,500,750,1e3,"numberPicker"],direction:"add",text:"Coin"}},{name:"add-reel-strikes",texture:(new n.TextureLoader).load(i(377)),type:"random",functionToRun:"addFeatureBoardValues",functionToRunValues:{variable:"reelStrikeCount",values:[1,2],direction:"add",text:"Reel Strike"}},{name:"add-nudges",texture:(new n.TextureLoader).load(i(378)),type:"random",functionToRun:"addFeatureBoardValues",functionToRunValues:{variable:"nudgeCount",values:[1,2,3,4],direction:"add",text:"Nudge"}}],diceLayouts:{1:[[0,1]],2:[[2,0]],3:[[2,1],[3,0],[0,3]],4:[[3,1],[4,0],[0,4]],5:[[2,3],[4,1],[5,0],[0,5]],6:[[2,4],[3,3],[5,1],[6,0],[0,6]],7:[[2,5],[3,4],[4,3],[6,1]],8:[[2,6],[3,5],[4,4],[5,3]],9:[[3,6],[4,5],[5,4],[6,3]],10:[[4,6],[5,5],[6,4]],11:[[5,6],[6,5]],12:[[6,6]]},featureBoardBonuses:[{displayName:"Taxi",returnValue:"taxi"},{displayName:"Multi Add",returnValue:"multiAdd"},{displayName:"UNLUCKY",returnValue:"bonusUnlucky"},{displayName:"Extra Heart",returnValue:"addHeart"},{displayName:"Extra Icon",returnValue:"addIcon"},{displayName:"Move In",returnValue:"moveToBoard"}],featureBoardMystery:[{displayName:"Game Over",returnValue:"gameOver"},{displayName:"Stoppa",returnValue:"stoppa"},{displayName:"Lose with cashpot",returnValue:"loseWithCashpot"},{displayName:"HI/LO Continue",returnValue:"hiloContinue"},{displayName:"Continue",returnValue:"continue"},{displayName:"Roll Even",returnValue:"rollEven"},{displayName:"Roll Odd",returnValue:"rollOdd"},{displayName:"Move In/Out",returnValue:"moveToBoard"}]};t.FruitMachineData=r,t.FeatureBoardData=a},339:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/one.png"},340:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/two.png"},341:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/three.png"},342:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/four.png"},343:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/five.png"},344:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/six.png"},345:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/seven.png"},346:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/eight.png"},347:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/nine.png"},348:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/ten.png"},349:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/eleven.png"},350:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/twelve.png"},351:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/cherry.png"},352:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/strawberry.png"},353:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/apple.png"},354:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/orange.png"},355:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/coconut.png"},356:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/watermelon.png"},357:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/rose.png"},358:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/bell.png"},359:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/star.png"},360:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/diamond.png"},361:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/gold-coin.png"},362:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/wild.png"},363:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/dice-one.png"},364:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/dice-two.png"},365:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/dice-three.png"},366:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/dice-four.png"},367:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/dice-five.png"},368:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/dice-six.png"},369:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/game-over.png"},370:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/mystery.png"},371:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/fbBonus.png"},372:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/arrow.png"},373:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/multi-add.png"},374:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/plus-streak.png"},375:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/minus-money.png"},376:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/plus-money.png"},377:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/plus-strike.png"},378:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/plus-nudge.png"},379:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FruitMachine=void 0;var n,r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(10),s=(n=o)&&n.__esModule?n:{default:n},u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(39)),l=i(380);t.FruitMachine=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.fruitMachineDevelop=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"createFruitMachine",value:function(){this.createReels(),this.enableNumbers&&this.createNumberReel()}},{key:"createButton",value:function(e,t,i){var n=new u.Shape;n.moveTo(0,0),n.lineTo(0,6),n.lineTo(e,6),n.lineTo(e,0),n.lineTo(0,0);var r=new u.ExtrudeBufferGeometry(n,{steps:1,depth:.5,bevelEnabled:!0,bevelThickness:.5,bevelSize:.8,bevelOffset:0,bevelSegments:1}),a=new u.MeshStandardMaterial({color:16777215,transparent:!0,opacity:.5}),o=new u.Mesh(r,a),l=-(this.reelSize-e-3);this.buttonYPosition=l;var h=new u.Vector3(t-e/2,-100,this.reelSize);o.position.set(h.x,h.y,h.z),this.fruitMachineInitAnimationData.buttons.push({button:o,starty:h.y,finishy:l}),o.rotation.x=s.default.toRadians(90),o.reelIndex=i,this.reelControlButtons.push(o),this.scene.add(o),0==i&&this.checkAndApplyHelperTip(o,"helper-tip-buttons")}},{key:"createNumberReel",value:function(){var e=void 0,t=void 0,n=void 0,r=void 0,a=void 0,o=void 0,l=void 0,h=void 0,c=void 0,d=void 0,f=void 0,m=s.default.safeCloneArrayOfObjects(this.numbers);(m=[{value:0,texture:(new u.TextureLoader).load(i(381))}].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(m))).reverse();var p=this.reelSize/4,v=this.reelWidth/4;this.numberReelOneRotation=360/m.length;var b=this.numberReelOneRotation/2,y=new u.Group,g=2*p*Math.sin(Math.PI/m.length),S=2*Math.PI/m.length,C=new u.CylinderBufferGeometry(p,p,.3,m.length),R=new u.MeshStandardMaterial({color:16777215,transparent:!0,opacity:.2,flatShading:!0}),k=new u.Mesh(C,R),O=k.clone();k.position.y=-v/2,O.position.y=v/2;for(var x=0;x<m.length;x++){var w=x==m.length-1?this.numberHighlightColor:16777215;x==this.numbersBonus&&(w=this.numberBonusColor),0==x&&(w=this.numberFeatureStartColor),h=new u.Group,e=p*Math.sin(x*S),t=p*Math.cos(x*S),n=p*Math.sin((x+1)*S),r=p*Math.cos((x+1)*S),a=new u.BoxBufferGeometry(g,v,.1),(o=new u.MeshStandardMaterial({color:w,transparent:!0,opacity:.6,flatShading:!0})).polygonOffset=!0,o.polygonOffsetFactor=.1,(l=new u.Mesh(a,o)).renderOrder=0,h.add(l),m[x].texture&&(c=new u.BoxBufferGeometry(g/2,v/2,.1),d=new u.MeshStandardMaterial({transparent:!0,map:m[x].texture}),(f=new u.Mesh(c,d)).renderOrder=1,h.add(f)),h.position.x=(e+n)/2,h.position.z=(t+r)/2,h.rotation.y=s.default.toRadians(b+x*this.numberReelOneRotation),this.numberReelFaces.push(l),y.add(h)}var T=new u.Vector3(8,0,32),F=new u.Vector3(8,-100,50);y.position.set(F.x,F.y,F.z),this.fruitMachineInitAnimationData.numberReel.push({reel:y,start:F,finish:T}),y.rotation.x=s.default.toRadians(-47.5),this.numberReel=y,this.scene.add(y),this.checkAndApplyHelperTip(y,"helper-tip-number-reel")}},{key:"createReels",value:function(){for(var e=void 0,t=void 0,n=void 0,r=void 0,a=void 0,o=void 0,l=void 0,h=void 0,c=void 0,d=void 0,f=void 0,m=void 0,p=void 0,v=void 0,b=void 0,y=void 0,g=void 0,S=void 0,C=void 0,R=void 0,k=void 0,O=void 0,x=void 0,w=void 0,T=void 0,F=void 0,M=void 0,I=void 0,D=void 0,A=void 0,B=2*this.reelSize*Math.sin(Math.PI/this.numberOfFruits),L=2*Math.PI/this.numberOfFruits,P=this.oneRotation/2,N=-(this.numberOfReels-1)/2*(this.reelWidth+this.reelSpacing),E=s.default.randomInt(0,this.numberOfReels-1),V=0;V<this.numberOfReels;V++){C=new u.Group;var z=s.default.safeCloneArrayOfObjects(this.fruits);if(this.enableNumbers)for(var H=0;H<s.default.randomInt(0,(this.numberOfFruits-1)/2);H++)z[H].number=this.numbers[s.default.randomInt(0,this.numberMaximumOnReels-1)];if(this.enableBonus)if(V==E)z.push({name:"bonus",texture:(new u.TextureLoader).load(i(382))});else{var G=s.default.safeCloneObject(this.fruits[s.default.randomInt(0,this.fruits.length-1)]);z.push(G)}var j=s.default.shuffleArray(z);this.reelFruits.push(j);for(var W=0;W<this.numberOfFruits;W++){if(R=new u.Group,k=this.reelSize*Math.sin(W*L),O=this.reelSize*Math.cos(W*L),x=this.reelSize*Math.sin((W+1)*L),w=this.reelSize*Math.cos((W+1)*L),T=this.initialAnimationConfigurables.reelFaceOffset*Math.sin(W*L),F=this.initialAnimationConfigurables.reelFaceOffset*Math.cos(W*L),M=this.initialAnimationConfigurables.reelFaceOffset*Math.sin((W+1)*L),I=this.initialAnimationConfigurables.reelFaceOffset*Math.cos((W+1)*L),r=new u.BoxBufferGeometry(B,this.reelWidth,.1),(a=new u.MeshStandardMaterial({color:16777215,transparent:!0,opacity:.5,flatShading:!0})).polygonOffset=!0,a.polygonOffsetFactor=.1,(o=new u.Mesh(r,a)).renderOrder=0,R.add(o),j[W]&&j[W].texture){var _="wild"==j[W].name||"bonus"==j[W].name?1.2:2;c=new u.BoxBufferGeometry(B/_,this.reelWidth/_,.1),d=new u.MeshStandardMaterial({transparent:!0,map:j[W].texture}),(f=new u.Mesh(c,d)).rotation.z=s.default.toRadians(-90),f.renderOrder=1,R.add(f)}j[W]&&void 0!==j[W].number&&(e=new u.BoxBufferGeometry(1.5,1.5,.1),t=new u.MeshStandardMaterial({transparent:!0,map:j[W].number.texture}),(n=new u.Mesh(e,t)).renderOrder=2,n.position.y=-(this.reelWidth/2-1.5),n.position.x=-(B/2-1.5),n.rotation.z=s.default.toRadians(-90),R.add(n)),l=new u.EdgesGeometry(r),h=new u.LineSegments(l,new u.LineBasicMaterial({color:16777215})),R.add(h),D=new u.Vector3((T+M)/2,0,(F+I)/2),A=new u.Vector3((k+x)/2,0,(O+w)/2),R.position.set(D.x,D.y,D.z),this.fruitMachineInitAnimationData.reelFaces.push({start:D,finish:A,face:R,timeout:10*W,rotation:s.default.toRadians(P+W*this.oneRotation)}),C.add(R)}m=new u.CylinderBufferGeometry(this.reelSize,this.reelSize,.3,this.numberOfFruits),p=new u.MeshStandardMaterial({color:16777215,transparent:!0,opacity:.2,flatShading:!0}),b=(v=new u.Mesh(m,p)).clone(),y=new u.EdgesGeometry(m),S=(g=new u.LineSegments(y,new u.LineBasicMaterial({color:16777215}))).clone(),v.position.y=-this.reelWidth/2-this.initialAnimationConfigurables.reelEdgeOffset,g.position.y=-this.reelWidth/2-this.initialAnimationConfigurables.reelEdgeOffset,this.fruitMachineInitAnimationData.reelEdges.push({edge:v,outline:g,finishy:-this.reelWidth/2,starty:-this.reelWidth/2-this.initialAnimationConfigurables.reelEdgeOffset}),C.add(v),C.add(g),b.position.y=this.reelWidth/2+this.initialAnimationConfigurables.reelEdgeOffset,S.position.y=this.reelWidth/2+this.initialAnimationConfigurables.reelEdgeOffset,this.fruitMachineInitAnimationData.reelEdges.push({edge:b,outline:S,finishy:this.reelWidth/2,starty:this.reelWidth/2+this.initialAnimationConfigurables.reelEdgeOffset}),C.add(b),C.add(S),C.position.y=this.reelYPos,C.position.x=N,C.rotation.z=s.default.toRadians(90),C.rotation.x=this.setReelRotation(V,"spin"),this.reels.push(C),this.scene.add(C),this.createButton(B,N,V),N+=this.reelWidth+this.reelSpacing,0==V&&this.checkAndApplyHelperTip(C,"helper-tip-reels")}}},{key:"reelsHaveNudged",value:function(){(!this.hasNudges()||this.hasWonFlag||this.hasBonus||this.hasFeature)&&(this.amountOfNudges=0,this.nudgeReelCounter=new Array(this.numberOfReels).fill(0),this.reverseNudge=!1,console.log("NO MORE NUDGES")),this.enableNumbers&&this.updateNumberTrail(),this.hasFeature&&this.toFeatureBoard(),!this.freePlay&&this.hasWonFlag&&(this.amountOfCoins+=this.winValue),this.enableBonus&&this.hasBonus&&this.setRandomRotatingSelectionList(this.fruitMachineBonuses,"hasBonus")}},{key:"reelsHaveSpun",value:function(){if(this.streakRunning)return this.hasWonFlag=!1,this.streakFruitIndex==this.streakFruits.length-1?(this.infoContainer.set("That's your lot!",!0),this.streakRunning=!1,void(this.reelsHaveSpunCallback=!0)):(this.spinReelsFlag=!1,this.streakFruitIndex+=1,this.determineWin(),this.freePlay||(this.amountOfCoins+=this.winValue,this.infoContainer.set("Won "+this.winValue+" coins!",!0)),void this.spinReelsEvent(this.streakFruits[this.streakFruitIndex]));this.enableNumbers&&this.updateNumberTrail(),this.hasFeature&&this.toFeatureBoard(),!this.freePlay&&this.hasWonFlag&&(this.amountOfCoins+=this.winValue,this.infoContainer.set("Won "+this.winValue+" coins!",!0)),this.enableBonus&&this.hasBonus&&this.setRandomRotatingSelectionList(this.fruitMachineBonuses,"hasBonus"),this.hasWonFlag||this.hasBonus||this.hasFeature||(this.assignHolds(),this.hasHolds||this.assignNudges()),this.reelHeldCounter=new Array(this.numberOfReels).fill(0)}},{key:"setReelRotation",value:function(e,t){var i=void 0,n=void 0;if("spin"==t||"randomWin"==t)if(1===this.reelHeldCounter[e])n=i=this.currentFruits[e];else{var a="randomWin"==t?0:s.default.randomInt(0,this.reelWinProbability),o=void 0;if(0!=e&&(o=this.reelFruits[e-1][this.currentFruits[e-1]].name),0==a&&0!=e&&"bonus"!=o){var u=!0,l=!1,h=void 0;try{for(var c,d=this.reelFruits[e].entries()[Symbol.iterator]();!(u=(c=d.next()).done);u=!0){var f=r(c.value,2),m=f[0];if(f[1].name==o){i=m;break}}}catch(e){l=!0,h=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw h}}}else i=s.default.randomInt(0,this.numberOfFruits-1);n=i}else"nudge"==t?this.reverseNudge?(i=0==this.currentFruits[e]?this.numberOfFruits-1:this.currentFruits[e]-1,this.nudgeReelCounter[e]<0?(this.nudgeReelCounter[e]-=1,n=this.nudgeReelCounter[e]):0==this.currentFruits[e]?(n=-1,this.nudgeReelCounter[e]=n):n=i):(i=this.currentFruits[e]==this.numberOfFruits-1?0:this.currentFruits[e]+1,this.nudgeReelCounter[e]>this.numberOfFruits-1?(this.nudgeReelCounter[e]+=1,n=this.nudgeReelCounter[e]):this.currentFruits[e]==this.numberOfFruits-1?(n=this.numberOfFruits,this.nudgeReelCounter[e]=n):n=i):n=i=this.reelFruits[e].findIndex((function(e){return e.name==t}));this.currentFruits[e]=i;var p=s.default.toRadians(this.oneRotation*n);return this.currentSpinValues[e]=this.currentSpinValues.length>0?this.nextSpinValues[e]:p,this.nextSpinValues[e]=p,p}},{key:"calculateStreakWinnersArray",value:function(e){var t=this,i=[],n=[];this.fruits.map((function(e){return e.coinValue&&n.push(e.coinValue)}));n.sort((function(e,t){return e-t}));var r=void 0;"streak"==e?r=s.default.randomInt(3,7):"super"==e?r=s.default.randomInt(4,8):"mega"==e&&(r=s.default.randomInt(5,10));var a=Math.floor(n.length*(this.streakBounds/100)),o=Math.floor(n.length*(this.superStreakBounds/100)),u=Math.floor(n.length*(this.megaStreakBounds/100)),l=void 0;"streak"==e?l=a:"super"==e?l=o:"mega"==e&&(l=u);for(var h=function(e){var r=n[s.default.randomInt(0,l)],a=t.fruits.filter((function(e){return e.coinValue==r}))[0].name;i.push(a)},c=0;c<r;c++)h();return i}},{key:"resetNumberTrail",value:function(){this.reelNumbers=0,this.numberTrailHeld=!1,this.numberTrailHeldFromBonus=!1}},{key:"updateNumberTrail",value:function(){this.spinNumberReelStep1=!1,this.spinNumberReelStep1Ease=!1,this.numberReelPreviousRotation=void 0===this.numberReelPreviousRotation?0:this.numberReelCurrentRotation;var e=this.reelNumbers>=this.numberOfNumbers?this.numberOfNumbers:this.reelNumbers;if(this.numberReelCurrentRotation=s.default.toRadians(e*this.numberReelOneRotation),this.numberReelPreviousRotation!=this.numberReelCurrentRotation){this.numberReelSpinFlag=!0;var t=this.numberTrailHeld||this.numberTrailHeldFromBonus?this.numberTrailHeldColor:16777215,i=!0,n=!1,a=void 0;try{for(var o,u=this.numberReelFaces.entries()[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=r(o.value,2),h=l[0],c=l[1];c.material.color.set(t),0==h?c.material.color.set(this.numberFeatureStartColor):h==this.numberReelFaces.length-1-this.numbersBonus?c.material.color.set(this.numberBonusColor):h==this.numberReelFaces.length-1-e&&c.material.color.set(this.numberHighlightColor)}}catch(e){n=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(n)throw a}}this.numberTrailHeld&&this.infoContainer.set("Number trail held",!0)}}},{key:"hasNudges",value:function(){return this.amountOfNudges>0}},{key:"hasReelStrikes",value:function(){return this.amountOfReelStrikes>0}},{key:"assignNudges",value:function(){s.default.randomInt(0,this.nudgeProbability)>0||(this.amountOfNudges=s.default.randomInt(1,4))}},{key:"assignHolds",value:function(){s.default.randomInt(0,this.holdProbability)>0||(this.numberTrailHeld=!0,this.hasHolds=!0)}},{key:"streak",value:function(e){this.streakRunning=!0,this.streakFruitIndex=0;var t=void 0;e<=this.streakBounds/10?t="streak":e>this.streakBounds/10&&e<=this.superStreakBounds/10?t="super":e>this.superStreakBounds/10<=this.megaStreakBounds/10&&(t="mega"),this.streakFruits=this.calculateStreakWinnersArray(t),this.spinReelsEvent(this.streakFruits[this.streakFruitIndex])}},{key:"reelStrikes",value:function(){this.reelStrikeFlag=!0}},{key:"bonusStreak",value:function(){this.streak(5)}},{key:"bonusWinSpin",value:function(){this.spinReelsEvent("randomWin")}},{key:"bonusStoppaReel",value:function(){this.cachedRotations=this.reels.map((function(e){return e.rotation.x})),this.stoppaReelIndex=0,this.stoppaReelPause=!1,this.bonusStoppaReelSpeedDegrees=s.default.toRadians(this.bonusStoppaReelSpeed),this.stoppaReelFlag=!0}},{key:"bonusNumbersInView",value:function(){this.trailHeld=!0,this.determineNumbers(!0,"all"),this.updateNumberTrail(),this.hasFeature?this.toFeatureBoard():this.hasBonus&&this.setRandomRotatingSelectionList(this.fruitMachineBonuses,"hasBonus")}},{key:"bonusOneReelStrike",value:function(){this.amountOfReelStrikes=1,this.reelStrikes()}},{key:"bonusTwoReelStrikes",value:function(){this.amountOfReelStrikes=3,this.reelStrikes()}},{key:"bonusTwoNudges",value:function(){this.amountOfNudges=2,this.flashButtonsFlag=!0}},{key:"bonusFourNudges",value:function(){this.amountOfNudges=4,this.flashButtonsFlag=!0}},{key:"bonusThreeReverseNudges",value:function(){this.nudgeReelCounter=new Array(this.numberOfReels).fill(0),this.reverseNudge=!0,this.amountOfNudges=3,this.flashButtonsFlag=!0}},{key:"bonusFourReverseNudges",value:function(){this.nudgeReelCounter=new Array(this.numberOfReels).fill(0),this.reverseNudge=!0,this.amountOfNudges=4,this.flashButtonsFlag=!0}},{key:"bonusUnlucky",value:function(){}},{key:"determineBonus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return"all"==t?this.currentFruits.some((function(t,i){return"bonus"==e.reelFruits[i][t].name})):"bonus"==this.reelFruits[t][this.currentFruits[t]].name}},{key:"determineNumbers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments[1],n=0;if(this.currentFruits.map((function(r,a){if(void 0!==e.reelFruits[a][r].number){if(e.numberTrailHeldFromBonus&&i!=a&&"all"!=i)return;if(e.numberTrailHeld&&i!=a&&"all"!=i)return;n+=e.reelFruits[a][r].number.value}if(t){var o=0==r?e.numberOfFruits-1:r-1,s=r==e.numberOfFruits-1?0:r+1;void 0!==e.reelFruits[a][o].number&&(n+=e.reelFruits[a][o].number.value),void 0!==e.reelFruits[a][s].number&&(n+=e.reelFruits[a][s].number.value)}})),this.numberTrailHeld||this.numberTrailHeldFromBonus?this.reelNumbers+=n:this.reelNumbers=n,this.reelNumbers!=this.numbersBonus||this.numberTrailHeldFromBonus||this.hasBonus||(this.hasBonus=!0,this.numberTrailHeld=!0,this.numberTrailHeldFromBonus=!0),this.reelNumbers>=this.numberOfNumbers)return this.hasBonus=!1,void(this.hasFeature=!0);if(!this.numberTrailHeldFromBonus&&"all"==i){var r=s.default.randomInt(0,this.numberTrailHeldProbability);this.numberTrailHeld=0==r}0==this.reelNumbers&&(this.numberTrailHeld=!1)}},{key:"determineFeature",value:function(){var e=this;return this.currentFruits.every((function(t,i){return"wild"==e.reelFruits[i][t].name}))}},{key:"determineWin",value:function(){for(var e=this,t=void 0,i=0;i<this.currentFruits.length;i++)if("wild"!=this.reelFruits[i][this.currentFruits[i]].name&&"bonus"!=this.reelFruits[i][this.currentFruits[i]].name){t=this.reelFruits[i][this.currentFruits[i]].name;break}var n=this.currentFruits.every((function(i,n){return e.reelFruits[n][i].name==t||"wild"==e.reelFruits[n][i].name}));return n&&(this.winValue=this.fruits.filter((function(e){return e.name==t}))[0].coinValue),n}},{key:"determineWinLine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";this.hasFeature=this.determineFeature(),this.hasFeature||(this.hasWonFlag=this.determineWin(),this.hasWonFlag||(this.enableBonus&&(this.hasBonus=this.determineBonus(e)),this.enableNumbers&&this.determineNumbers(!1,e)))}},{key:"holdReelEvent",value:function(e){this.reelHeldCounter[e]=0==this.reelHeldCounter[e]?1:0}},{key:"nudgeReelEvent",value:function(e){this.nudgeReelFlag||this.hasWonFlag||this.spinReelsFlag||this.hasFeatureFlag||this.hasBonus||(this.amountOfNudges-=1,this.reelToNudge=e,this.setReelRotation(this.reelToNudge,"nudge"),this.determineWinLine(e),this.nudgeReelFlag=!0,this.reelsHaveNudged())}},{key:"spinReelsEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.hasHolds&&(this.flashButtonsReset(),this.hasHolds=!1),!(this.spinReelsFlag||this.hasWonFlag||this.nudgeReelFlag||this.hasNudges()||this.hasReelStrikes()||this.hasBonus||this.stoppaReelFlag||this.hasFeatureFlag||this.fruitMachineInitAnimationFlag)){if(this.amountOfCoins<=0)return this.infoContainer.set("No more coins"),void console.log("BUY MORE COINS!");this.numberTrailHeldFromBonus=!1,this.freePlay||e||(this.amountOfCoins-=this.costPerSpin),!this.numberTrailHeld&&this.enableNumbers&&(this.reelNumbers=0,this.updateNumberTrail());for(var t=0;t<this.numberOfReels;t++){var i=e||"spin";this.setReelRotation(t,i)}this.determineWinLine(),(this.hasWonFlag||this.hasBonus||this.hasFeature)&&this.flashButtonsReset();var n=this.reelHeldCounter.every((function(e){return 1==e}));n?this.reelsHaveSpun():this.spinReelsFlag=!0}}},{key:"stoppaReelEvent",value:function(e){if(e==this.stoppaReelIndex){this.stoppaReelPause=!0;for(var t=this.reels[e].rotation.x-this.cachedRotations[e],i=Math.round(t/s.default.toRadians(this.oneRotation)),n=this.currentFruits[e],r=0;r<i;r++)n=n==this.numberOfFruits-1?0:n+1;if(this.reels[e].rotation.x=n*s.default.toRadians(this.oneRotation),this.nextSpinValues[e]=n*s.default.toRadians(this.oneRotation),this.currentFruits[e]=n,this.flashButtonsReset(),this.stoppaReelIndex==this.numberOfReels-1)return this.stoppaReelFlag=!1,this.determineWinLine(),void this.reelsHaveSpun();this.stoppaReelIndex+=1,this.bonusStoppaReelSpeedDegrees=s.default.toRadians(this.bonusStoppaReelSpeed+this.stoppaReelIndex*this.bonusStoppaReelIncrement),this.stoppaReelPause=!1}}},{key:"stopReelStrike",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?(this.amountOfReelStrikes-=1,this.hasReelStrikes()?this.duoPicker.ask([{displayName:"Gamble",value:"gamble"},{displayName:"Collect",value:"collect"}]).then((function(i){"gamble"==i?e.reelStrikeFlag=!0:(e.amountOfReelStrikes=0,e.spinReelsEvent(t),e.reelStrikeData.cache.material.opacity=.5)})):(this.spinReelsEvent(t),this.reelStrikeData.cache.material.opacity=.5)):this.reelStrikeStopFlag=!0}},{key:"reelStrike",value:function(){if(this.reelStrikeStep1){var e=this.reelFruits[this.reelStrikeData.horizontalCounter][this.reelStrikeData.verticalToUse].name;Object.assign(this.reelStrikeData,this.reelStrikeDataInitial),this.stopReelStrike(e),this.reelStrikeStep1=!1,this.reelStrikeStep1Ease=!1,this.reelStrikeStopFlag=!1,this.reelStrikeFlag=!1}else{var t=this.reelStrikeSpeed;if(this.reelStrikeStopFlag){var i=this.easingFunction("linear","reelStrikeStep1",3e3);t=this.fromTo(this.reelStrikeSpeed,4*this.reelStrikeSpeed,i)}this.reelStrikeData.timeoutCounter>=t&&(this.reelStrikeData.horizontalCounter==this.reels.length-1&&"fwd"==this.reelStrikeData.direction&&(this.reelStrikeData.direction="dwn"),2==this.reelStrikeData.verticalCounter&&"dwn"==this.reelStrikeData.direction&&(this.reelStrikeData.direction="bck"),0==this.reelStrikeData.horizontalCounter&&"bck"==this.reelStrikeData.direction&&(this.reelStrikeData.direction="up"),0==this.reelStrikeData.verticalCounter&&"up"==this.reelStrikeData.direction&&(this.reelStrikeData.direction="fwd"),"fwd"==this.reelStrikeData.direction&&(this.reelStrikeData.horizontalCounter+=1),"dwn"==this.reelStrikeData.direction&&(this.reelStrikeData.verticalCounter+=1),"bck"==this.reelStrikeData.direction&&(this.reelStrikeData.horizontalCounter-=1),"up"==this.reelStrikeData.direction&&(this.reelStrikeData.verticalCounter-=1),this.reelStrikeData.cache&&(this.reelStrikeData.cache.material.opacity=.5),this.reelStrikeData.verticalToUse=this.currentFruits[this.reelStrikeData.horizontalCounter]+this.reelStrikeData.verticalCounter-1,this.reelStrikeData.verticalToUse>12?this.reelStrikeData.verticalToUse=0:this.reelStrikeData.verticalToUse<0&&(this.reelStrikeData.verticalToUse=12),this.reelStrikeData.cache=this.reels[this.reelStrikeData.horizontalCounter].children[this.reelStrikeData.verticalToUse].children[0],this.reelStrikeData.cache.material.opacity=1,this.reelStrikeData.timeoutCounter=0),this.reelStrikeData.timeoutCounter+=1}}},{key:"nudgeReel",value:function(){if(this.nudgeReelStep1)this.nudgeReelFlag=!1,this.nudgeReelStep1=!1,this.nudgeReelStep1Ease=!1,this.nudgeReelFlag=!1;else{var e=this.easingFunction("easeOutQuad","nudgeReelStep1",this.nudgeDuration);this.reels[this.reelToNudge].rotation.x=this.fromTo(this.currentSpinValues[this.reelToNudge],this.nextSpinValues[this.reelToNudge],e)}}},{key:"stoppaReel",value:function(){this.stoppaReelPause||(this.reels[this.stoppaReelIndex].rotation.x+=this.bonusStoppaReelSpeedDegrees,this.flashButtons(!1,this.stoppaReelIndex))}},{key:"spinNumberReel",value:function(){if(this.spinNumberReelStep1)this.spinNumberReelStep1=!1,this.spinNumberReelStep1Ease=!1,this.numberReelSpinFlag=!1;else{var e=this.easingFunction("easeOutCubic","spinNumberReelStep1",500);this.numberReelPreviousRotation>this.numberReelCurrentRotation?0==this.numberReelCurrentRotation?this.numberReel.rotation.y=this.fromTo(this.numberReelPreviousRotation,0,e):this.numberReel.rotation.y=this.fromTo(this.numberReelPreviousRotation,this.numberReelPreviousRotation,e):this.numberReel.rotation.y=this.fromTo(this.numberReelPreviousRotation,this.numberReelCurrentRotation,e)}}},{key:"spinReels",value:function(){var e=!0,t=!1,i=void 0;try{for(var n,a=this.reels.entries()[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var o=r(n.value,2),s=o[0],u=o[1];if(!(this.spinTimeoutCounter<=this.spinTimeout*s))if(this["spinReelsStep1-"+s])if(this["spinReelsStep2-"+s]){if(s==this.reels.length-1){this.reelsHaveSpun();for(var l=0;l<this.reels.length;l++)this["spinReelsStep1-"+l]=!1,this["spinReelsStep1-"+l+"Ease"]=!1,this["spinReelsStep2-"+l]=!1,this["spinReelsStep2-"+l+"Ease"]=!1;this.spinTimeoutCounter=0,this.spinReelsFlag=!1}}else{var h=this.easingFunction("easeInOutQuint","spinReelsStep2-"+s,this.spinDuration);1==!this.reelHeldCounter[s]&&(u.rotation.x=this.fromTo(this.currentSpinValues[s]-this.spinMoveBackDegrees,this.spinLength+this.nextSpinValues[s],h))}else{var c=this.easingFunction("easeOutQuad","spinReelsStep1-"+s,this.spinMoveBackDuration);1==!this.reelHeldCounter[s]&&(u.rotation.x=this.fromTo(this.currentSpinValues[s],this.currentSpinValues[s]-this.spinMoveBackDegrees,c))}}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}this.spinTimeoutCounter+=1}},{key:"judderReels",value:function(){var e=!0,t=!1,i=void 0;try{for(var n,a=this.reels.entries()[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var o=r(n.value,2),u=o[0],l=o[1];0==this.judderReelCounter[u]&&(l.rotation.x-=s.default.toRadians(1)),4==this.judderReelCounter[u]&&(l.rotation.x-=s.default.toRadians(2)),8==this.judderReelCounter[u]&&(l.rotation.x+=s.default.toRadians(1)),12==this.judderReelCounter[u]&&(l.rotation.x+=s.default.toRadians(2)),this.judderReelCounter[u]+=1,16==this.judderReelCounter[u]&&(this.judderReelCounter[u]=0)}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}}},{key:"winAnimation",value:function(){if(this.flashButtons(),this.winAnimationTimeoutCounter<this.winJudderDuration)this.judderReels();else{if(!this.winSpin){var e=this.easingFunction("linear","winSpin",this.winAnimationDuration),t=!0,i=!1,n=void 0;try{for(var a,o=this.reels.entries()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=r(a.value,2),u=s[0],l=s[1];l.rotation.x=u%2==0?this.fromTo(this.nextSpinValues[u],this.nextSpinValues[u]-this.winSpinLength,e):this.fromTo(this.nextSpinValues[u],this.nextSpinValues[u]+this.winSpinLength,e)}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}this.numberReel.rotation.y=this.toSelf(this.numberReelCurrentRotation+this.winSpinLength,e)}if(this.zoomThroughReelsStep1)if(this.zoomThroughReelsStep2)if(this.zoomThroughReelsStep3){this.flashButtonsReset(),this.winSpin=!1,this.winSpinEase=!1;for(var h=1;h<4;h++)this["zoomThroughReelsStep"+h]=!1,this["zoomThroughReelsStep"+h+"Ease"]=!1;var c=0;this.judderReelCounter=[];for(var d=0;d<this.numberOfReels;d++)this.judderReelCounter.push(c),c+=2;this.winAnimationTimeoutCounter=0,this.hasWonFlag=!1}else{var f=this.easingFunction("easeInOutQuad","zoomThroughReelsStep3",this.zoomThroughReelsStep3Duration);this.camera.position.set(this.fromTo(this.zoomThroughReelsFinishX,this.cameraPositionDefault.x,f),this.fromTo(this.reelYPos,this.cameraPositionDefault.y,f),this.fromTo(this.zoomThroughReelsZ,this.cameraPositionDefault.z,f))}else{var m=this.easingFunction("easeInOutQuad","zoomThroughReelsStep2",this.zoomThroughReelsStep2Duration);this.camera.position.set(this.fromTo(this.zoomThroughReelsStartX,this.zoomThroughReelsFinishX,m),this.reelYPos,this.zoomThroughReelsZ)}else{var p=this.easingFunction("easeOutCubic","zoomThroughReelsStep1",this.zoomThroughReelsStep1Duration);this.camera.position.set(this.fromTo(this.cameraPositionDefault.x,this.zoomThroughReelsStartX,p),this.fromTo(this.cameraPositionDefault.y,this.reelYPos,p),this.fromTo(this.cameraPositionDefault.z,this.zoomThroughReelsZ,p))}}this.winAnimationTimeoutCounter+=1}},{key:"flashButtonsReset",value:function(){this.flashButtonsFlag=!1,this.flashOpacityCounter=1,this.flashOpacityDirection="DOWN";var e=!0,t=!1,i=void 0;try{for(var n,r=this.reelControlButtons[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var a=n.value;a.material.opacity=.5,a.position.y=this.buttonYPosition}}catch(e){t=!0,i=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}}},{key:"flashButtons",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.flashOpacityCounter<=.5&&(this.flashOpacityDirection="UP"),this.flashOpacityCounter>=1&&(this.flashOpacityDirection="DOWN"),this.flashOpacityCounter="DOWN"==this.flashOpacityDirection?this.flashOpacityCounter-this.flashButtonsSpeed:this.flashOpacityCounter+this.flashButtonsSpeed;var i=!0,n=!1,a=void 0;try{for(var o,s=this.reelControlButtons.entries()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=r(o.value,2),l=u[0],h=u[1];(e||l==t)&&(1===this.reelHeldCounter[l]?(h.material.opacity=1,h.position.y=this.buttonYPosition):(h.material.opacity=this.flashOpacityCounter,h.position.y=this.buttonYPosition-(1-this.flashOpacityCounter)))}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}}},{key:"fruitMachineInitAnimation",value:function(){var e=!0,t=!1,i=void 0;try{for(var n,a=this.fruitMachineInitAnimationData.reelFaces.entries()[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var o=r(n.value,2),s=o[0],u=o[1];if(!(this.timeoutCounter<=u.timeout))if(this["fruitMachineInitialAnimationStep1-"+s])s==this.fruitMachineInitAnimationData.reelFaces.length-1&&this.fruitMachineInitialAnimationStep3&&this.fruitMachineInitialAnimationStep2&&this.fruitMachineInitialAnimationStep4&&this.fruitMachineInitialAnimationStep5&&(this.fruitMachineInitAnimationFlag=!1);else{var l=this.easingFunction("easeInOutQuart","fruitMachineInitialAnimationStep1-"+s,4e3);u.face.position.set(this.fromTo(u.start.x,u.finish.x,l),this.fromTo(u.start.y,u.finish.y,l),this.fromTo(u.start.z,u.finish.z,l)),u.face.rotation.y=this.toSelf(this.initialAnimationConfigurables.amountOfSpin+u.rotation,l)}}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}if(this.enableNumbers&&!this.fruitMachineInitialAnimationStep5){if(this.timeoutCounter>100){var h=this.easingFunction("easeOutQuart","fruitMachineInitialAnimationStep5",5e3),c=!0,d=!1,f=void 0;try{for(var m,p=this.fruitMachineInitAnimationData.numberReel[Symbol.iterator]();!(c=(m=p.next()).done);c=!0){var v=m.value;v.reel.position.y=this.fromTo(v.start.y,0,h),v.reel.position.z=this.fromTo(v.start.z,v.finish.z,h),v.reel.rotation.y=this.toSelf(this.initialAnimationConfigurables.amountOfSpin,h)}}catch(e){d=!0,f=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw f}}}}else this.initialAnimationStep5=!0;if(!this.fruitMachineInitialAnimationStep4){var b=this.easingFunction("easeInOutCubic","fruitMachineInitialAnimationStep4",5e3),y=!0,g=!1,S=void 0;try{for(var C,R=this.fruitMachineInitAnimationData.buttons[Symbol.iterator]();!(y=(C=R.next()).done);y=!0){var k=C.value;k.button.position.y=this.fromTo(k.starty,k.finishy,b)}}catch(e){g=!0,S=e}finally{try{!y&&R.return&&R.return()}finally{if(g)throw S}}}if(!this.fruitMachineInitialAnimationStep3&&this.timeoutCounter>20){var O=this.easingFunction("easeInOutQuart","fruitMachineInitialAnimationStep3",4e3),x=!0,w=!1,T=void 0;try{for(var F,M=this.fruitMachineInitAnimationData.reelEdges[Symbol.iterator]();!(x=(F=M.next()).done);x=!0){var I=F.value;I.edge.position.y=this.fromTo(I.starty,I.finishy,O),I.outline.position.y=this.fromTo(I.starty,I.finishy,O)}}catch(e){w=!0,T=e}finally{try{!x&&M.return&&M.return()}finally{if(w)throw T}}}if(!this.fruitMachineInitialAnimationStep2){var D=this.easingFunction("easeInOutQuad","fruitMachineInitialAnimationStep2",6e3);this.camera.position.x=this.fromTo(this.cameraPositionDefault.x+this.initialAnimationConfigurables.cameraX,this.cameraPositionDefault.x,D),this.camera.position.z=this.fromTo(this.cameraPositionDefault.z+this.initialAnimationConfigurables.cameraZ,this.cameraPositionDefault.z,D)}this.timeoutCounter+=1}}]),t}(l.FeatureBoard)},380:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureBoard=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=l(i(10)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(39)),s=i(139),u=l(i(90));function l(e){return e&&e.__esModule?e:{default:e}}function h(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}t.FeatureBoard=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.featureBoardDevelop=!1}return r(e,[{key:"createFeatureBoard",value:function(){this.createCubes(),this.createDice(),this.createHeartsAndIcons(),this.createDOMHolders(),this.fbGeometryGroup.add(this.fbCubesGroup),this.fbGeometryGroup.add(this.fbPersistentZGroup),this.fbGeometryGroup.rotation.y=a.default.toRadians(-90),this.fbGeometryGroup.position.set(this.featureCameraPositionDefault.x+this.fbCameraDistance,this.featureCameraPositionDefault.y,this.featureCameraPositionDefault.z),this.scene.add(this.fbGeometryGroup)}},{key:"createHeartsAndIcons",value:function(){var e=[{id:"heart",image:i(140),variable:"heartsArray"},{id:"icon",image:i(141),variable:"iconsArray"}],t=!0,n=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)for(var s=a.value,l=0;l<this.maxNumberOfIcons;l++){var h=new u.default(s.image,"feature-board-"+s.id+(l+1)+"-container");this[s.variable].push(h),h.getNode().classList.add("dom-element-hide")}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"createDOMHolders",value:function(){var e=void 0,t=void 0,i=void 0,n=void 0,r=void 0,a=!0,u=!1,l=void 0;try{for(var h,c=this.fbDOMElements[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var d=h.value;e=new o.BoxBufferGeometry(1,1,1),t=new o.MeshStandardMaterial({color:0}),(i=new o.Mesh(e,t)).position.x=d.position.x,i.position.y=d.position.y,d.helperTipID&&this.checkAndApplyHelperTip(i,d.helperTipID),n=document.getElementById(d.domID),r=new s.CSS2DObject(n),i.add(r),i.visible=!1,this.fbPersistentZGroup.add(i)}}catch(e){u=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(u)throw l}}}},{key:"createDice",value:function(){for(var e=void 0,t=void 0,i=0;i<2;i++){var n=[],r={};e=new o.BoxBufferGeometry(this.diceSize,this.diceSize,this.diceSize),this.addCubeFaceGroups(e),n.push(new o.MeshStandardMaterial({color:this.diceColor}));var s=!0,u=!1,l=void 0;try{for(var h,c=this.diceNumbers[Symbol.iterator]();!(s=(h=c.next()).done);s=!0){var d=h.value;0==i&&1==d.value||1==i&&2==d.value?n.push(new o.MeshStandardMaterial({color:this.diceColor})):n.push(new o.MeshStandardMaterial({transparent:!0,map:d.texture}))}}catch(e){u=!0,l=e}finally{try{!s&&c.return&&c.return()}finally{if(u)throw l}}(t=new o.Mesh(e,n)).position.x=0==i?-this.diceSize:this.diceSize,r[6]=new o.Vector3(a.default.toRadians(180),0,0),r[5]=new o.Vector3(0,0,0),r[4]=new o.Vector3(a.default.toRadians(270),0,0),r[3]=new o.Vector3(a.default.toRadians(90),0,0),0==i&&(r[2]=new o.Vector3(0,a.default.toRadians(90),0)),1==i&&(r[1]=new o.Vector3(0,-a.default.toRadians(90),0)),r[0]=0==i?new o.Vector3(0,-a.default.toRadians(90),0):new o.Vector3(0,a.default.toRadians(90),0),t.rotations=r,0==i&&this.checkAndApplyHelperTip(t,"helper-tip-dice"),this.dice.push(t),this.fbPersistentZGroup.add(t),this.ableToGambleHI=!0,this.ableToGambleLO=!0,this.currentNumber=10}}},{key:"createCubes",value:function(){for(var e=(this.numberOfOuterBoardSquares/4+1)/2,t=(this.numberOfInnerBoardSquares/4+1)/2,i=void 0,n=void 0,r=void 0,s=void 0,u=void 0,l=void 0,h=void 0,c=void 0,d=void 0,f=void 0,m=void 0,p=void 0,v=void 0,b=void 0,y=0;y<2;y++){u=0==y?this.numberOfOuterBoardSquares:this.numberOfInnerBoardSquares,m=-(f=e*(d=0==y?this.outerBoardCubeSpacing:this.innerBoardCubeSpacing)-d/2),p=-(v=t*d-d/2);var g=this.buildTextureToCubeMappingArray(u,0==y);l=u/4,b=0==y?0:this.innerBoardInactiveOpacity,h=0==y?m:p,c=0==y?f:v;for(var S=0;S<u;S++)i=new o.BoxBufferGeometry(this.cubeSize,this.cubeSize,this.cubeSize),this.addCubeFaceGroups(i),n=new o.MeshStandardMaterial({color:this.cubeColor,transparent:!0,opacity:b}),r=new o.MeshStandardMaterial({transparent:!0,map:this.cubeTextures[g[S]].texture,opacity:b}),(s=new o.Mesh(i,[n,r,r,r,r,r,r])).position.x=h,s.position.y=c,1==y?s.position.z=-this.innerBoardDistance:s.rotation.x=a.default.toRadians(-90),(0==y?this.outerCubes:this.innerCubes).push({functionToRun:this.cubeTextures[g[S]].functionToRun,functionToRunValues:this.cubeTextures[g[S]].functionToRunValues,cube:s}),this.fbCubesGroup.add(s),S<=l-1?h+=d:S>l-1&&S<=2*l-1?c-=d:S>2*l-1&&S<=3*l-1?h-=d:S>3*l-1&&(c+=d)}}},{key:"endFeature",value:function(){this.endFeatureFlag=!0,a.default.showDOMelements(!1,this.fbDOMElements.map((function(e){return e.domID}))),this.switchLights("fruit-machine")}},{key:"runCubeAction",value:function(e){var t=this.getCurrentBoardCubes();e||(t[this.currentNumberIndex].functionToRunValues?this[t[this.currentNumberIndex].functionToRun](t[this.currentNumberIndex].functionToRunValues):this[t[this.currentNumberIndex].functionToRun]()),"mystery"==t[this.currentNumberIndex].functionToRun||"moveToBoard"==t[this.currentNumberIndex].functionToRun?(this.ableToGambleHI=!1,this.ableToGambleLO=!1):(this.ableToGambleHI=this.gambleNumber?this.gambleNumber<12:this.currentNumber<12,this.ableToGambleLO=this.gambleNumber?this.gambleNumber>1:this.currentNumber>1),this.randomFeatureBoardCubeRotationMesh=t[this.currentNumberIndex].cube,this.rotateFeatureBoardCubeFlag=!0,t[this.currentNumberIndex].cube.rotation.x=a.default.toRadians(45),this.diceRolled=!1,this.hilo=!1}},{key:"diceHasRolled",value:function(){var e=this;this.getCurrentBoardCubes();if(this.diceGambled)this.diceGambleWon?(this.infoContainer.set("Gamble Won",!0),this.runCubeAction(this.hilo)):(this.gameOver(),this.hilo=!1,this.diceRolled=!1);else{var t=this.getCurrentNumberOfSquares(),i=this.currentNumberIndex+this.currentNumber;this.currentNumberIndex=i>t-1?i-t:i;var n=setInterval((function(){e.prevNumberIndex+=1,e.prevNumberIndex>t-1&&(e.prevNumberIndex=0),e.setPointLightToCube(e.prevNumberIndex),e.prevNumberIndex==e.currentNumberIndex&&(clearInterval(n),e.runCubeAction())}),this.moveCubeSpeed)}}},{key:"buildTextureToCubeMappingArray",value:function(e,t){var i=[],r=[],o=this.cubeTextures.filter((function(e,t){return"reserved"==e.type&&i.push(t),"reserved"==e.type})),s=this.cubeTextures.filter((function(e,t){return"random"==e.type&&r.push(t),"random"==e.type})),u=[],l=!0,h=!1,c=void 0;try{for(var d,f=o.entries()[Symbol.iterator]();!(l=(d=f.next()).done);l=!0)for(var m=n(d.value,2),p=m[0],v=m[1],b=t?v.outerAmountOfSquares:v.innerAmountOfSquares,y=0;y<b;y++)u.push(i[p])}catch(e){h=!0,c=e}finally{try{!l&&f.return&&f.return()}finally{if(h)throw c}}for(var g=t?this.numberOfOuterBoardSquares-u.length:this.numberOfInnerBoardSquares-u.length,S=0;S<g;S++){var C=a.default.randomInt(0,s.length-1);u.push(r[C])}return a.default.shuffleArray(u)}},{key:"addFeatureBoardValues",value:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("minus"!=e.direction||0!=this[e.variable]){var n=[].concat(h(e.values)).filter((function(e){return"numberPicker"!=e})),r=i?e.values:n,o=r[a.default.randomInt(0,r.length-1)];if("minus"==e.direction&&this[e.variable]-o<0&&(o=this[e.variable]),!(o<0)){var s=function(i){var n=1==i?e.text:e.text+"s";n=e.direction+" "+i+" "+n;var r="minus"==e.direction?-i:i;t[e.variable]+=r,t.multiAdding?t.infoContainer.set(n,!0,(function(){t.multiAdding=!1})):t.infoContainer.set(n,!0)};"numberPicker"==o?(this.infoContainer.set("How Much?"),this.hasNumberPicker=!0,this.numberPicker.setOptions(n).then((function(e){s(e),t.hasNumberPicker=!1}))):s(o)}}}},{key:"stopStoppaOrTaxi",value:function(){clearInterval(this.stoppaOrTaxiInterval),this.stoppaOrTaxiRunning=!1,this.runCubeAction()}},{key:"setStoppaOrTaxiTimout",value:function(){var e=this;setTimeout((function(){e.stoppaOrTaxiRunning&&e.stopStoppaOrTaxi()}),this.stoppaOrTaxiTimeout)}},{key:"stoppa",value:function(){var e=this;this.stoppaOrTaxiRunning=!0;var t=this.getCurrentBoardCubes().length;this.stoppaOrTaxiInterval=setInterval((function(){var i=a.default.randomInt(0,t-1);e.setPointLightToCube(i),e.currentNumberIndex=i}),this.moveCubeSpeed),this.setStoppaOrTaxiTimout()}},{key:"taxi",value:function(){var e=this;this.stoppaOrTaxiRunning=!0;var t=this.getCurrentBoardCubes().length;this.stoppaOrTaxiInterval=setInterval((function(){e.currentNumberIndex+=1,e.currentNumberIndex>t-1&&(e.currentNumberIndex=0),e.setPointLightToCube(e.currentNumberIndex)}),this.moveCubeSpeed),this.setStoppaOrTaxiTimout()}},{key:"moveToBoard",value:function(){"outer"==this.currentBoard?(this.infoContainer.set("Move In",!0),this.currentBoard="inner",this.moveInFlag=!0,this.stoppa()):(this.infoContainer.set("Move Out",!0),this.currentBoard="outer",this.moveOutFlag=!0,this.stoppa())}},{key:"multiAdd",value:function(){var e=this;this.multiAdding=!0;var t=0,i=!0,n=!1,r=void 0;try{for(var o,s=function(){var i=o.value;if(e.availableForMultiAdd.includes(i.name)){if(1==a.default.randomInt(0,1))return"continue";setTimeout((function(){i.functionToRunValues?e[i.functionToRun](i.functionToRunValues,!1):e[i.functionToRun]()}),t),t+=750}},u=this.cubeTextures[Symbol.iterator]();!(i=(o=u.next()).done);i=!0)s()}catch(e){n=!0,r=e}finally{try{!i&&u.return&&u.return()}finally{if(n)throw r}}}},{key:"fbBonus",value:function(){this.hasBonus=!0;var e="outer"==this.currentBoard?this.featureBoardBonuses:this.featureBoardBonuses.filter((function(e){return"Move In"!=e.displayName}));this.setRandomRotatingSelectionList(e,"hasBonus")}},{key:"addHeart",value:function(){this.hasExtraLife()||(this.heartsArray[this.numberOfHearts].up(),this.numberOfHearts+=1,this.hasExtraLife()?this.animatedPopout.setWord("Extra Life"):this.infoContainer.set("Add Heart",!0))}},{key:"addIcon",value:function(){this.hasGame()||(this.iconsArray[this.numberOfIcons].up(),this.numberOfIcons+=1,this.infoContainer.set("Add Icon",!0),this.hasGame()&&this.animatedPopout.setWord("Coming Soon"))}},{key:"mystery",value:function(){this.hasMystery=!0,this.setRandomRotatingSelectionList(this.featureBoardMystery,"hasMystery")}},{key:"gameOver",value:function(){if(this.hasExtraLife())return this.numberOfHearts=0,this.heartsArray.map((function(e){return e.down()})),void this.animatedPopout.setWord("Extra Life");this.featureBoardDevelop||(this.animatedPopout.setWord("Game Over"),this.endFeature())}},{key:"cancelCollect",value:function(){clearInterval(this.collectionInterval),this.infoContainer.close(),this.collectionFlashing=!1,this.collectables.map((function(e){document.getElementById(e.domID).classList.remove("collection-background")}))}},{key:"collect",value:function(){var e=this;if(this.collectionFlashing){clearInterval(this.collectionInterval);var t=void 0;this.collectables.map((function(e){document.getElementById(e.domID).classList.contains("collection-background")&&(t=e)})),this.collected(t)}else{var i=[];if(this.collectables.map((function(t){e[t.variable]>0&&i.push(t)})),0==i.length)return void console.log("Nothing available to collect");this.infoContainer.set("Press enter again to collect highlighted item");var r=0;this.collectionFlashing=!0;var a=this.getCurrentSquare().functionToRun;if("mystery"==a||"gameOver"==a)return;this.collectionInterval=setInterval((function(){r==i.length&&(r=0);var t=!0,a=!1,o=void 0;try{for(var s,u=i.entries()[Symbol.iterator]();!(t=(s=u.next()).done);t=!0){var l=n(s.value,2),h=l[0],c=l[1];r==h&&0!==e[c.variable]?document.getElementById(c.domID).classList.add("collection-background"):document.getElementById(c.domID).classList.remove("collection-background")}}catch(e){a=!0,o=e}finally{try{!t&&u.return&&u.return()}finally{if(a)throw o}}r+=1}),1e3)}}},{key:"collected",value:function(e){this.cancelCollect(),this.hasCollected=e,this.animatedPopout.setWord("Collected "+e.text),this.endFeature()}},{key:"continue",value:function(){}},{key:"rollEvenOddStop",value:function(){this.rollEvenOddFlag=!1;var e=0,t=!0,i=!1,r=void 0;try{for(var s,u=function(){var t=n(s.value,2),i=(t[0],t[1]),r=Math.round(i.rotation.x/a.default.toRadians(90)),u=r-4*Math.floor(r/4),l=a.default.toRadians(90*u);i.rotation.x=l;var h=new o.Vector3(l,0,0),c=Object.keys(i.rotations).filter((function(e){return i.rotations[e].x==h.x&&i.rotations[e].y==h.y}));e+=parseInt(c[0])},l=this.dice.entries()[Symbol.iterator]();!(t=(s=l.next()).done);t=!0)u()}catch(e){i=!0,r=e}finally{try{!t&&l.return&&l.return()}finally{if(i)throw r}}this.rollingEven&&e%2==0||this.rollingOdd&&e%2!=0?this.infoContainer.set("Good Job!",!0):this.gameOver(),this.currentNumber=e,this.rollingEven=!1,this.rollingOdd=!1,this.rollEvenOddResetStep1=!1,this.rollEvenOddResetStep1Ease=!1}},{key:"rollEven",value:function(){this.infoContainer.set("Roll Even.."),this.cachedRotations=this.getCurrentDiceRotations(),this.rollingEven=!0,this.rollEvenOddFlag=!0}},{key:"rollOdd",value:function(){this.infoContainer.set("Roll Odd.."),this.cachedRotations=this.getCurrentDiceRotations(),this.rollingOdd=!0,this.rollEvenOddFlag=!0}},{key:"hiloContinue",value:function(){this.infoContainer.set("HI / LO Continue.."),this.ableToGambleHI=this.currentNumber<12,this.ableToGambleLO=this.currentNumber>1,this.hilo=!0}},{key:"loseWithCashpot",value:function(){this.collected({variable:"coinCount",text:"Coins",fmLinkVariable:"amountOfCoins"})}},{key:"rollDiceEvent",value:function(e){if(this.collectionFlashing&&this.cancelCollect(),!(this.diceRolled||this.stoppaRunning||this.multiAdding||this.hasNumberPicker||this.hasNumberPicker||this.hasMystery||this.hasBonus||this.hasMystery||this.stoppaOrTaxiRunning||this.endFeatureFlag||this.featureBoardInitAnimationFlag||this.rollEvenOddFlag)){this.diceRolled=!0,this.prevRotations=this.getCurrentDiceRotations(),this.rotationData=this.generateRandomRotations();var t=this.gambleNumber?this.gambleNumber:this.currentNumber;"GAMBLEHI"==e?(this.infoContainer.set("Going Higher",!0),this.diceGambled=!0,1==t?(this.gambleNumber=a.default.randomInt(2,12),this.diceGambleWon=!0):(this.diceGambleWon=0==a.default.randomInt(0,this.diceGambleWinProbability),this.gambleNumber=this.diceGambleWon?a.default.randomInt(t+1,12):a.default.randomInt(1,t-1))):"GAMBLELO"==e?(this.infoContainer.set("Going Lower",!0),this.diceGambled=!0,12==t?(this.gambleNumber=a.default.randomInt(1,11),this.diceGambleWon=!0):(this.diceGambleWon=0==a.default.randomInt(0,this.diceGambleWinProbability),this.gambleNumber=this.diceGambleWon?a.default.randomInt(1,t-1):a.default.randomInt(t+1,12))):"ROLL"==e&&(this.diceGambled=!1,this.prevNumberIndex=this.currentNumberIndex,this.gambleNumber=!1,this.currentNumber=a.default.randomInt(1,12)),t=this.gambleNumber?this.gambleNumber:this.currentNumber,this.diceLayout=this.getDiceLayout(t),this.rollDiceFlag=!0}}},{key:"addCubeFaceGroups",value:function(e){e.clearGroups(),e.addGroup(0,1/0,0);for(var t=0;t<6;t++)e.addGroup(6*t,6,t+1)}},{key:"setPointLightToCube",value:function(e){this.getCurrentBoardCubes()[e].cube.getWorldPosition(this.cubeLightPosition),this.cubeLight.position.set(this.cubeLightPosition.x-5,this.cubeLightPosition.y,this.cubeLightPosition.z)}},{key:"hasGame",value:function(){return this.numberOfIcons==this.maxNumberOfIcons}},{key:"hasExtraLife",value:function(){return this.numberOfHearts==this.maxNumberOfIcons}},{key:"getCurrentDiceRotations",value:function(){return this.dice.map((function(e){return new o.Vector3(e.rotation.x,e.rotation.y,e.rotation.z)}))}},{key:"getCurrentNumberOfSquares",value:function(){return"outer"==this.currentBoard?this.numberOfOuterBoardSquares:this.numberOfInnerBoardSquares}},{key:"getCurrentBoardCubes",value:function(){return"outer"==this.currentBoard?this.outerCubes:this.innerCubes}},{key:"getDiceLayout",value:function(e){return this.diceLayouts[e][a.default.randomInt(0,this.diceLayouts[e].length-1)]}},{key:"getCurrentSquare",value:function(){return this.getCurrentBoardCubes()[this.currentNumberIndex]}},{key:"generateRandomRotations",value:function(){var e=this,t=0,i=0,n=0;return this.dice.map((function(r){var o=a.default.randomInt(0,1),s=a.default.randomInt(0,1),u=o||s?a.default.randomInt(0,1):1;return o&&(t=0==a.default.randomInt(0,1)?e.diceSpinLength:-e.diceSpinLength),s&&(i=0==a.default.randomInt(0,1)?e.diceSpinLength:-e.diceSpinLength),u&&(n=0==a.default.randomInt(0,1)?e.diceSpinLength:-e.diceSpinLength),{x:o,y:s,z:u,spinX:t,spinY:i,spinZ:n}}))}},{key:"rollEvenOdd",value:function(){if(this.rollEvenOddResetStep1){var e=!0,t=!1,i=void 0;try{for(var r,a=this.dice.entries()[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=n(r.value,2);m=o[0];o[1].rotation.x+=0==m?this.rollEvenOddDegrees:-this.rollEvenOddDegrees}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}}else{var s=this.easingFunction("linear","rollEvenOddResetStep1",500),u=!0,l=!1,h=void 0;try{for(var c,d=this.dice.entries()[Symbol.iterator]();!(u=(c=d.next()).done);u=!0){var f=n(c.value,2),m=f[0];f[1].rotation.set(this.fromTo(this.cachedRotations[m].x,0,s),this.fromTo(this.cachedRotations[m].y,0,s),this.fromTo(this.cachedRotations[m].z,0,s))}}catch(e){l=!0,h=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw h}}}}},{key:"rotateFeatureBoardCube",value:function(){if(this.rotateFeatureBoardCubeStep1)this.rotateFeatureBoardCubeStep1=!1,this.rotateFeatureBoardCubeStep1Ease=!1,this.rotateFeatureBoardCubeFlag=!1;else{var e=this.easingFunction("easeInOutQuart","rotateFeatureBoardCubeStep1",500);this.randomFeatureBoardCubeRotationMesh.rotation.x=this.toSelf(a.default.toRadians(90),e)}}},{key:"moveIn",value:function(){var e=this;if(this.moveInStep1)this.moveInStep1=!1,this.moveInStep1Ease=!1,this.moveInFlag=!1;else{var t=this.easingFunction("easeInOutCubic","moveInStep1",1e3);this.camera.position.x=this.fromTo(this.featureCameraPositionDefault.x,this.featureCameraPositionDefault.x+this.innerBoardDistance,t),this.fbPersistentZGroup.position.z=this.fromTo(0,-this.innerBoardDistance,t),this.innerCubes.map((function(i){i.cube.material.map((function(i){return i.opacity=e.fromTo(e.innerBoardInactiveOpacity,1,t)}))}))}}},{key:"moveOut",value:function(){var e=this;if(this.moveOutStep1)this.moveOutStep1=!1,this.moveOutStep1Ease=!1,this.moveOutFlag=!1;else{var t=this.easingFunction("easeInOutCubic","moveOutStep1",1e3);this.camera.position.x=this.fromTo(this.featureCameraPositionDefault.x+this.innerBoardDistance,this.featureCameraPositionDefault.x,t),this.fbPersistentZGroup.position.z=this.fromTo(-this.innerBoardDistance,0,t),this.innerCubes.map((function(i){i.cube.material.map((function(i){return i.opacity=e.fromTo(1,e.innerBoardInactiveOpacity,t)}))}))}}},{key:"rollDice",value:function(){if(this.rollDiceStep1)this.diceHasRolled(),this.rollDiceStep1=!1,this.rollDiceStep1Ease=!1,this.rollDiceFlag=!1;else{var e=this.easingFunction("easeOutQuad","rollDiceStep1",this.diceSpinDuration),t=!0,i=!1,r=void 0;try{for(var a,o=this.dice.entries()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=n(a.value,2),u=s[0],l=s[1];l.rotation.set(this.fromTo(this.prevRotations[u].x-this.rotationData[u].spinX,this.rotationData[u].spinX+l.rotations[this.diceLayout[u]].x,e),this.fromTo(this.prevRotations[u].y-this.rotationData[u].spinY,this.rotationData[u].spinY+l.rotations[this.diceLayout[u]].y,e),this.fromTo(this.prevRotations[u].z-this.rotationData[u].spinZ,this.rotationData[u].spinZ+l.rotations[this.diceLayout[u]].z,e))}}catch(e){i=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw r}}}}},{key:"featureBoardInitAnimation",value:function(){var e=this,t=!0,i=!1,r=void 0;try{for(var o,s=this.outerCubes.entries()[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var u=n(o.value,2),l=u[0],h=u[1];if(!(this.timeoutPerCubeCounter<=this.initialAnimationConfigurables.timeoutPerCube*l))if(this["featureBoardInitialAnimationStep1-"+l]){if(l==this.outerCubes.length-1){this.featureBoardDevelop||(a.default.showDOMelements(!0,this.fbDOMElements.map((function(e){return e.domID}))),this.stoppa());for(var c=0;c<this.outerCubes.length;c++)this["featureBoardInitialAnimationStep1-"+c]=!1,this["featureBoardInitialAnimationStep1-"+c+"Ease"]=!1;this.featureBoardInitAnimationFlag=!1}}else!function(){var t=e.easingFunction("easeOutQuart","featureBoardInitialAnimationStep1-"+l,500);h.cube.rotation.x=e.fromTo(a.default.toRadians(-90),a.default.toRadians(0),t),h.cube.material.map((function(i){return i.opacity=e.toSelf(1,t)}))}()}}catch(e){i=!0,r=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw r}}this.timeoutPerCubeCounter+=1}}]),e}()},381:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/zero.png"},382:function(e,t,i){e.exports=i.p+"fruitMachine/fruitMachineAssets/bonus.png"},386:function(e,t,i){},90:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i(91);var a=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(this,e),this.src=t,this.id=i,this.container=n?document.querySelector(n):document.body,this.htmlDefinition()}return n(e,[{key:"htmlDefinition",value:function(){var e=void 0,t=void 0,i=void 0,n=void 0;(e=document.createElement("div")).classList.add("one-up"),e.id=this.id,(t=document.createElement("div")).classList.add("one-up-scale"),(i=document.createElement("div")).classList.add("one-up-rotate"),(n=document.createElement("img")).classList.add("one-up-color"),n.src=this.src,n.classList.add("one-up-image"),i.appendChild(n),t.appendChild(i),e.appendChild(t),this.scale=t,this.rotate=i,this.color=n,this.oneUp=e,this.container.appendChild(e)}},{key:"getNode",value:function(){return this.oneUp}},{key:"up",value:function(){this.scale.classList.add("go"),this.color.classList.add("go"),this.rotate.classList.add("go")}},{key:"down",value:function(){this.scale.classList.add("ungo"),this.color.classList.add("ungo"),this.rotate.classList.add("ungo")}},{key:"clear",value:function(){this.scale.classList.remove("go"),this.color.classList.remove("go"),this.rotate.classList.remove("go"),this.scale.classList.remove("ungo"),this.color.classList.remove("ungo"),this.rotate.classList.remove("ungo")}}]),e}();t.default=a},91:function(e,t,i){},92:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(10),o=(n=a)&&n.__esModule?n:{default:n};i(93);var s=o.default.getEasingFunctions(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apContainer=document.querySelector(t),this.apContainer&&(this.timeoutPerLetter=200,this.timeout=2e3,this.counter=0,this.letters=[],this.createKeyframe(),this.go=this.go.bind(this),this.closeEarly=this.closeEarly.bind(this),this.apContainer.addEventListener("click",this.closeEarly))}return r(e,[{key:"easingFunction",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"start";this[n]||(this[n]=performance.now());var r=(performance.now()-this[n])/i,a=s[e](r);return performance.now()-this[n]>i?(delete this[n],t&&(this[t]=!0),1):a}},{key:"closeEarly",value:function(){o.default.zOpaqueOut(this.apContainer)}},{key:"reset",value:function(){this.apContainer.innerHTML="",this.counter=0,this.letters=[]}},{key:"setWord",value:function(e){this.reset();var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(e)),i=void 0,n=void 0,r=void 0,a=!0,o=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var h=u.value;(i=document.createElement("div")).classList.add("animated-popout-item"),n=document.createElement("span"),r=document.createTextNode(h),n.appendChild(r),i.appendChild(n),i.style.transform="translateX("+window.innerWidth+"px)",this.apContainer.appendChild(i),this.letters.push(i)}}catch(e){o=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw s}}this.go()}},{key:"createKeyframe",value:function(){var e=document.createElement("style");e.type="text/css";var t="\n\t\t\t@keyframes letterIn {\n\t\t\t\t0%\n\t\t\t\t{\n\t\t\t\t\ttransform: translateX("+window.innerWidth+"px);\n\t\t\t\t}\n\t\t\t\t100%\n\t\t\t\t{\n\t\t\t\t\ttransform:translateX(-"+window.innerWidth+"px);\n\t\t\t\t}\n\t\t\t}\n\t\t";e.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(e)}},{key:"go",value:function(){var e=this;if(o.default.removePreload(),0!=this.letters.length){o.default.zOpaqueIn(this.apContainer);var t=setInterval((function(){if(e.counter==e.letters.length)return clearInterval(t),void setTimeout((function(){o.default.zOpaqueOut(e.apContainer)}),e.timeout);e.letters[e.counter].classList.add("go"),e.counter+=1}),this.timeoutPerLetter)}else console.log("No Word Set")}}]),e}();t.default=u},93:function(e,t,i){},94:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(10),o=(n=a)&&n.__esModule?n:{default:n};i(95);var s=o.default.getEasingFunctions(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rrsl=document.querySelector(t),this.rrsl&&(this.buildDom(),this.counter=0,this.speed=12,this.timeBeforeChoiceMade=1e4,this.spin=this.spin.bind(this),this.stopSpin=this.stopSpin.bind(this),this.stopNode.addEventListener("click",this.stopSpin))}return r(e,[{key:"buildDom",value:function(){this.rrslBackground=document.createElement("div"),this.rrslBackground.classList.add("rrsl-background"),this.rrslContainer=document.createElement("div"),this.rrslContainer.classList.add("rrsl-container"),this.rrslBackground.appendChild(this.rrslContainer),this.rrsl.parentNode.appendChild(this.rrslBackground),this.rrslContainer.appendChild(this.rrsl),this.stopNode=document.createElement("div"),this.stopNode.classList.add("rrsl-stopper"),this.stopNode.appendChild(document.createTextNode("Stop")),this.rrslBackground.appendChild(this.stopNode)}},{key:"setOptions",value:function(e){o.default.removePreload(),this.rrsl.innerHTML="";var t=void 0,i=void 0;this.items=[];var n=!0,r=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var l=s.value;(t=document.createElement("div")).classList.add("rrsl-item"),t.setAttribute("data-value",l.returnValue),(i=document.createElement("h4")).appendChild(document.createTextNode(l.displayName)),t.appendChild(i),this.rrsl.appendChild(t),this.items.push(t)}}catch(e){r=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw a}}this.mask=this.items[0].cloneNode(!0),this.rrsl.appendChild(this.mask),this.height=this.rrslContainer.getBoundingClientRect().height,this.maxHeight=(this.items.length+1)*this.height,this.rrsl.style.height=this.maxHeight+"px"}},{key:"easingFunction",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"start";this[n]||(this[n]=performance.now());var r=(performance.now()-this[n])/i,a=s[e](r);return performance.now()-this[n]>i?(delete this[n],t&&(this[t]=!0),1):a}},{key:"stopSpin",value:function(){this.pickingWinner||this.pickWinner()}},{key:"startSpin",value:function(e){var t=this;if(!this.spinning)return this.spinning=!0,this.setOptions(e),this.reset(),this.rrslBackground.classList.add("appear"),this.spin(),this.countdownInterval=setInterval((function(){})),setTimeout((function(){t.winner||t.pickWinner()}),this.timeBeforeChoiceMade),new Promise((function(e,i){t.callback=e}));console.log("already spinning")}},{key:"reset",value:function(){this.pickingWinner=!1,this.stop=!1,this.winner=null,this.currentScroll=null,this.wait=!1}},{key:"pickWinner",value:function(){this.pickingWinner=!0,this.winner=o.default.randomInt(0,this.items.length-1),this.scrollToWinner=this.winner>this.items.length-3?this.winner*this.height:this.maxHeight-this.height}},{key:"spin",value:function(){if(this.stop)return this.rrslBackground.classList.remove("appear"),this.spinning=!1,void this.callback(this.items[this.winner].getAttribute("data-value"));window.requestAnimationFrame(this.spin);if(null==this.winner||this.wait)this.wait=!0,this.rrslContainer.scrollTop+=this.speed,this.rrslContainer.scrollTop>=this.maxHeight-this.height&&(this.wait=!1,this.rrslContainer.scrollTop=0);else{this.currentScroll||(this.currentScroll=this.rrslContainer.scrollTop,this.mask.innerHTML=this.items[this.winner].innerHTML);var e=this.easingFunction("easeOutQuad","stop",3e3);this.rrslContainer.scrollTop=this.currentScroll+(this.scrollToWinner-this.currentScroll)*e}}}]),e}();t.default=u},95:function(e,t,i){},96:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i(97);var a=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,e),this.countUp=document.querySelector(t),this.countUp&&(this.animate=this.animate.bind(this),this.stopAnimation=!1,this.duration=1,this.prevValue=i,this.countUpValue=this.countUp.querySelector(".value"),this.format=new Intl.NumberFormat("en-GB",{style:"decimal",maximumSignificantDigits:3}),this.updateText(i))}return n(e,[{key:"updateText",value:function(e){this.countUpValue.innerText=this.formatNumber(e)}},{key:"formatNumber",value:function(e){return this.format.format(e)}},{key:"to",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.stopAnimation=!1,this.counter=0,this.prevValue=this.newValue||this.prevValue,this.newValue=e<0?0:e,this.increment=Math.abs(this.prevValue-this.newValue)/60/this.duration,this.countUp.classList.add("pulsate"),i)return this.updateText(e),void setTimeout((function(){t.countUp.classList.remove("pulsate")}),1e3);this.animate()}},{key:"animate",value:function(){if(!this.stopAnimation){window.requestAnimationFrame(this.animate);var e=this.prevValue+this.counter;this.prevValue<this.newValue&&e>this.newValue||this.prevValue>this.newValue&&e<this.newValue?(this.countUp.classList.remove("pulsate"),this.updateText(this.newValue),this.stopAnimation=!0):this.updateText(e),this.counter+=this.prevValue<this.newValue?this.increment:-this.increment}}}]),e}();t.default=a},97:function(e,t,i){},98:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i(99);var o=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(a(this,e),this.measureMeter=document.querySelector(t),this.measureMeter){this.numberOfIntervals=i,this.prevValue=r,this.timeout=100,this.createIntervals();var o=!0,s=!1,u=void 0;try{for(var l,h=this.intervals.entries()[Symbol.iterator]();!(o=(l=h.next()).done);o=!0){var c=n(l.value,2),d=c[0],f=c[1];if(d==r)break;f.classList.add("measure-meter-interval-fill")}}catch(e){s=!0,u=e}finally{try{!o&&h.return&&h.return()}finally{if(s)throw u}}}}return r(e,[{key:"createIntervals",value:function(){var e=void 0;this.intervals=[];for(var t=0;t<this.numberOfIntervals;t++)(e=document.createElement("span")).classList.add("measure-meter-interval"),this.measureMeter.appendChild(e),this.intervals.push(e)}},{key:"to",value:function(e){var t=this;if(document.body.classList.contains("preload")&&document.body.classList.remove("preload"),this.prevValue!=e){var i;e<0?0:e,i=e>this.numberOfIntervals?this.numberOfIntervals:e;var n=setInterval((function(){t.prevValue==i||i<0?clearInterval(n):t.prevValue>i?(t.intervals[t.prevValue-1].classList.remove("measure-meter-interval-fill"),t.prevValue-=1):t.prevValue<i&&(t.intervals[t.prevValue].classList.add("measure-meter-interval-fill"),t.prevValue+=1)}),this.timeout)}}}]),e}();t.default=o},99:function(e,t,i){}});
//# sourceMappingURL=fruitMachine.2b2df419.js.map