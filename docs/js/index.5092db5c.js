!function(e){function t(t){for(var r,o,s=t[0],u=t[1],l=t[2],d=0,c=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&c.push(n[o][0]),n[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(h&&h(t);c.length;)c.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],r=!0,s=1;s<i.length;s++){var u=i[s];0!==n[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=i[0]))}return e}var r={},n={0:0},a=[];function o(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=r,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(i,r,function(t){return e[t]}.bind(null,r));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var h=u;a.push([134,1]),i()}({134:function(e,t,i){"use strict";var r,n=i(135),a=((r=n)&&r.__esModule,i(142));i(207),i(394),new a.FruitMachineCore("#fruit-machine-container")},142:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FruitMachineCore=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(39)),o=i(143),s=i(95),u=i(144),l=i(145),h=i(186),d=(x(i(192)),x(i(194))),c=x(i(196)),f=x(i(197)),m=x(i(199)),p=x(i(200)),v=(x(i(47)),x(i(66))),b=x(i(46)),y=x(i(201)),g=x(i(202)),S=x(i(204));function x(e){return e&&e.__esModule?e:{default:e}}t.FruitMachineCore=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return window.addEventListener("load",(function(){i.init(e)})),window.addEventListener("unload",(function(){i.unInit()})),window.addEventListener("resize",(function(){i.onResize()})),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"unInit",value:function(){localStorage.setItem("storedCoins",this.amountOfCoins)}},{key:"init",value:function(e){var t=this;this.container=document.querySelector(e),this.container&&(Object.assign(this,u.Configuration),Object.assign(this,l.FruitMachineData),Object.assign(this,l.FeatureBoardData),this.width=window.innerWidth,this.height=window.innerHeight,this.createVariables(),this.createDynamicVariables(),this.addPlugins(),this.createScene(),this.createCamera(),this.createLights(),this.createFruitMachine(),this.createFeatureBoard(),this.helperTips(),this.createRenderer(),this.featureBoardDevelop&&this.developingFeatureBoard(),this.fruitMachineDevelop&&this.developingFruitMachine(),this.fruitMachineInitAnimationFlag=!this.fruitMachineDevelop&&!this.featureBoardDevelop,this.eventDispatcher(),this.renderer.setAnimationLoop((function(){t.update()})),this.amountOfCoins=localStorage.getItem("storedCoins")?parseInt(localStorage.getItem("storedCoins")):this.startingCoins,document.querySelector(".loading").remove())}},{key:"onResize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}},{key:"helperTips",value:function(){var e=this;if(this.enableHelperTips){new S.default("[helper-tip]",{content:function(e){var t=e.getAttribute("data-helper-tip-content-id");return document.getElementById(t)},interactive:!0,placement:"auto",trigger:"click"});var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(document.querySelectorAll(".helper-tip"))).map((function(e){return e.id}));document.getElementById("helper-tip-toggler").addEventListener("click",(function(i){i.target.classList.toggle("active"),e.showDOMelements(i.target.classList.contains("active"),t)}))}}},{key:"showDOMelements",value:function(e,t){var i=!0,r=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value,u=document.getElementById(s);e&&u.classList.remove("dom-element-hide"),!e&&u.classList.add("dom-element-hide")}}catch(e){r=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw n}}}},{key:"checkAndApplyHelperTip",value:function(e,t){if(this.enableHelperTips){var i=document.getElementById(t);i&&(i=new s.CSS2DObject(i),e.add(i))}}},{key:"assignVariables",value:function(e){var t=this;e.falses&&e.falses.map((function(e){t[e]=!1})),e.zeros&&e.zeros.map((function(e){t[e]=0})),e.arrays&&e.arrays.map((function(e){t[e]=[]})),e.threeGroups&&e.threeGroups.map((function(e){t[e]=new a.Group}))}},{key:"createVariables",value:function(){this.assignVariables({falses:["hasCollected","reelStrikeStopFlag","reelStrikeFlag","featureBoardInitAnimationFlag","fruitMachineInitAnimationFlag","numberReelSpinFlag","hasFeatureFlag","stoppaReelFlag","hasWonFlag","spinReelsFlag","nudgeReelFlag","flashButtonsFlag","rollDiceFlag","rotateFeatureBoardCubeFlag","moveInFlag","moveOutFlag","hasHolds2","hasBonus","numberTrailHeld"],zeros:["spinTimeoutCounter","timeoutPerCubeCounter","numberOfIcons","numberOfHearts","amountOfReelStrikes1","amountOfNudges1","timeoutCounter","winValue","reelStrikeCount1","nudgeCount1","coinCount1","streakStrengthCount1","currentNumberIndex"],arrays:["iconsArray","heartsArray","currentFruits","currentSpinValues","nextSpinValues","reels","reelFruits","reelControlButtons","numberReelFaces","outerCubes","innerCubes","dice"],threeGroups:["fbGeometryGroup","fbPersistentZGroup","fbCubesGroup"]}),this.flashOpacityCounter=1,this.fruitMachineInitAnimationData={reelFaces:[],reelEdges:[],buttons:[],numberReel:[]},this.nudgeReelCounter=new Array(this.numberOfReels).fill(0),this.reelHeldCounter=new Array(this.numberOfReels).fill(0),this.enableNumbers||(this.bonuses=this.bonuses.filter((function(e){return"bonusNumbersInView"!=e.functionToRun}))),this.reelYPos=8.5,this.numberOfNumbers=this.numbers.length,this.numberOfFruits=this.fruits.length>5?this.fruits.length:5,this.enableBonus&&(this.numberOfFruits+=1),this.oneRotation=360/this.numberOfFruits,this.spinLength=v.default.toRadians(360*this.numberOfFullRotations),this.spinMoveBackDegrees=v.default.toRadians(this.degreesToMoveBackBeforeSpinning),this.spinDuration=.92*this.spinReelsDuration,this.spinMoveBackDuration=.08*this.spinReelsDuration,this.zoomThroughReelsZ=this.reelSize*(this.zoomThroughReelsZPercentage/100),this.zoomThroughReelsFinishX=this.numberOfReels*this.reelWidth+(this.numberOfReels-1*this.reelSpacing)+this.zoomThroughReelsXGap,this.zoomThroughReelsStartX=-this.zoomThroughReelsFinishX,this.zoomThroughReelsStep1Duration=.25*this.winAnimationDuration,this.zoomThroughReelsStep2Duration=.5*this.winAnimationDuration,this.zoomThroughReelsStep3Duration=.25*this.winAnimationDuration,this.winSpinLength=v.default.toRadians(720),this.reelStrikeDataInitial={verticalCounter:0,horizontalCounter:0,timeoutCounter:0,direction:"fwd"},this.reelStrikeData={},Object.assign(this.reelStrikeData,this.reelStrikeDataInitial),this.rollEvenOddDegrees=v.default.toRadians(this.rollEvenOddSpeed),this.fbCameraDistance=40,this.outerBoardCubeSpacing=this.cubeSize+2.5,this.innerBoardCubeSpacing=this.cubeSize+4,this.innerBoardDistance=50,this.innerBoardInactiveOpacity=.1,this.currentBoard="outer",this.cubeLightPosition=new a.Vector3,this.diceSpinLength=v.default.toRadians(360*this.diceSpinFullRotations),this.fbDOMElements=[{domID:"feature-board-nudge-count-container",position:new a.Vector2(-8,10),helperTipID:"helper-tip-fb-nudge-counter"},{domID:"feature-board-reel-strike-count-container",position:new a.Vector2(0,10),helperTipID:"helper-tip-fb-reel-strike-counter"},{domID:"feature-board-coin-count-container",position:new a.Vector2(8,10),helperTipID:"helper-tip-fb-coin-counter"},{domID:"feature-board-streak-meter-container",position:new a.Vector2(0,6),helperTipID:"helper-tip-fb-streak-meter"},{domID:"feature-board-heart1-container",position:new a.Vector2(-9,-9.5),helperTipID:"helper-tip-fb-heart-counter"},{domID:"feature-board-heart2-container",position:new a.Vector2(-6,-6)},{domID:"feature-board-heart3-container",position:new a.Vector2(-3,-9.5)},{domID:"feature-board-icon1-container",position:new a.Vector2(3,-9.5),helperTipID:"helper-tip-fb-icon-counter"},{domID:"feature-board-icon2-container",position:new a.Vector2(6,-6)},{domID:"feature-board-icon3-container",position:new a.Vector2(9,-9.5)}],this.collectables=[{domID:"feature-board-streak-meter-container",variable:"streakStrengthCount",text:"Streak",fmMethodToCall:"streak"},{domID:"feature-board-nudge-count-container",variable:"nudgeCount",text:"Nudges",fmLinkVariable:"amountOfNudges"},{domID:"feature-board-reel-strike-count-container",variable:"reelStrikeCount",text:"Reel Strikes",fmLinkVariable:"amountOfReelStrikes",fmMethodToCall:"reelStrikes"},{domID:"feature-board-coin-count-container",variable:"coinCount",text:"Coins",fmLinkVariable:"amountOfCoins"}],this.availableForMultiAdd=["add-heart","add-icon","add-money","add-reel-strikes","add-streak-strength","add-nudges"],this.maxNumberOfIcons=3,this.initialAnimationConfigurables={reelEdgeOffset:500,reelFaceOffset:800,amountOfSpin:v.default.toRadians(720),cameraX:100,cameraZ:40,timeoutPerCube:10},this.cameraPositionDefault=new a.Vector3(-10,27,55),this.featureCameraPositionDefault=new a.Vector3(this.zoomThroughReelsFinishX,this.reelYPos,0),this.raycaster=new a.Raycaster,this.mouse=new a.Vector2}},{key:"createDynamicVariables",value:function(){Object.defineProperty(this,"amountOfCoins",{get:function(){return this.amountOfCoins1},set:function(e){this.amountOfCoins1=e,f.default.switch("coins",e)}}),Object.defineProperty(this,"amountOfReelStrikes",{get:function(){return this.amountOfReelStrikes1},set:function(e){if(this.amountOfReelStrikes1=e,0==e)this.rwxNoticeBox.close();else{var t=1==e?"Strike":"Strikes";this.rwxNoticeBox.setValue(e+" Reel "+t,0==e)}}}),Object.defineProperty(this,"amountOfNudges",{get:function(){return this.amountOfNudges1},set:function(e){if(this.amountOfNudges1=e,0==e)this.rwxNoticeBox.close(),this.flashButtonsReset();else{this.flashButtonsFlag=!0;var t=1==e?"Nudge":"Nudges";this.reverseNudge&&(t="Reverse "+t),this.rwxNoticeBox.setValue(e+" "+t,0==e)}}}),Object.defineProperty(this,"hasHolds",{get:function(){return this.hasHolds2},set:function(e){if(e){this.flashButtonsFlag=!0;var t=this.hasHolds2&&!e?"":"hold";this.hasHolds2=e,this.rwxNoticeBox.setValue(t)}else this.rwxNoticeBox.close(),this.flashButtonsReset()}}),Object.defineProperty(this,"streakStrengthCount",{get:function(){return this.streakStrengthCount1},set:function(e){this.streakStrengthCount1=e,this.streakMeter.to(e)}}),Object.defineProperty(this,"reelStrikeCount",{get:function(){return this.reelStrikeCount1},set:function(e){this.reelStrikeCount1=e,f.default.switch("feature-board-reel-strike-count",e,!0)}}),Object.defineProperty(this,"nudgeCount",{get:function(){return this.nudgeCount1},set:function(e){this.nudgeCount1=e,f.default.switch("feature-board-nudge-count",e,!0)}}),Object.defineProperty(this,"coinCount",{get:function(){return this.coinCount1},set:function(e){this.coinCount1=e<0?0:e,f.default.switch("feature-board-coin-count",e)}})}},{key:"addPlugins",value:function(){this.rwxNoticeBox=m.default,this.rwxNoticeBox.setConfig({position:"bottom-left",delay:2}),this.rwxDuoSelector=p.default,this.rwxSlideTicker=d.default,this.rwxTombola=c.default,this.streakMeter=new y.default("#feature-board-streak-meter",10),this.numberPicker=new g.default("#number-picker")}},{key:"createScene",value:function(){this.scene=new a.Scene,this.scene.background=new a.Color(this.backgroundColor)}},{key:"createCamera",value:function(){this.fieldOfView=50;var e=this.width/this.height;this.camera=new a.PerspectiveCamera(this.fieldOfView,e,1,800),this.camera.position.set(this.cameraPositionDefault.x,this.cameraPositionDefault.y,this.cameraPositionDefault.z)}},{key:"createLights",value:function(){o.RectAreaLightUniformsLib.init(),this.reelIllumination=new a.RectAreaLight(this.reelIlluminationColor,4,2*this.fieldOfView,this.reelSize),this.reelIllumination.position.set(0,10,60),this.scene.add(this.reelIllumination),this.sceneLight=new a.HemisphereLight(this.reelsColor,16777215,3),this.sceneLight.position.set(0,50,0),this.scene.add(this.sceneLight),this.featureBoardLight=new a.DirectionalLight(16777215,0),this.featureBoardLight.position.set(this.featureCameraPositionDefault.x,this.featureCameraPositionDefault.y,this.featureCameraPositionDefault.z),this.scene.add(this.featureBoardLight),this.cubeLight=new a.PointLight(16777215,0,10),this.scene.add(this.cubeLight)}},{key:"createRenderer",value:function(){this.renderer=new a.WebGLRenderer({antialias:!0,sortObjects:!1}),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.physicallyCorrectLights=!0,this.container.appendChild(this.renderer.domElement),this.labelRenderer=new s.CSS2DRenderer,this.labelRenderer.setSize(this.width,this.height),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top=0,this.container.appendChild(this.labelRenderer.domElement)}},{key:"eventDispatcher",value:function(){var e=this;document.body.addEventListener("keyup",(function(t){e.featureActive?(13==t.keyCode&&e.collect(),32==t.keyCode&&!e.hilo&&e.rollDiceEvent("ROLL"),38==t.keyCode&&e.ableToGambleHI&&e.rollDiceEvent("GAMBLEHI"),40==t.keyCode&&e.ableToGambleLO&&e.rollDiceEvent("GAMBLELO")):32==t.keyCode&&!e.streakRunning&&e.spinReelsEvent()})),this.container.addEventListener("mouseup",(function(t){if(e.rollEvenOddFlag)e.rollEvenOddStop();else if(e.stoppaOrTaxiRunning)e.stopStoppaOrTaxi();else if(e.reelStrikeFlag)e.stopReelStrike();else if(e.hasNudges()||e.hasHolds||e.stoppaReelFlag){e.mouse.x=t.clientX/e.width*2-1,e.mouse.y=-t.clientY/e.height*2+1,e.raycaster.setFromCamera(e.mouse,e.camera);var i=e.raycaster.intersectObjects(e.reelControlButtons);i.length>0&&(e.hasNudges()&&e.nudgeReelEvent(i[0].object.reelIndex),e.hasHolds&&e.holdReelEvent(i[0].object.reelIndex),e.stoppaReelFlag&&e.stoppaReelEvent(i[0].object.reelIndex))}}))}},{key:"setTombola",value:function(e,t){var i=this;this.rwxTombola.setValues(e).then((function(e){i[t]=!1;try{i[e]()}catch(t){console.log(t),console.log(e+" method not defined on the fruitMachine context.")}}))}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera),this.labelRenderer.render(this.scene,this.camera)}},{key:"update",value:function(){this.fruitMachineInitAnimationFlag&&this.fruitMachineInitAnimation(),this.featureBoardInitAnimationFlag&&this.featureBoardInitAnimation(),this.spinReelsFlag&&this.spinReels(),this.nudgeReelFlag&&this.nudgeReel(),this.stoppaReelFlag&&this.stoppaReel(),this.reelStrikeFlag&&this.reelStrike(),this.flashButtonsFlag&&this.flashButtons(),this.numberReelSpinFlag&&this.spinNumberReel(),this.hasWonFlag&&!this.spinReelsFlag&&!this.nudgeReelFlag&&this.winAnimation(),this.hasFeatureFlag&&!this.nudgeReelFlag&&!this.spinReelsFlag&&!this.numberReelSpinFlag&&this.toFeatureAnimation(),this.rollDiceFlag&&this.rollDice(),this.endFeatureFlag&&this.toFruitMachineAnimation(),this.rotateFeatureBoardCubeFlag&&this.rotateFeatureBoardCube(),this.moveInFlag&&this.moveIn(),this.moveOutFlag&&this.moveOut(),this.rollEvenOddFlag&&this.rollEvenOdd(),this.featureActive||this.hasFeatureFlag||this.camera.lookAt(0,0,0),this.featureBoardDevelop&&this.camera.lookAt(this.featureCameraPositionDefault.x+this.fbCameraDistance+this.innerBoardDistance,this.featureCameraPositionDefault.y,this.featureCameraPositionDefault.z),this.render()}},{key:"developingFeatureBoard",value:function(){this.showDOMelements(!0,this.fbDOMElements.map((function(e){return e.domID}))),this.camera.position.set(this.featureCameraPositionDefault.x,this.featureCameraPositionDefault.y,this.featureCameraPositionDefault.z),this.showDOMelements(!1,["coins"]),this.featureActive=!0,this.switchLights("feature-board"),this.featureBoardLight.target=this.dice[0];var e=!0,t=!1,i=void 0;try{for(var r,n=this.outerCubes[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var a=r.value;a.cube.rotation.x=v.default.toRadians(0),a.cube.material.map((function(e){return e.opacity=1}))}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}}},{key:"developingFruitMachine",value:function(){var e=!0,t=!1,i=void 0;try{for(var n,a=this.fruitMachineInitAnimationData.reelFaces.entries()[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var o=n.value,s=r(o,2),u=(s[0],s[1]);u.face.position.set(u.finish.x,u.finish.y,u.finish.z),u.face.rotation.y=u.rotation}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}if(this.enableNumbers){var l=!0,h=!1,d=void 0;try{for(var c,f=this.fruitMachineInitAnimationData.numberReel[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var m=c.value;m.reel.position.y=0,m.reel.position.z=m.finish.z}}catch(e){h=!0,d=e}finally{try{!l&&f.return&&f.return()}finally{if(h)throw d}}}var p=!0,v=!1,b=void 0;try{for(var y,g=this.fruitMachineInitAnimationData.buttons[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var S=y.value;S.button.position.y=S.finishy}}catch(e){v=!0,b=e}finally{try{!p&&g.return&&g.return()}finally{if(v)throw b}}var x=!0,R=!1,C=void 0;try{for(var w,O=this.fruitMachineInitAnimationData.reelEdges[Symbol.iterator]();!(x=(w=O.next()).done);x=!0){var T=w.value;T.edge.position.y=T.finishy,T.outline.position.y=T.finishy}}catch(e){R=!0,C=e}finally{try{!x&&O.return&&O.return()}finally{if(R)throw C}}}},{key:"switchLights",value:function(e){"feature-board"==e?(this.reelIllumination.intensity=0,this.featureBoardLight.intensity=1,this.cubeLight.intensity=7):"fruit-machine"==e&&(this.cubeLight.intensity=0,this.featureBoardLight.intensity=0,this.reelIllumination.intensity=4)}},{key:"afterFeatureBoard",value:function(){var e=this;this.showDOMelements(!0,["coins"]),this.featureActive=!1,this.hasCollected&&(this.hasCollected.fmLinkVariable&&(this[this.hasCollected.fmLinkVariable]+=this[this.hasCollected.variable]),this.hasCollected.fmMethodToCall&&this[this.hasCollected.fmMethodToCall](this[this.hasCollected.variable]),this.hasCollected=!1);var t=!0,i=!1,r=void 0;try{for(var n,a=this.outerCubes[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;o.cube.rotation.x=v.default.toRadians(-90),o.cube.material.map((function(e){return e.opacity=0}))}}catch(e){i=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw r}}this.assignVariables({zeros:["timeoutPerCubeCounter","numberOfHearts","numberOfIcons","streakStrengthCount","reelStrikeCount","nudgeCount","coinCount"]}),this.heartsArray.map((function(e){return e.clear()})),this.iconsArray.map((function(e){return e.clear()})),this.fbPersistentZGroup.position.z=0,this.innerCubes.map((function(t){t.cube.material.map((function(t){return t.opacity=e.innerBoardInactiveOpacity}))})),this.currentBoard="outer"}},{key:"toFeatureBoard",value:function(){this.rwxSlideTicker.setValue("Start Feature"),this.hasFeatureFlag=!0,this.resetNumberTrail(),this.showDOMelements(!1,["coins"]),this.featureActive=!0,this.switchLights("feature-board"),this.featureBoardLight.target=this.dice[0]}},{key:"toFeatureAnimation",value:function(){var e=this;if(!this.winSpin){var t=b.default.getEasingValue("easingValueToFeatureWinSpin","easeInCubic",this.winAnimationDuration,(function(){e.winSpin=!0})),i=!0,n=!1,a=void 0;try{for(var o,s=this.reels.entries()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value,l=r(u,2),h=l[0],d=l[1];d.rotation.x=h%2==0?b.default.fromToCalc(this.nextSpinValues[h],this.nextSpinValues[h]-this.winSpinLength,t):b.default.fromToCalc(this.nextSpinValues[h],this.nextSpinValues[h]+this.winSpinLength,t)}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}}if(this.zoomThroughReelsStep1){if(!this.zoomThroughReelsStep2){var c=b.default.fromTo(this.zoomThroughReelsStartX,this.zoomThroughReelsFinishX,"fromToToFeatureWinZTRS2","easeInOutQuad",this.zoomThroughReelsStep2Duration,(function(){e.zoomThroughReelsStep2=!0}));this.camera.position.set(c,this.reelYPos,0)}}else{var f=b.default.getEasingValue("easingValueToFeatureZTRS1","easeOutCubic",this.zoomThroughReelsStep1Duration,(function(){e.zoomThroughReelsStep1=!0}));this.camera.position.set(b.default.fromToCalc(this.cameraPositionDefault.x,this.zoomThroughReelsStartX,f),b.default.fromToCalc(this.cameraPositionDefault.y,this.reelYPos,f),b.default.fromToCalc(this.cameraPositionDefault.z,0,f)),this.camera.lookAt(b.default.fromToCalc(0,this.featureCameraPositionDefault.x+this.fbCameraDistance+this.innerBoardDistance,f),b.default.fromToCalc(0,this.featureCameraPositionDefault.y,f),b.default.fromToCalc(0,this.featureCameraPositionDefault.z,f))}this.winSpin&&this.zoomThroughReelsStep1&&this.zoomThroughReelsStep2&&(this.winSpin=!1,this.winSpinEase=!1,this.zoomThroughReelsStep1=!1,this.zoomThroughReelsStep1Ease=!1,this.zoomThroughReelsStep2=!1,this.zoomThroughReelsStep2Ease=!1,this.featureBoardInitAnimationFlag=!0,this.hasFeatureFlag=!1)}},{key:"toFruitMachineAnimation",value:function(){var e=this;if(this.zoomToDefaultCameraStep1)this.afterFeatureBoard(),this.zoomToDefaultCameraStep1=!1,this.zoomToDefaultCameraStep1Ease=!1,this.endFeatureFlag=!1;else{var t=b.default.getEasingValue("easingValueToFruitMachine","easeInQuart",5e3,(function(){e.zoomToDefaultCameraStep1=!0}));this.cameraPositionDefault=new a.Vector3(-10,27,55);var i="inner"==this.currentBoard?this.innerBoardDistance:0;this.camera.position.set(b.default.fromToCalc(this.featureCameraPositionDefault.x+i,this.cameraPositionDefault.x,t),b.default.fromToCalc(this.featureCameraPositionDefault.y,this.cameraPositionDefault.y,t),b.default.fromToCalc(this.featureCameraPositionDefault.z,this.cameraPositionDefault.z,t)),this.camera.lookAt(b.default.fromToCalc(this.featureCameraPositionDefault.x+this.fbCameraDistance+this.innerBoardDistance,0,t),b.default.fromToCalc(this.featureCameraPositionDefault.y,0,t),b.default.fromToCalc(this.featureCameraPositionDefault.z,0,t))}}}]),t}(h.FruitMachine)},144:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Configuration={reelsColor:255,reelIlluminationColor:16777215,backgroundColor:0,freePlay:!1,startingCoins:1e3,costPerSpin:50,enableHelperTips:!0,numberOfReels:4,reelWidth:10,reelSpacing:5,reelSize:15,reelWinProbability:6,numberOfFullRotations:5,spinTimeout:10,degreesToMoveBackBeforeSpinning:5,spinReelsDuration:2200,zoomThroughReelsXGap:50,zoomThroughReelsZPercentage:80,winAnimationDuration:5e3,winJudderDuration:60,nudgeProbability:4,nudgeDuration:500,holdProbability:4,flashButtonsSpeed:.01,enableBonus:!0,bonusStoppaReelSpeed:.6,bonusStoppaReelIncrement:.7,reelStrikeSpeed:5,streakBounds:50,superStreakBounds:80,megaStreakBounds:100,enableNumbers:!0,numbersBonus:6,numberTrailHeldProbability:3,numberMaximumOnReels:5,numberTrailHeldColor:7794432,numberHighlightColor:0,numberBonusColor:16737792,numberFeatureStartColor:16737792,cubeColor:15752739,diceColor:16777215,numberOfOuterBoardSquares:20,numberOfInnerBoardSquares:16,cubeSize:3.5,diceSize:5,diceSpinDuration:1e3,diceSpinFullRotations:1,diceGambleWinProbability:4,streakStrengthMax:10,moveCubeSpeed:200,stoppaOrTaxiTimeout:1e4,rollEvenOddSpeed:5}},145:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureBoardData=t.FruitMachineData=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(39));var n={numbers:[{value:1,texture:(new r.TextureLoader).load(i(146))},{value:2,texture:(new r.TextureLoader).load(i(147))},{value:3,texture:(new r.TextureLoader).load(i(148))},{value:4,texture:(new r.TextureLoader).load(i(149))},{value:5,texture:(new r.TextureLoader).load(i(150))},{value:6,texture:(new r.TextureLoader).load(i(151))},{value:7,texture:(new r.TextureLoader).load(i(152))},{value:8,texture:(new r.TextureLoader).load(i(153))},{value:9,texture:(new r.TextureLoader).load(i(154))},{value:10,texture:(new r.TextureLoader).load(i(155))},{value:11,texture:(new r.TextureLoader).load(i(156))},{value:12,texture:(new r.TextureLoader).load(i(157))}],fruits:[{name:"cherry",texture:(new r.TextureLoader).load(i(158)),coinValue:50},{name:"strawberry",texture:(new r.TextureLoader).load(i(159)),coinValue:100},{name:"apple",texture:(new r.TextureLoader).load(i(160)),coinValue:150},{name:"orange",texture:(new r.TextureLoader).load(i(161)),coinValue:200},{name:"coconut",texture:(new r.TextureLoader).load(i(162)),coinValue:300},{name:"watermelon",texture:(new r.TextureLoader).load(i(163)),coinValue:500},{name:"rose",texture:(new r.TextureLoader).load(i(164)),coinValue:1e3},{name:"bell",texture:(new r.TextureLoader).load(i(165)),coinValue:2e3},{name:"star",texture:(new r.TextureLoader).load(i(166)),coinValue:3500},{name:"diamond",texture:(new r.TextureLoader).load(i(167)),coinValue:5e3},{name:"gold-coin",texture:(new r.TextureLoader).load(i(168)),coinValue:1e4},{name:"wild",texture:(new r.TextureLoader).load(i(169))}],fruitMachineBonuses:[{displayName:"4 NUDGES",value:"bonusFourNudges"},{displayName:"WIN SPIN",value:"bonusWinSpin"},{displayName:"UNLUCKY",value:"bonusUnlucky"},{displayName:"2 NUDGES",value:"bonusTwoNudges"},{displayName:"STOPPA REEL",value:"bonusStoppaReel"},{displayName:"2 REEL STRIKES",value:"bonusTwoReelStrikes"},{displayName:"3 REVERSE NUDGES",value:"bonusThreeReverseNudges"},{displayName:"START FEATURE",value:"toFeatureBoard"},{displayName:"UNLUCKY",value:"bonusUnlucky"},{displayName:"4 REVERSE NUDGES",value:"bonusFourReverseNudges"},{displayName:"STREAK",value:"bonusStreak"},{displayName:"NUMBERS IN VIEW",value:"bonusNumbersInView"},{displayName:"REEL STRIKE",value:"bonusOneReelStrike"}]},a={diceNumbers:[{value:1,texture:(new r.TextureLoader).load(i(170))},{value:2,texture:(new r.TextureLoader).load(i(171))},{value:3,texture:(new r.TextureLoader).load(i(172))},{value:4,texture:(new r.TextureLoader).load(i(173))},{value:5,texture:(new r.TextureLoader).load(i(174))},{value:6,texture:(new r.TextureLoader).load(i(175))}],cubeTextures:[{name:"game-over",texture:(new r.TextureLoader).load(i(176)),type:"reserved",outerAmountOfSquares:1,innerAmountOfSquares:1,functionToRun:"gameOver"},{name:"mystery",texture:(new r.TextureLoader).load(i(177)),type:"reserved",outerAmountOfSquares:2,innerAmountOfSquares:1,functionToRun:"mystery"},{name:"bonus",texture:(new r.TextureLoader).load(i(178)),type:"reserved",outerAmountOfSquares:2,innerAmountOfSquares:1,functionToRun:"fbBonus"},{name:"arrow",texture:(new r.TextureLoader).load(i(179)),type:"reserved",outerAmountOfSquares:2,innerAmountOfSquares:2,functionToRun:"moveToBoard"},{name:"add-heart",texture:(new r.TextureLoader).load(i(96)),type:"reserved",outerAmountOfSquares:1,innerAmountOfSquares:1,functionToRun:"addHeart"},{name:"add-icon",texture:(new r.TextureLoader).load(i(97)),type:"reserved",outerAmountOfSquares:2,innerAmountOfSquares:1,functionToRun:"addIcon"},{name:"multi-add",texture:(new r.TextureLoader).load(i(180)),type:"reserved",outerAmountOfSquares:1,innerAmountOfSquares:1,functionToRun:"multiAdd"},{name:"add-streak-strength",texture:(new r.TextureLoader).load(i(181)),type:"reserved",outerAmountOfSquares:1,innerAmountOfSquares:1,functionToRun:"addFeatureBoardValues",functionToRunValues:{variable:"streakStrengthCount",values:[1,2],direction:"add",text:"Streak Strength"}},{name:"minus-money",texture:(new r.TextureLoader).load(i(182)),type:"reserved",functionToRun:"addFeatureBoardValues",functionToRunValues:{variable:"coinCount",values:[50,100,200,250,500,"numberPicker"],direction:"minus",text:"Coin"},outerAmountOfSquares:2,innerAmountOfSquares:0},{name:"add-money",texture:(new r.TextureLoader).load(i(183)),type:"random",functionToRun:"addFeatureBoardValues",functionToRunValues:{variable:"coinCount",values:[100,200,500,750,1e3,"numberPicker"],direction:"add",text:"Coin"}},{name:"add-reel-strikes",texture:(new r.TextureLoader).load(i(184)),type:"random",functionToRun:"addFeatureBoardValues",functionToRunValues:{variable:"reelStrikeCount",values:[1,2],direction:"add",text:"Reel Strike"}},{name:"add-nudges",texture:(new r.TextureLoader).load(i(185)),type:"random",functionToRun:"addFeatureBoardValues",functionToRunValues:{variable:"nudgeCount",values:[1,2,3,4],direction:"add",text:"Nudge"}}],diceLayouts:{1:[[0,1]],2:[[2,0]],3:[[2,1],[3,0],[0,3]],4:[[3,1],[4,0],[0,4]],5:[[2,3],[4,1],[5,0],[0,5]],6:[[2,4],[3,3],[5,1],[6,0],[0,6]],7:[[2,5],[3,4],[4,3],[6,1]],8:[[2,6],[3,5],[4,4],[5,3]],9:[[3,6],[4,5],[5,4],[6,3]],10:[[4,6],[5,5],[6,4]],11:[[5,6],[6,5]],12:[[6,6]]},featureBoardBonuses:[{displayName:"Taxi",value:"taxi"},{displayName:"Multi Add",value:"multiAdd"},{displayName:"UNLUCKY",value:"bonusUnlucky"},{displayName:"Extra Heart",value:"addHeart"},{displayName:"Extra Icon",value:"addIcon"},{displayName:"Move In",value:"moveToBoard"}],featureBoardMystery:[{displayName:"Game Over",value:"gameOver"},{displayName:"Stoppa",value:"stoppa"},{displayName:"Lose with cashpot",value:"loseWithCashpot"},{displayName:"HI/LO Continue",value:"hiloContinue"},{displayName:"Continue",value:"continue"},{displayName:"Roll Even",value:"rollEven"},{displayName:"Roll Odd",value:"rollOdd"},{displayName:"Move In/Out",value:"moveToBoard"}]};t.FruitMachineData=n,t.FeatureBoardData=a},146:function(e,t,i){e.exports=i.p+"fruitMachineAssets/one.png"},147:function(e,t,i){e.exports=i.p+"fruitMachineAssets/two.png"},148:function(e,t,i){e.exports=i.p+"fruitMachineAssets/three.png"},149:function(e,t,i){e.exports=i.p+"fruitMachineAssets/four.png"},150:function(e,t,i){e.exports=i.p+"fruitMachineAssets/five.png"},151:function(e,t,i){e.exports=i.p+"fruitMachineAssets/six.png"},152:function(e,t,i){e.exports=i.p+"fruitMachineAssets/seven.png"},153:function(e,t,i){e.exports=i.p+"fruitMachineAssets/eight.png"},154:function(e,t,i){e.exports=i.p+"fruitMachineAssets/nine.png"},155:function(e,t,i){e.exports=i.p+"fruitMachineAssets/ten.png"},156:function(e,t,i){e.exports=i.p+"fruitMachineAssets/eleven.png"},157:function(e,t,i){e.exports=i.p+"fruitMachineAssets/twelve.png"},158:function(e,t,i){e.exports=i.p+"fruitMachineAssets/cherry.png"},159:function(e,t,i){e.exports=i.p+"fruitMachineAssets/strawberry.png"},160:function(e,t,i){e.exports=i.p+"fruitMachineAssets/apple.png"},161:function(e,t,i){e.exports=i.p+"fruitMachineAssets/orange.png"},162:function(e,t,i){e.exports=i.p+"fruitMachineAssets/coconut.png"},163:function(e,t,i){e.exports=i.p+"fruitMachineAssets/watermelon.png"},164:function(e,t,i){e.exports=i.p+"fruitMachineAssets/rose.png"},165:function(e,t,i){e.exports=i.p+"fruitMachineAssets/bell.png"},166:function(e,t,i){e.exports=i.p+"fruitMachineAssets/star.png"},167:function(e,t,i){e.exports=i.p+"fruitMachineAssets/diamond.png"},168:function(e,t,i){e.exports=i.p+"fruitMachineAssets/gold-coin.png"},169:function(e,t,i){e.exports=i.p+"fruitMachineAssets/wild.png"},170:function(e,t,i){e.exports=i.p+"fruitMachineAssets/dice-one.png"},171:function(e,t,i){e.exports=i.p+"fruitMachineAssets/dice-two.png"},172:function(e,t,i){e.exports=i.p+"fruitMachineAssets/dice-three.png"},173:function(e,t,i){e.exports=i.p+"fruitMachineAssets/dice-four.png"},174:function(e,t,i){e.exports=i.p+"fruitMachineAssets/dice-five.png"},175:function(e,t,i){e.exports=i.p+"fruitMachineAssets/dice-six.png"},176:function(e,t,i){e.exports=i.p+"fruitMachineAssets/game-over.png"},177:function(e,t,i){e.exports=i.p+"fruitMachineAssets/mystery.png"},178:function(e,t,i){e.exports=i.p+"fruitMachineAssets/fbBonus.png"},179:function(e,t,i){e.exports=i.p+"fruitMachineAssets/arrow.png"},180:function(e,t,i){e.exports=i.p+"fruitMachineAssets/multi-add.png"},181:function(e,t,i){e.exports=i.p+"fruitMachineAssets/plus-streak.png"},182:function(e,t,i){e.exports=i.p+"fruitMachineAssets/minus-money.png"},183:function(e,t,i){e.exports=i.p+"fruitMachineAssets/plus-money.png"},184:function(e,t,i){e.exports=i.p+"fruitMachineAssets/plus-strike.png"},185:function(e,t,i){e.exports=i.p+"fruitMachineAssets/plus-nudge.png"},186:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FruitMachine=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(39)),o=i(187),s=d(i(47)),u=d(i(64)),l=d(i(66)),h=d(i(46));function d(e){return e&&e.__esModule?e:{default:e}}t.FruitMachine=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.fruitMachineDevelop=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"createFruitMachine",value:function(){this.createReels(),this.enableNumbers&&this.createNumberReel()}},{key:"createButton",value:function(e,t,i){var r=new a.Shape;r.moveTo(0,0),r.lineTo(0,6),r.lineTo(e,6),r.lineTo(e,0),r.lineTo(0,0);var n=new a.ExtrudeBufferGeometry(r,{steps:1,depth:.5,bevelEnabled:!0,bevelThickness:.5,bevelSize:.8,bevelOffset:0,bevelSegments:1}),o=new a.MeshStandardMaterial({color:16777215,transparent:!0,opacity:.5}),s=new a.Mesh(n,o),u=-(this.reelSize-e-3);this.buttonYPosition=u;var h=new a.Vector3(t-e/2,-100,this.reelSize);s.position.set(h.x,h.y,h.z),this.fruitMachineInitAnimationData.buttons.push({button:s,starty:h.y,finishy:u}),s.rotation.x=l.default.toRadians(90),s.reelIndex=i,this.reelControlButtons.push(s),this.scene.add(s),0==i&&this.checkAndApplyHelperTip(s,"helper-tip-buttons")}},{key:"createNumberReel",value:function(){var e=void 0,t=void 0,r=void 0,n=void 0,o=void 0,s=void 0,h=void 0,d=void 0,c=void 0,f=void 0,m=void 0,p=u.default.safeCloneArrayOfObjects(this.numbers);(p=[{value:0,texture:(new a.TextureLoader).load(i(190))}].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(p))).reverse();var v=this.reelSize/4,b=this.reelWidth/4;this.numberReelOneRotation=360/p.length;var y=this.numberReelOneRotation/2,g=new a.Group,S=2*v*Math.sin(Math.PI/p.length),x=2*Math.PI/p.length,R=new a.CylinderBufferGeometry(v,v,.3,p.length),C=new a.MeshStandardMaterial({color:16777215,transparent:!0,opacity:.2,flatShading:!0}),w=new a.Mesh(R,C),O=w.clone();w.position.y=-b/2,O.position.y=b/2;for(var T=0;T<p.length;T++){var k=T==p.length-1?this.numberHighlightColor:16777215;T==this.numbersBonus&&(k=this.numberBonusColor),0==T&&(k=this.numberFeatureStartColor),d=new a.Group,e=v*Math.sin(T*x),t=v*Math.cos(T*x),r=v*Math.sin((T+1)*x),n=v*Math.cos((T+1)*x),o=new a.BoxBufferGeometry(S,b,.1),(s=new a.MeshStandardMaterial({color:k,transparent:!0,opacity:.6,flatShading:!0})).polygonOffset=!0,s.polygonOffsetFactor=.1,(h=new a.Mesh(o,s)).renderOrder=0,d.add(h),p[T].texture&&(c=new a.BoxBufferGeometry(S/2,b/2,.1),f=new a.MeshStandardMaterial({transparent:!0,map:p[T].texture}),(m=new a.Mesh(c,f)).renderOrder=1,d.add(m)),d.position.x=(e+r)/2,d.position.z=(t+n)/2,d.rotation.y=l.default.toRadians(y+T*this.numberReelOneRotation),this.numberReelFaces.push(h),g.add(d)}var F=new a.Vector3(8,0,32),I=new a.Vector3(8,-100,50);g.position.set(I.x,I.y,I.z),this.fruitMachineInitAnimationData.numberReel.push({reel:g,start:I,finish:F}),g.rotation.x=l.default.toRadians(-47.5),this.numberReel=g,this.scene.add(g),this.checkAndApplyHelperTip(g,"helper-tip-number-reel")}},{key:"createReels",value:function(){for(var e=void 0,t=void 0,r=void 0,n=void 0,o=void 0,h=void 0,d=void 0,c=void 0,f=void 0,m=void 0,p=void 0,v=void 0,b=void 0,y=void 0,g=void 0,S=void 0,x=void 0,R=void 0,C=void 0,w=void 0,O=void 0,T=void 0,k=void 0,F=void 0,I=void 0,B=void 0,D=void 0,M=void 0,A=void 0,N=void 0,L=2*this.reelSize*Math.sin(Math.PI/this.numberOfFruits),P=2*Math.PI/this.numberOfFruits,V=this.oneRotation/2,E=-(this.numberOfReels-1)/2*(this.reelWidth+this.reelSpacing),z=s.default.randomInt(0,this.numberOfReels-1),H=0;H<this.numberOfReels;H++){C=new a.Group;var G=u.default.safeCloneArrayOfObjects(this.fruits);if(this.enableNumbers)for(var j=0;j<s.default.randomInt(0,(this.numberOfFruits-1)/2);j++)G[j].number=this.numbers[s.default.randomInt(0,this.numberMaximumOnReels-1)];if(this.enableBonus)if(H==z)G.push({name:"bonus",texture:(new a.TextureLoader).load(i(191))});else{var W=u.default.safeCloneObject(this.fruits[s.default.randomInt(0,this.fruits.length-1)]);G.push(W)}u.default.shuffleArray(G),this.reelFruits.push(G);for(var _=0;_<this.numberOfFruits;_++){if(w=new a.Group,O=this.reelSize*Math.sin(_*P),T=this.reelSize*Math.cos(_*P),k=this.reelSize*Math.sin((_+1)*P),F=this.reelSize*Math.cos((_+1)*P),I=this.initialAnimationConfigurables.reelFaceOffset*Math.sin(_*P),B=this.initialAnimationConfigurables.reelFaceOffset*Math.cos(_*P),D=this.initialAnimationConfigurables.reelFaceOffset*Math.sin((_+1)*P),M=this.initialAnimationConfigurables.reelFaceOffset*Math.cos((_+1)*P),n=new a.BoxBufferGeometry(L,this.reelWidth,.1),(o=new a.MeshStandardMaterial({color:16777215,transparent:!0,opacity:.5,flatShading:!0})).polygonOffset=!0,o.polygonOffsetFactor=.1,(h=new a.Mesh(n,o)).renderOrder=0,w.add(h),G[_]&&G[_].texture){var q="wild"==G[_].name||"bonus"==G[_].name?1.2:2;f=new a.BoxBufferGeometry(L/q,this.reelWidth/q,.1),m=new a.MeshStandardMaterial({transparent:!0,map:G[_].texture}),(p=new a.Mesh(f,m)).rotation.z=l.default.toRadians(-90),p.renderOrder=1,w.add(p)}G[_]&&void 0!==G[_].number&&(e=new a.BoxBufferGeometry(1.5,1.5,.1),t=new a.MeshStandardMaterial({transparent:!0,map:G[_].number.texture}),(r=new a.Mesh(e,t)).renderOrder=2,r.position.y=-(this.reelWidth/2-1.5),r.position.x=-(L/2-1.5),r.rotation.z=l.default.toRadians(-90),w.add(r)),d=new a.EdgesGeometry(n),c=new a.LineSegments(d,new a.LineBasicMaterial({color:16777215})),w.add(c),A=new a.Vector3((I+D)/2,0,(B+M)/2),N=new a.Vector3((O+k)/2,0,(T+F)/2),w.position.set(A.x,A.y,A.z),this.fruitMachineInitAnimationData.reelFaces.push({start:A,finish:N,face:w,timeout:10*_,rotation:l.default.toRadians(V+_*this.oneRotation)}),C.add(w)}v=new a.CylinderBufferGeometry(this.reelSize,this.reelSize,.3,this.numberOfFruits),b=new a.MeshStandardMaterial({color:16777215,transparent:!0,opacity:.2,flatShading:!0}),g=(y=new a.Mesh(v,b)).clone(),S=new a.EdgesGeometry(v),R=(x=new a.LineSegments(S,new a.LineBasicMaterial({color:16777215}))).clone(),y.position.y=-this.reelWidth/2-this.initialAnimationConfigurables.reelEdgeOffset,x.position.y=-this.reelWidth/2-this.initialAnimationConfigurables.reelEdgeOffset,this.fruitMachineInitAnimationData.reelEdges.push({edge:y,outline:x,finishy:-this.reelWidth/2,starty:-this.reelWidth/2-this.initialAnimationConfigurables.reelEdgeOffset}),C.add(y),C.add(x),g.position.y=this.reelWidth/2+this.initialAnimationConfigurables.reelEdgeOffset,R.position.y=this.reelWidth/2+this.initialAnimationConfigurables.reelEdgeOffset,this.fruitMachineInitAnimationData.reelEdges.push({edge:g,outline:R,finishy:this.reelWidth/2,starty:this.reelWidth/2+this.initialAnimationConfigurables.reelEdgeOffset}),C.add(g),C.add(R),C.position.y=this.reelYPos,C.position.x=E,C.rotation.z=l.default.toRadians(90),C.rotation.x=this.setReelRotation(H,"spin"),this.reels.push(C),this.scene.add(C),this.createButton(L,E,H),E+=this.reelWidth+this.reelSpacing,0==H&&this.checkAndApplyHelperTip(C,"helper-tip-reels")}}},{key:"reelsHaveNudged",value:function(){(!this.hasNudges()||this.hasWonFlag||this.hasBonus||this.hasFeature)&&(this.amountOfNudges=0,this.nudgeReelCounter=new Array(this.numberOfReels).fill(0),this.reverseNudge=!1,console.log("NO MORE NUDGES")),this.enableNumbers&&this.updateNumberTrail(),this.hasFeature&&this.toFeatureBoard(),!this.freePlay&&this.hasWonFlag&&(this.amountOfCoins+=this.winValue),this.enableBonus&&this.hasBonus&&this.setTombola(this.fruitMachineBonuses,"hasBonus")}},{key:"reelsHaveSpun",value:function(){if(this.streakRunning)return this.hasWonFlag=!1,this.streakFruitIndex==this.streakFruits.length-1?(this.rwxNoticeBox.setValue("That's your lot!",!0),this.streakRunning=!1,void(this.reelsHaveSpunCallback=!0)):(this.spinReelsFlag=!1,this.streakFruitIndex+=1,this.determineWin(),this.freePlay||(this.amountOfCoins+=this.winValue,this.rwxNoticeBox.setValue("Won "+this.winValue+" coins!",!0)),void this.spinReelsEvent(this.streakFruits[this.streakFruitIndex]));this.enableNumbers&&this.updateNumberTrail(),this.hasFeature&&this.toFeatureBoard(),!this.freePlay&&this.hasWonFlag&&(this.amountOfCoins+=this.winValue,this.rwxNoticeBox.setValue("Won "+this.winValue+" coins!",!0)),this.enableBonus&&this.hasBonus&&this.setTombola(this.fruitMachineBonuses,"hasBonus"),this.hasWonFlag||this.hasBonus||this.hasFeature||(this.assignHolds(),this.hasHolds||this.assignNudges()),this.reelHeldCounter=new Array(this.numberOfReels).fill(0)}},{key:"setReelRotation",value:function(e,t){var i=void 0,n=void 0;if("spin"==t||"randomWin"==t)if(1===this.reelHeldCounter[e])n=i=this.currentFruits[e];else{var a="randomWin"==t?0:s.default.randomInt(0,this.reelWinProbability),o=void 0;if(0!=e&&(o=this.reelFruits[e-1][this.currentFruits[e-1]].name),0==a&&0!=e&&"bonus"!=o){var u=!0,h=!1,d=void 0;try{for(var c,f=this.reelFruits[e].entries()[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var m=c.value,p=r(m,2),v=p[0];if(p[1].name==o){i=v;break}}}catch(e){h=!0,d=e}finally{try{!u&&f.return&&f.return()}finally{if(h)throw d}}}else i=s.default.randomInt(0,this.numberOfFruits-1);n=i}else"nudge"==t?this.reverseNudge?(i=0==this.currentFruits[e]?this.numberOfFruits-1:this.currentFruits[e]-1,this.nudgeReelCounter[e]<0?(this.nudgeReelCounter[e]-=1,n=this.nudgeReelCounter[e]):0==this.currentFruits[e]?(n=-1,this.nudgeReelCounter[e]=n):n=i):(i=this.currentFruits[e]==this.numberOfFruits-1?0:this.currentFruits[e]+1,this.nudgeReelCounter[e]>this.numberOfFruits-1?(this.nudgeReelCounter[e]+=1,n=this.nudgeReelCounter[e]):this.currentFruits[e]==this.numberOfFruits-1?(n=this.numberOfFruits,this.nudgeReelCounter[e]=n):n=i):n=i=this.reelFruits[e].findIndex((function(e){return e.name==t}));this.currentFruits[e]=i;var b=l.default.toRadians(this.oneRotation*n);return this.currentSpinValues[e]=this.currentSpinValues.length>0?this.nextSpinValues[e]:b,this.nextSpinValues[e]=b,b}},{key:"calculateStreakWinnersArray",value:function(e){var t=this,i=[],r=[];this.fruits.map((function(e){return e.coinValue&&r.push(e.coinValue)}));r.sort((function(e,t){return e-t}));var n=void 0;"streak"==e?n=s.default.randomInt(3,7):"super"==e?n=s.default.randomInt(4,8):"mega"==e&&(n=s.default.randomInt(5,10));var a=Math.floor(r.length*(this.streakBounds/100)),o=Math.floor(r.length*(this.superStreakBounds/100)),u=Math.floor(r.length*(this.megaStreakBounds/100)),l=void 0;"streak"==e?l=a:"super"==e?l=o:"mega"==e&&(l=u);for(var h=function(e){var n=r[s.default.randomInt(0,l)],a=t.fruits.filter((function(e){return e.coinValue==n}))[0].name;i.push(a)},d=0;d<n;d++)h();return i}},{key:"resetNumberTrail",value:function(){this.reelNumbers=0,this.numberTrailHeld=!1,this.numberTrailHeldFromBonus=!1}},{key:"updateNumberTrail",value:function(){this.spinNumberReelStep1=!1,this.spinNumberReelStep1Ease=!1,this.numberReelPreviousRotation=void 0===this.numberReelPreviousRotation?0:this.numberReelCurrentRotation;var e=this.reelNumbers>=this.numberOfNumbers?this.numberOfNumbers:this.reelNumbers;if(this.numberReelCurrentRotation=l.default.toRadians(e*this.numberReelOneRotation),this.numberReelPreviousRotation!=this.numberReelCurrentRotation){this.numberReelSpinFlag=!0;var t=this.numberTrailHeld||this.numberTrailHeldFromBonus?this.numberTrailHeldColor:16777215,i=!0,n=!1,a=void 0;try{for(var o,s=this.numberReelFaces.entries()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value,h=r(u,2),d=h[0],c=h[1];c.material.color.set(t),0==d?c.material.color.set(this.numberFeatureStartColor):d==this.numberReelFaces.length-1-this.numbersBonus?c.material.color.set(this.numberBonusColor):d==this.numberReelFaces.length-1-e&&c.material.color.set(this.numberHighlightColor)}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}this.numberTrailHeld&&this.rwxNoticeBox.setValue("Number trail held",!0)}}},{key:"hasNudges",value:function(){return this.amountOfNudges>0}},{key:"hasReelStrikes",value:function(){return this.amountOfReelStrikes>0}},{key:"assignNudges",value:function(){s.default.randomInt(0,this.nudgeProbability)>0||(this.amountOfNudges=s.default.randomInt(1,4))}},{key:"assignHolds",value:function(){s.default.randomInt(0,this.holdProbability)>0||(this.numberTrailHeld=!0,this.hasHolds=!0)}},{key:"streak",value:function(e){this.streakRunning=!0,this.streakFruitIndex=0;var t=void 0;e<=this.streakBounds/10?t="streak":e>this.streakBounds/10&&e<=this.superStreakBounds/10?t="super":e>this.superStreakBounds/10<=this.megaStreakBounds/10&&(t="mega"),this.streakFruits=this.calculateStreakWinnersArray(t),this.spinReelsEvent(this.streakFruits[this.streakFruitIndex])}},{key:"reelStrikes",value:function(){this.reelStrikeFlag=!0}},{key:"bonusStreak",value:function(){this.streak(5)}},{key:"bonusWinSpin",value:function(){this.spinReelsEvent("randomWin")}},{key:"bonusStoppaReel",value:function(){this.cachedRotations=this.reels.map((function(e){return e.rotation.x})),this.stoppaReelIndex=0,this.stoppaReelPause=!1,this.bonusStoppaReelSpeedDegrees=l.default.toRadians(this.bonusStoppaReelSpeed),this.stoppaReelFlag=!0}},{key:"bonusNumbersInView",value:function(){this.trailHeld=!0,this.determineNumbers(!0,"all"),this.updateNumberTrail(),this.hasFeature?this.toFeatureBoard():this.hasBonus&&this.setTombola(this.fruitMachineBonuses,"hasBonus")}},{key:"bonusOneReelStrike",value:function(){this.amountOfReelStrikes=1,this.reelStrikes()}},{key:"bonusTwoReelStrikes",value:function(){this.amountOfReelStrikes=3,this.reelStrikes()}},{key:"bonusTwoNudges",value:function(){this.amountOfNudges=2,this.flashButtonsFlag=!0}},{key:"bonusFourNudges",value:function(){this.amountOfNudges=4,this.flashButtonsFlag=!0}},{key:"bonusThreeReverseNudges",value:function(){this.nudgeReelCounter=new Array(this.numberOfReels).fill(0),this.reverseNudge=!0,this.amountOfNudges=3,this.flashButtonsFlag=!0}},{key:"bonusFourReverseNudges",value:function(){this.nudgeReelCounter=new Array(this.numberOfReels).fill(0),this.reverseNudge=!0,this.amountOfNudges=4,this.flashButtonsFlag=!0}},{key:"bonusUnlucky",value:function(){}},{key:"determineBonus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return"all"==t?this.currentFruits.some((function(t,i){return"bonus"==e.reelFruits[i][t].name})):"bonus"==this.reelFruits[t][this.currentFruits[t]].name}},{key:"determineNumbers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments[1],r=0;if(this.currentFruits.map((function(n,a){if(void 0!==e.reelFruits[a][n].number){if(e.numberTrailHeldFromBonus&&i!=a&&"all"!=i)return;if(e.numberTrailHeld&&i!=a&&"all"!=i)return;r+=e.reelFruits[a][n].number.value}if(t){var o=0==n?e.numberOfFruits-1:n-1,s=n==e.numberOfFruits-1?0:n+1;void 0!==e.reelFruits[a][o].number&&(r+=e.reelFruits[a][o].number.value),void 0!==e.reelFruits[a][s].number&&(r+=e.reelFruits[a][s].number.value)}})),this.numberTrailHeld||this.numberTrailHeldFromBonus?this.reelNumbers+=r:this.reelNumbers=r,this.reelNumbers!=this.numbersBonus||this.numberTrailHeldFromBonus||this.hasBonus||(this.hasBonus=!0,this.numberTrailHeld=!0,this.numberTrailHeldFromBonus=!0),this.reelNumbers>=this.numberOfNumbers)return this.hasBonus=!1,void(this.hasFeature=!0);if(!this.numberTrailHeldFromBonus&&"all"==i){var n=s.default.randomInt(0,this.numberTrailHeldProbability);this.numberTrailHeld=0==n}0==this.reelNumbers&&(this.numberTrailHeld=!1)}},{key:"determineFeature",value:function(){var e=this;return this.currentFruits.every((function(t,i){return"wild"==e.reelFruits[i][t].name}))}},{key:"determineWin",value:function(){for(var e=this,t=void 0,i=0;i<this.currentFruits.length;i++)if("wild"!=this.reelFruits[i][this.currentFruits[i]].name&&"bonus"!=this.reelFruits[i][this.currentFruits[i]].name){t=this.reelFruits[i][this.currentFruits[i]].name;break}var r=this.currentFruits.every((function(i,r){return e.reelFruits[r][i].name==t||"wild"==e.reelFruits[r][i].name}));return r&&(this.winValue=this.fruits.filter((function(e){return e.name==t}))[0].coinValue),r}},{key:"determineWinLine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";this.hasFeature=this.determineFeature(),this.hasFeature||(this.hasWonFlag=this.determineWin(),this.hasWonFlag||(this.enableBonus&&(this.hasBonus=this.determineBonus(e)),this.enableNumbers&&this.determineNumbers(!1,e)))}},{key:"holdReelEvent",value:function(e){this.reelHeldCounter[e]=0==this.reelHeldCounter[e]?1:0}},{key:"nudgeReelEvent",value:function(e){this.nudgeReelFlag||this.hasWonFlag||this.spinReelsFlag||this.hasFeatureFlag||this.hasBonus||(this.amountOfNudges-=1,this.reelToNudge=e,this.setReelRotation(this.reelToNudge,"nudge"),this.determineWinLine(e),this.nudgeReelFlag=!0,this.reelsHaveNudged())}},{key:"spinReelsEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.hasHolds&&(this.flashButtonsReset(),this.hasHolds=!1),!(this.spinReelsFlag||this.hasWonFlag||this.nudgeReelFlag||this.hasNudges()||this.hasReelStrikes()||this.hasBonus||this.stoppaReelFlag||this.hasFeatureFlag||this.fruitMachineInitAnimationFlag)){if(this.amountOfCoins<=0&&!this.freePlay)return this.rwxNoticeBox.setValue("No more coins"),void console.log("BUY MORE COINS!");this.numberTrailHeldFromBonus=!1,this.freePlay||e||(this.amountOfCoins-=this.costPerSpin),!this.numberTrailHeld&&this.enableNumbers&&(this.reelNumbers=0,this.updateNumberTrail());for(var t=0;t<this.numberOfReels;t++){var i=e||"spin";this.setReelRotation(t,i)}this.determineWinLine(),(this.hasWonFlag||this.hasBonus||this.hasFeature)&&this.flashButtonsReset();var r=this.reelHeldCounter.every((function(e){return 1==e}));r?this.reelsHaveSpun():this.spinReelsFlag=!0}}},{key:"stoppaReelEvent",value:function(e){if(e==this.stoppaReelIndex){this.stoppaReelPause=!0;for(var t=this.reels[e].rotation.x-this.cachedRotations[e],i=Math.round(t/l.default.toRadians(this.oneRotation)),r=this.currentFruits[e],n=0;n<i;n++)r=r==this.numberOfFruits-1?0:r+1;if(this.reels[e].rotation.x=r*l.default.toRadians(this.oneRotation),this.nextSpinValues[e]=r*l.default.toRadians(this.oneRotation),this.currentFruits[e]=r,this.flashButtonsReset(),this.stoppaReelIndex==this.numberOfReels-1)return this.stoppaReelFlag=!1,this.determineWinLine(),void this.reelsHaveSpun();this.stoppaReelIndex+=1,this.bonusStoppaReelSpeedDegrees=l.default.toRadians(this.bonusStoppaReelSpeed+this.stoppaReelIndex*this.bonusStoppaReelIncrement),this.stoppaReelPause=!1}}},{key:"stopReelStrike",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?(this.amountOfReelStrikes-=1,this.hasReelStrikes()?this.rwxDuoSelector.setValues([{displayName:"Gamble",value:"gamble"},{displayName:"Collect",value:"collect"}]).then((function(i){"gamble"==i?e.reelStrikeFlag=!0:(e.amountOfReelStrikes=0,e.spinReelsEvent(t),e.reelStrikeData.cache.material.opacity=.5)})):(this.spinReelsEvent(t),this.reelStrikeData.cache.material.opacity=.5)):this.reelStrikeStopFlag=!0}},{key:"reelStrike",value:function(){var e=this;if(this.reelStrikeStep1){var t=this.reelFruits[this.reelStrikeData.horizontalCounter][this.reelStrikeData.verticalToUse].name;Object.assign(this.reelStrikeData,this.reelStrikeDataInitial),this.stopReelStrike(t),this.reelStrikeStep1=!1,this.reelStrikeStep1Ease=!1,this.reelStrikeStopFlag=!1,this.reelStrikeFlag=!1}else{var i=this.reelStrikeSpeed;this.reelStrikeStopFlag&&(i=h.default.fromTo(this.reelStrikeSpeed,4*this.reelStrikeSpeed,"fromToReelStrike","linear",3e3,(function(){e.reelStrikeStep1=!0}))),this.reelStrikeData.timeoutCounter>=i&&(this.reelStrikeData.horizontalCounter==this.reels.length-1&&"fwd"==this.reelStrikeData.direction&&(this.reelStrikeData.direction="dwn"),2==this.reelStrikeData.verticalCounter&&"dwn"==this.reelStrikeData.direction&&(this.reelStrikeData.direction="bck"),0==this.reelStrikeData.horizontalCounter&&"bck"==this.reelStrikeData.direction&&(this.reelStrikeData.direction="up"),0==this.reelStrikeData.verticalCounter&&"up"==this.reelStrikeData.direction&&(this.reelStrikeData.direction="fwd"),"fwd"==this.reelStrikeData.direction&&(this.reelStrikeData.horizontalCounter+=1),"dwn"==this.reelStrikeData.direction&&(this.reelStrikeData.verticalCounter+=1),"bck"==this.reelStrikeData.direction&&(this.reelStrikeData.horizontalCounter-=1),"up"==this.reelStrikeData.direction&&(this.reelStrikeData.verticalCounter-=1),this.reelStrikeData.cache&&(this.reelStrikeData.cache.material.opacity=.5),this.reelStrikeData.verticalToUse=this.currentFruits[this.reelStrikeData.horizontalCounter]+this.reelStrikeData.verticalCounter-1,this.reelStrikeData.verticalToUse>12?this.reelStrikeData.verticalToUse=0:this.reelStrikeData.verticalToUse<0&&(this.reelStrikeData.verticalToUse=12),this.reelStrikeData.cache=this.reels[this.reelStrikeData.horizontalCounter].children[this.reelStrikeData.verticalToUse].children[0],this.reelStrikeData.cache.material.opacity=1,this.reelStrikeData.timeoutCounter=0),this.reelStrikeData.timeoutCounter+=1}}},{key:"nudgeReel",value:function(){var e=this;this.nudgeReelStep1?(this.nudgeReelFlag=!1,this.nudgeReelStep1=!1,this.nudgeReelStep1Ease=!1,this.nudgeReelFlag=!1):this.reels[this.reelToNudge].rotation.x=h.default.fromTo(this.currentSpinValues[this.reelToNudge],this.nextSpinValues[this.reelToNudge],"fromToNudgeReel","easeOutQuad",this.nudgeDuration,(function(){e.nudgeReelStep1=!0}))}},{key:"stoppaReel",value:function(){this.stoppaReelPause||(this.reels[this.stoppaReelIndex].rotation.x+=this.bonusStoppaReelSpeedDegrees,this.flashButtons(!1,this.stoppaReelIndex))}},{key:"spinNumberReel",value:function(){var e=this;if(this.spinNumberReelStep1)this.spinNumberReelStep1=!1,this.spinNumberReelStep1Ease=!1,this.numberReelSpinFlag=!1;else{var t=h.default.getEasingValue("easingValueSpinNumberReel","easeOutCubic",500,(function(){e.spinNumberReelStep1=!0}));this.numberReelPreviousRotation>this.numberReelCurrentRotation?0==this.numberReelCurrentRotation?this.numberReel.rotation.y=h.default.fromToCalc(this.numberReelPreviousRotation,0,t):this.numberReel.rotation.y=h.default.fromToCalc(this.numberReelPreviousRotation,this.numberReelPreviousRotation,t):this.numberReel.rotation.y=h.default.fromToCalc(this.numberReelPreviousRotation,this.numberReelCurrentRotation,t)}}},{key:"spinReels",value:function(){var e=this,t=function(t,i){if(e.spinTimeoutCounter<=e.spinTimeout*t)return"continue";if(e["spinReelsStep1-"+t])if(e["spinReelsStep2-"+t]){if(t==e.reels.length-1){e.reelsHaveSpun();for(var r=0;r<e.reels.length;r++)e["spinReelsStep1-"+r]=!1,e["spinReelsStep1-"+r+"Ease"]=!1,e["spinReelsStep2-"+r]=!1,e["spinReelsStep2-"+r+"Ease"]=!1;e.spinTimeoutCounter=0,e.spinReelsFlag=!1}}else 1==!e.reelHeldCounter[t]&&(i.rotation.x=h.default.fromTo(e.currentSpinValues[t]-e.spinMoveBackDegrees,e.spinLength+e.nextSpinValues[t],"fromToSpinReelsStep2-"+t,"easeInOutQuint",e.spinDuration,(function(){e["spinReelsStep2-"+t]=!0})));else 1==!e.reelHeldCounter[t]&&(i.rotation.x=h.default.fromTo(e.currentSpinValues[t],e.currentSpinValues[t]-e.spinMoveBackDegrees,"fromToSpinReelsStep1-"+t,"easeOutQuad",e.spinMoveBackDuration,(function(){e["spinReelsStep1-"+t]=!0})))},i=!0,n=!1,a=void 0;try{for(var o,s=this.reels.entries()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value,l=r(u,2);t(l[0],l[1])}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}this.spinTimeoutCounter+=1}},{key:"judderReels",value:function(){var e=!0,t=!1,i=void 0;try{for(var n,a=this.reels.entries()[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var o=n.value,s=r(o,2),u=s[0],h=s[1];0==this.judderReelCounter[u]&&(h.rotation.x-=l.default.toRadians(1)),4==this.judderReelCounter[u]&&(h.rotation.x-=l.default.toRadians(2)),8==this.judderReelCounter[u]&&(h.rotation.x+=l.default.toRadians(1)),12==this.judderReelCounter[u]&&(h.rotation.x+=l.default.toRadians(2)),this.judderReelCounter[u]+=1,16==this.judderReelCounter[u]&&(this.judderReelCounter[u]=0)}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}}},{key:"winAnimation",value:function(){var e=this;if(this.flashButtons(),this.winAnimationTimeoutCounter<this.winJudderDuration)this.judderReels();else{if(!this.winSpin){var t=h.default.getEasingValue("easingValueWinAnimation","linear",this.winAnimationDuration,(function(){e.winSpin=!0})),i=!0,n=!1,a=void 0;try{for(var o,s=this.reels.entries()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value,l=r(u,2),d=l[0],c=l[1];c.rotation.x=d%2==0?h.default.fromToCalc(this.nextSpinValues[d],this.nextSpinValues[d]-this.winSpinLength,t):h.default.fromToCalc(this.nextSpinValues[d],this.nextSpinValues[d]+this.winSpinLength,t)}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}this.numberReel.rotation.y=h.default.fromToCalc(0,this.numberReelCurrentRotation+this.winSpinLength,t)}if(this.zoomThroughReelsStep1)if(this.zoomThroughReelsStep2)if(this.zoomThroughReelsStep3){this.flashButtonsReset(),this.winSpin=!1,this.winSpinEase=!1;for(var f=1;f<4;f++)this["zoomThroughReelsStep"+f]=!1,this["zoomThroughReelsStep"+f+"Ease"]=!1;var m=0;this.judderReelCounter=[];for(var p=0;p<this.numberOfReels;p++)this.judderReelCounter.push(m),m+=2;this.winAnimationTimeoutCounter=0,this.hasWonFlag=!1}else{var v=h.default.getEasingValue("easingValueWinAnimationZTRS3","easeInOutQuad",this.zoomThroughReelsStep3Duration,(function(){e.zoomThroughReelsStep3=!0}));this.camera.position.set(h.default.fromToCalc(this.zoomThroughReelsFinishX,this.cameraPositionDefault.x,v),h.default.fromToCalc(this.reelYPos,this.cameraPositionDefault.y,v),h.default.fromToCalc(this.zoomThroughReelsZ,this.cameraPositionDefault.z,v))}else{var b=h.default.fromTo(this.zoomThroughReelsStartX,this.zoomThroughReelsFinishX,"easingValueWinAnimationZTRS2","easeInOutQuad",this.zoomThroughReelsStep2Duration,(function(){e.zoomThroughReelsStep2=!0}));this.camera.position.set(b,this.reelYPos,this.zoomThroughReelsZ)}else{var y=h.default.getEasingValue("easingValueWinAnimationZTRS1","easeOutCubic",this.zoomThroughReelsStep1Duration,(function(){e.zoomThroughReelsStep1=!0}));this.camera.position.set(h.default.fromToCalc(this.cameraPositionDefault.x,this.zoomThroughReelsStartX,y),h.default.fromToCalc(this.cameraPositionDefault.y,this.reelYPos,y),h.default.fromToCalc(this.cameraPositionDefault.z,this.zoomThroughReelsZ,y))}}this.winAnimationTimeoutCounter+=1}},{key:"flashButtonsReset",value:function(){this.flashButtonsFlag=!1,this.flashOpacityCounter=1,this.flashOpacityDirection="DOWN";var e=!0,t=!1,i=void 0;try{for(var r,n=this.reelControlButtons[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var a=r.value;a.material.opacity=.5,a.position.y=this.buttonYPosition}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}}},{key:"flashButtons",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.flashOpacityCounter<=.5&&(this.flashOpacityDirection="UP"),this.flashOpacityCounter>=1&&(this.flashOpacityDirection="DOWN"),this.flashOpacityCounter="DOWN"==this.flashOpacityDirection?this.flashOpacityCounter-this.flashButtonsSpeed:this.flashOpacityCounter+this.flashButtonsSpeed;var i=!0,n=!1,a=void 0;try{for(var o,s=this.reelControlButtons.entries()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value,l=r(u,2),h=l[0],d=l[1];(e||h==t)&&(1===this.reelHeldCounter[h]?(d.material.opacity=1,d.position.y=this.buttonYPosition):(d.material.opacity=this.flashOpacityCounter,d.position.y=this.buttonYPosition-(1-this.flashOpacityCounter)))}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}}},{key:"fruitMachineInitAnimation",value:function(){var e=this,t=function(t,i){if(e.timeoutCounter<=i.timeout)return"continue";if(e["fruitMachineInitialAnimationStep1-"+t])t==e.fruitMachineInitAnimationData.reelFaces.length-1&&e.fruitMachineInitialAnimationStep3&&e.fruitMachineInitialAnimationStep2&&e.fruitMachineInitialAnimationStep4&&e.fruitMachineInitialAnimationStep5&&(e.fruitMachineInitAnimationFlag=!1);else{var r=h.default.getEasingValue("easingValueFruitMachineInitialAnimationStep1-"+t,"easeInOutQuart",4e3,(function(){e["fruitMachineInitialAnimationStep1-"+t]=!0}));i.face.position.set(h.default.fromToCalc(i.start.x,i.finish.x,r),h.default.fromToCalc(i.start.y,i.finish.y,r),h.default.fromToCalc(i.start.z,i.finish.z,r)),i.face.rotation.y=h.default.fromToCalc(0,e.initialAnimationConfigurables.amountOfSpin+i.rotation,r)}},i=!0,n=!1,a=void 0;try{for(var o,s=this.fruitMachineInitAnimationData.reelFaces.entries()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value,l=r(u,2);t(l[0],l[1])}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}if(this.enableNumbers&&!this.fruitMachineInitialAnimationStep5){if(this.timeoutCounter>100){var d=h.default.getEasingValue("easingValueFruitMachineInitialAnimationStep5","easeOutQuart",5e3,(function(){e.fruitMachineInitialAnimationStep5=!0})),c=!0,f=!1,m=void 0;try{for(var p,v=this.fruitMachineInitAnimationData.numberReel[Symbol.iterator]();!(c=(p=v.next()).done);c=!0){var b=p.value;b.reel.position.y=h.default.fromToCalc(b.start.y,0,d),b.reel.position.z=h.default.fromToCalc(b.start.z,b.finish.z,d),b.reel.rotation.y=h.default.fromToCalc(0,this.initialAnimationConfigurables.amountOfSpin,d)}}catch(e){f=!0,m=e}finally{try{!c&&v.return&&v.return()}finally{if(f)throw m}}}}else this.initialAnimationStep5=!0;if(!this.fruitMachineInitialAnimationStep4){var y=h.default.getEasingValue("easingValueFruitMachineInitialAnimationStep4","easeInOutCubic",5e3,(function(){e.fruitMachineInitialAnimationStep4=!0})),g=!0,S=!1,x=void 0;try{for(var R,C=this.fruitMachineInitAnimationData.buttons[Symbol.iterator]();!(g=(R=C.next()).done);g=!0){var w=R.value;w.button.position.y=h.default.fromToCalc(w.starty,w.finishy,y)}}catch(e){S=!0,x=e}finally{try{!g&&C.return&&C.return()}finally{if(S)throw x}}}if(!this.fruitMachineInitialAnimationStep3&&this.timeoutCounter>20){var O=h.default.getEasingValue("easingValueFruitMachineInitialAnimationStep3","easeInOutQuart",4e3,(function(){e.fruitMachineInitialAnimationStep3=!0})),T=!0,k=!1,F=void 0;try{for(var I,B=this.fruitMachineInitAnimationData.reelEdges[Symbol.iterator]();!(T=(I=B.next()).done);T=!0){var D=I.value;D.edge.position.y=h.default.fromToCalc(D.starty,D.finishy,O),D.outline.position.y=h.default.fromToCalc(D.starty,D.finishy,O)}}catch(e){k=!0,F=e}finally{try{!T&&B.return&&B.return()}finally{if(k)throw F}}}if(!this.fruitMachineInitialAnimationStep2){var M=h.default.getEasingValue("easingValueFruitMachineInitialAnimationStep2","easeInOutQuad",6e3,(function(){e.fruitMachineInitialAnimationStep2=!0}));this.camera.position.x=h.default.fromToCalc(this.cameraPositionDefault.x+this.initialAnimationConfigurables.cameraX,this.cameraPositionDefault.x,M),this.camera.position.z=h.default.fromToCalc(this.cameraPositionDefault.z+this.initialAnimationConfigurables.cameraZ,this.cameraPositionDefault.z,M)}this.timeoutCounter+=1}}]),t}(o.FeatureBoard)},187:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureBoard=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(39)),o=i(95),s=c(i(188)),u=c(i(47)),l=c(i(64)),h=c(i(66)),d=c(i(46));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}t.FeatureBoard=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.featureBoardDevelop=!1}return n(e,[{key:"createFeatureBoard",value:function(){this.createCubes(),this.createDice(),this.createHeartsAndIcons(),this.createDOMHolders(),this.fbGeometryGroup.add(this.fbCubesGroup),this.fbGeometryGroup.add(this.fbPersistentZGroup),this.fbGeometryGroup.rotation.y=h.default.toRadians(-90),this.fbGeometryGroup.position.set(this.featureCameraPositionDefault.x+this.fbCameraDistance,this.featureCameraPositionDefault.y,this.featureCameraPositionDefault.z),this.scene.add(this.fbGeometryGroup)}},{key:"createHeartsAndIcons",value:function(){var e=[{id:"heart",image:i(96),variable:"heartsArray"},{id:"icon",image:i(97),variable:"iconsArray"}],t=!0,r=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)for(var u=a.value,l=0;l<this.maxNumberOfIcons;l++){var h=new s.default(u.image,"feature-board-"+u.id+(l+1)+"-container");this[u.variable].push(h),h.getNode().classList.add("dom-element-hide")}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}},{key:"createDOMHolders",value:function(){var e=void 0,t=void 0,i=void 0,r=void 0,n=void 0,s=!0,u=!1,l=void 0;try{for(var h,d=this.fbDOMElements[Symbol.iterator]();!(s=(h=d.next()).done);s=!0){var c=h.value;e=new a.BoxBufferGeometry(1,1,1),t=new a.MeshStandardMaterial({color:0}),(i=new a.Mesh(e,t)).position.x=c.position.x,i.position.y=c.position.y,c.helperTipID&&this.checkAndApplyHelperTip(i,c.helperTipID),r=document.getElementById(c.domID),n=new o.CSS2DObject(r),i.add(n),i.visible=!1,this.fbPersistentZGroup.add(i)}}catch(e){u=!0,l=e}finally{try{!s&&d.return&&d.return()}finally{if(u)throw l}}}},{key:"createDice",value:function(){for(var e=void 0,t=void 0,i=0;i<2;i++){var r=[],n={};e=new a.BoxBufferGeometry(this.diceSize,this.diceSize,this.diceSize),this.addCubeFaceGroups(e),r.push(new a.MeshStandardMaterial({color:this.diceColor}));var o=!0,s=!1,u=void 0;try{for(var l,d=this.diceNumbers[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var c=l.value;0==i&&1==c.value||1==i&&2==c.value?r.push(new a.MeshStandardMaterial({color:this.diceColor})):r.push(new a.MeshStandardMaterial({transparent:!0,map:c.texture}))}}catch(e){s=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw u}}(t=new a.Mesh(e,r)).position.x=0==i?-this.diceSize:this.diceSize,n[6]=new a.Vector3(h.default.toRadians(180),0,0),n[5]=new a.Vector3(0,0,0),n[4]=new a.Vector3(h.default.toRadians(270),0,0),n[3]=new a.Vector3(h.default.toRadians(90),0,0),0==i&&(n[2]=new a.Vector3(0,h.default.toRadians(90),0)),1==i&&(n[1]=new a.Vector3(0,-h.default.toRadians(90),0)),n[0]=0==i?new a.Vector3(0,-h.default.toRadians(90),0):new a.Vector3(0,h.default.toRadians(90),0),t.rotations=n,0==i&&this.checkAndApplyHelperTip(t,"helper-tip-dice"),this.dice.push(t),this.fbPersistentZGroup.add(t),this.ableToGambleHI=!0,this.ableToGambleLO=!0,this.currentNumber=10}}},{key:"createCubes",value:function(){for(var e=(this.numberOfOuterBoardSquares/4+1)/2,t=(this.numberOfInnerBoardSquares/4+1)/2,i=void 0,r=void 0,n=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,c=void 0,f=void 0,m=void 0,p=void 0,v=void 0,b=void 0,y=0;y<2;y++){s=0==y?this.numberOfOuterBoardSquares:this.numberOfInnerBoardSquares,m=-(f=e*(c=0==y?this.outerBoardCubeSpacing:this.innerBoardCubeSpacing)-c/2),p=-(v=t*c-c/2);var g=this.buildTextureToCubeMappingArray(s,0==y);u=s/4,b=0==y?0:this.innerBoardInactiveOpacity,l=0==y?m:p,d=0==y?f:v;for(var S=0;S<s;S++)i=new a.BoxBufferGeometry(this.cubeSize,this.cubeSize,this.cubeSize),this.addCubeFaceGroups(i),r=new a.MeshStandardMaterial({color:this.cubeColor,transparent:!0,opacity:b}),n=new a.MeshStandardMaterial({transparent:!0,map:this.cubeTextures[g[S]].texture,opacity:b}),(o=new a.Mesh(i,[r,n,n,n,n,n,n])).position.x=l,o.position.y=d,1==y?o.position.z=-this.innerBoardDistance:o.rotation.x=h.default.toRadians(-90),(0==y?this.outerCubes:this.innerCubes).push({functionToRun:this.cubeTextures[g[S]].functionToRun,functionToRunValues:this.cubeTextures[g[S]].functionToRunValues,cube:o}),this.fbCubesGroup.add(o),S<=u-1?l+=c:S>u-1&&S<=2*u-1?d-=c:S>2*u-1&&S<=3*u-1?l-=c:S>3*u-1&&(d+=c)}}},{key:"endFeature",value:function(){this.endFeatureFlag=!0,this.showDOMelements(!1,this.fbDOMElements.map((function(e){return e.domID}))),this.switchLights("fruit-machine")}},{key:"runCubeAction",value:function(e){var t=this.getCurrentBoardCubes();e||(t[this.currentNumberIndex].functionToRunValues?this[t[this.currentNumberIndex].functionToRun](t[this.currentNumberIndex].functionToRunValues):this[t[this.currentNumberIndex].functionToRun]()),"mystery"==t[this.currentNumberIndex].functionToRun||"moveToBoard"==t[this.currentNumberIndex].functionToRun?(this.ableToGambleHI=!1,this.ableToGambleLO=!1):(this.ableToGambleHI=this.gambleNumber?this.gambleNumber<12:this.currentNumber<12,this.ableToGambleLO=this.gambleNumber?this.gambleNumber>1:this.currentNumber>1),this.randomFeatureBoardCubeRotationMesh=t[this.currentNumberIndex].cube,this.rotateFeatureBoardCubeFlag=!0,t[this.currentNumberIndex].cube.rotation.x=h.default.toRadians(45),this.diceRolled=!1,this.hilo=!1}},{key:"diceHasRolled",value:function(){var e=this;this.getCurrentBoardCubes();if(this.diceGambled)this.diceGambleWon?(this.rwxNoticeBox.setValue("Gamble Won",!0),this.runCubeAction(this.hilo)):(this.gameOver(),this.hilo=!1,this.diceRolled=!1);else{var t=this.getCurrentNumberOfSquares(),i=this.currentNumberIndex+this.currentNumber;this.currentNumberIndex=i>t-1?i-t:i;var r=setInterval((function(){e.prevNumberIndex+=1,e.prevNumberIndex>t-1&&(e.prevNumberIndex=0),e.setPointLightToCube(e.prevNumberIndex),e.prevNumberIndex==e.currentNumberIndex&&(clearInterval(r),e.runCubeAction())}),this.moveCubeSpeed)}}},{key:"buildTextureToCubeMappingArray",value:function(e,t){var i=[],n=[],a=this.cubeTextures.filter((function(e,t){return"reserved"==e.type&&i.push(t),"reserved"==e.type})),o=this.cubeTextures.filter((function(e,t){return"random"==e.type&&n.push(t),"random"==e.type})),s=[],h=!0,d=!1,c=void 0;try{for(var f,m=a.entries()[Symbol.iterator]();!(h=(f=m.next()).done);h=!0)for(var p=f.value,v=r(p,2),b=v[0],y=v[1],g=t?y.outerAmountOfSquares:y.innerAmountOfSquares,S=0;S<g;S++)s.push(i[b])}catch(e){d=!0,c=e}finally{try{!h&&m.return&&m.return()}finally{if(d)throw c}}for(var x=t?this.numberOfOuterBoardSquares-s.length:this.numberOfInnerBoardSquares-s.length,R=0;R<x;R++){var C=u.default.randomInt(0,o.length-1);s.push(n[C])}return l.default.shuffleArray(s),s}},{key:"addFeatureBoardValues",value:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("minus"!=e.direction||0!=this[e.variable]){var r=[].concat(f(e.values)).filter((function(e){return"numberPicker"!=e})),n=i?e.values:r,a=n[u.default.randomInt(0,n.length-1)];if("minus"==e.direction&&this[e.variable]-a<0&&(a=this[e.variable]),!(a<0)){var o=function(i){var r=1==i?e.text:e.text+"s";r=e.direction+" "+i+" "+r;var n="minus"==e.direction?-i:i;t[e.variable]+=n,t.multiAdding?t.rwxNoticeBox.setValue(r,!0,(function(){t.multiAdding=!1})):t.rwxNoticeBox.setValue(r,!0)};"numberPicker"==a?(this.rwxNoticeBox.setValue("How Much?"),this.hasNumberPicker=!0,this.numberPicker.setOptions(r).then((function(e){o(e),t.hasNumberPicker=!1}))):o(a)}}}},{key:"stopStoppaOrTaxi",value:function(){clearInterval(this.stoppaOrTaxiInterval),this.stoppaOrTaxiRunning=!1,this.runCubeAction()}},{key:"setStoppaOrTaxiTimout",value:function(){var e=this;setTimeout((function(){e.stoppaOrTaxiRunning&&e.stopStoppaOrTaxi()}),this.stoppaOrTaxiTimeout)}},{key:"stoppa",value:function(){var e=this;this.stoppaOrTaxiRunning=!0;var t=this.getCurrentBoardCubes().length;this.stoppaOrTaxiInterval=setInterval((function(){var i=u.default.randomInt(0,t-1);e.setPointLightToCube(i),e.currentNumberIndex=i}),this.moveCubeSpeed),this.setStoppaOrTaxiTimout()}},{key:"taxi",value:function(){var e=this;this.stoppaOrTaxiRunning=!0;var t=this.getCurrentBoardCubes().length;this.stoppaOrTaxiInterval=setInterval((function(){e.currentNumberIndex+=1,e.currentNumberIndex>t-1&&(e.currentNumberIndex=0),e.setPointLightToCube(e.currentNumberIndex)}),this.moveCubeSpeed),this.setStoppaOrTaxiTimout()}},{key:"moveToBoard",value:function(){"outer"==this.currentBoard?(this.rwxNoticeBox.setValue("Move In",!0),this.currentBoard="inner",this.moveInFlag=!0,this.stoppa()):(this.rwxNoticeBox.setValue("Move Out",!0),this.currentBoard="outer",this.moveOutFlag=!0,this.stoppa())}},{key:"multiAdd",value:function(){var e=this;this.multiAdding=!0;var t=0,i=function(i){if(e.availableForMultiAdd.includes(i.name)){if(1==u.default.randomInt(0,1))return"continue";setTimeout((function(){i.functionToRunValues?e[i.functionToRun](i.functionToRunValues,!1):e[i.functionToRun]()}),t),t+=750}},r=!0,n=!1,a=void 0;try{for(var o,s=this.cubeTextures[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)i(o.value)}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}}},{key:"fbBonus",value:function(){this.hasBonus=!0;var e="outer"==this.currentBoard?this.featureBoardBonuses:this.featureBoardBonuses.filter((function(e){return"Move In"!=e.displayName}));this.setTombola(e,"hasBonus")}},{key:"addHeart",value:function(){this.hasExtraLife()||(this.heartsArray[this.numberOfHearts].up(),this.numberOfHearts+=1,this.hasExtraLife()?this.rwxSlideTicker.setValue("Extra Life"):this.rwxNoticeBox.setValue("Add Heart",!0))}},{key:"addIcon",value:function(){this.hasGame()||(this.iconsArray[this.numberOfIcons].up(),this.numberOfIcons+=1,this.rwxNoticeBox.setValue("Add Icon",!0),this.hasGame()&&this.rwxSlideTicker.setValue("Coming Soon"))}},{key:"mystery",value:function(){this.hasMystery=!0,this.setTombola(this.featureBoardMystery,"hasMystery")}},{key:"gameOver",value:function(){if(this.hasExtraLife())return this.numberOfHearts=0,this.heartsArray.map((function(e){return e.down()})),void this.rwxSlideTicker.setValue("Extra Life");this.featureBoardDevelop||(this.rwxSlideTicker.setValue("Game Over"),this.endFeature())}},{key:"cancelCollect",value:function(){clearInterval(this.collectionInterval),this.rwxNoticeBox.close(),this.collectionFlashing=!1,this.collectables.map((function(e){document.getElementById(e.domID).classList.remove("collection-background")}))}},{key:"collect",value:function(){var e=this;if(this.collectionFlashing){clearInterval(this.collectionInterval);var t=void 0;this.collectables.map((function(e){document.getElementById(e.domID).classList.contains("collection-background")&&(t=e)})),this.collected(t)}else{var i=[];if(this.collectables.map((function(t){e[t.variable]>0&&i.push(t)})),0==i.length)return void console.log("Nothing available to collect");this.rwxNoticeBox.setValue("Press enter again to collect highlighted item");var n=0;this.collectionFlashing=!0;var a=this.getCurrentSquare().functionToRun;if("mystery"==a||"gameOver"==a)return;this.collectionInterval=setInterval((function(){n==i.length&&(n=0);var t=!0,a=!1,o=void 0;try{for(var s,u=i.entries()[Symbol.iterator]();!(t=(s=u.next()).done);t=!0){var l=s.value,h=r(l,2),d=h[0],c=h[1];n==d&&0!==e[c.variable]?document.getElementById(c.domID).classList.add("collection-background"):document.getElementById(c.domID).classList.remove("collection-background")}}catch(e){a=!0,o=e}finally{try{!t&&u.return&&u.return()}finally{if(a)throw o}}n+=1}),1e3)}}},{key:"collected",value:function(e){this.cancelCollect(),this.hasCollected=e,this.rwxSlideTicker.setValue("Collected "+e.text),this.endFeature()}},{key:"continue",value:function(){}},{key:"rollEvenOddStop",value:function(){this.rollEvenOddFlag=!1;var e=0,t=function(t,i){var r=Math.round(i.rotation.x/h.default.toRadians(90)),n=r-4*Math.floor(r/4),o=h.default.toRadians(90*n);i.rotation.x=o;var s=new a.Vector3(o,0,0),u=Object.keys(i.rotations).filter((function(e){return i.rotations[e].x==s.x&&i.rotations[e].y==s.y}));e+=parseInt(u[0])},i=!0,n=!1,o=void 0;try{for(var s,u=this.dice.entries()[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,d=r(l,2);d[0];t(0,d[1])}}catch(e){n=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(n)throw o}}this.rollingEven&&e%2==0||this.rollingOdd&&e%2!=0?this.rwxNoticeBox.setValue("Good Job!",!0):this.gameOver(),this.currentNumber=e,this.rollingEven=!1,this.rollingOdd=!1,this.rollEvenOddResetStep1=!1,this.rollEvenOddResetStep1Ease=!1}},{key:"rollEven",value:function(){this.rwxNoticeBox.setValue("Roll Even.."),this.cachedRotations=this.getCurrentDiceRotations(),this.rollingEven=!0,this.rollEvenOddFlag=!0}},{key:"rollOdd",value:function(){this.rwxNoticeBox.setValue("Roll Odd.."),this.cachedRotations=this.getCurrentDiceRotations(),this.rollingOdd=!0,this.rollEvenOddFlag=!0}},{key:"hiloContinue",value:function(){this.rwxNoticeBox.setValue("HI / LO Continue.."),this.ableToGambleHI=this.currentNumber<12,this.ableToGambleLO=this.currentNumber>1,this.hilo=!0}},{key:"loseWithCashpot",value:function(){this.collected({variable:"coinCount",text:"Coins",fmLinkVariable:"amountOfCoins"})}},{key:"rollDiceEvent",value:function(e){if(this.collectionFlashing&&this.cancelCollect(),!(this.diceRolled||this.stoppaRunning||this.multiAdding||this.hasNumberPicker||this.hasNumberPicker||this.hasMystery||this.hasBonus||this.hasMystery||this.stoppaOrTaxiRunning||this.endFeatureFlag||this.featureBoardInitAnimationFlag||this.rollEvenOddFlag)){this.diceRolled=!0,this.prevRotations=this.getCurrentDiceRotations(),this.rotationData=this.generateRandomRotations();var t=this.gambleNumber?this.gambleNumber:this.currentNumber;"GAMBLEHI"==e?(this.rwxNoticeBox.setValue("Going Higher",!0),this.diceGambled=!0,1==t?(this.gambleNumber=u.default.randomInt(2,12),this.diceGambleWon=!0):(this.diceGambleWon=0==u.default.randomInt(0,this.diceGambleWinProbability),this.gambleNumber=this.diceGambleWon?u.default.randomInt(t+1,12):u.default.randomInt(1,t-1))):"GAMBLELO"==e?(this.rwxNoticeBox.setValue("Going Lower",!0),this.diceGambled=!0,12==t?(this.gambleNumber=u.default.randomInt(1,11),this.diceGambleWon=!0):(this.diceGambleWon=0==u.default.randomInt(0,this.diceGambleWinProbability),this.gambleNumber=this.diceGambleWon?u.default.randomInt(1,t-1):u.default.randomInt(t+1,12))):"ROLL"==e&&(this.diceGambled=!1,this.prevNumberIndex=this.currentNumberIndex,this.gambleNumber=!1,this.currentNumber=u.default.randomInt(1,12)),t=this.gambleNumber?this.gambleNumber:this.currentNumber,this.diceLayout=this.getDiceLayout(t),this.rollDiceFlag=!0}}},{key:"addCubeFaceGroups",value:function(e){e.clearGroups(),e.addGroup(0,1/0,0);for(var t=0;t<6;t++)e.addGroup(6*t,6,t+1)}},{key:"setPointLightToCube",value:function(e){this.getCurrentBoardCubes()[e].cube.getWorldPosition(this.cubeLightPosition),this.cubeLight.position.set(this.cubeLightPosition.x-5,this.cubeLightPosition.y,this.cubeLightPosition.z)}},{key:"hasGame",value:function(){return this.numberOfIcons==this.maxNumberOfIcons}},{key:"hasExtraLife",value:function(){return this.numberOfHearts==this.maxNumberOfIcons}},{key:"getCurrentDiceRotations",value:function(){return this.dice.map((function(e){return new a.Vector3(e.rotation.x,e.rotation.y,e.rotation.z)}))}},{key:"getCurrentNumberOfSquares",value:function(){return"outer"==this.currentBoard?this.numberOfOuterBoardSquares:this.numberOfInnerBoardSquares}},{key:"getCurrentBoardCubes",value:function(){return"outer"==this.currentBoard?this.outerCubes:this.innerCubes}},{key:"getDiceLayout",value:function(e){return this.diceLayouts[e][u.default.randomInt(0,this.diceLayouts[e].length-1)]}},{key:"getCurrentSquare",value:function(){return this.getCurrentBoardCubes()[this.currentNumberIndex]}},{key:"generateRandomRotations",value:function(){var e=this,t=0,i=0,r=0;return this.dice.map((function(n){var a=u.default.randomInt(0,1),o=u.default.randomInt(0,1),s=a||o?u.default.randomInt(0,1):1;return a&&(t=0==u.default.randomInt(0,1)?e.diceSpinLength:-e.diceSpinLength),o&&(i=0==u.default.randomInt(0,1)?e.diceSpinLength:-e.diceSpinLength),s&&(r=0==u.default.randomInt(0,1)?e.diceSpinLength:-e.diceSpinLength),{x:a,y:o,z:s,spinX:t,spinY:i,spinZ:r}}))}},{key:"rollEvenOdd",value:function(){var e=this;if(this.rollEvenOddResetStep1){var t=!0,i=!1,n=void 0;try{for(var a,o=this.dice.entries()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value,u=r(s,2),l=u[0];u[1].rotation.x+=0==l?this.rollEvenOddDegrees:-this.rollEvenOddDegrees}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}}else{var h=d.default.getEasingValue("easingValueRollEvenOdd","linear",500,(function(){e.rollEvenOddResetStep1=!0})),c=!0,f=!1,m=void 0;try{for(var p,v=this.dice.entries()[Symbol.iterator]();!(c=(p=v.next()).done);c=!0){var b=p.value,y=r(b,2),g=y[0];y[1].rotation.set(d.default.fromToCalc(this.cachedRotations[g].x,0,h),d.default.fromToCalc(this.cachedRotations[g].y,0,h),d.default.fromToCalc(this.cachedRotations[g].z,0,h))}}catch(e){f=!0,m=e}finally{try{!c&&v.return&&v.return()}finally{if(f)throw m}}}}},{key:"rotateFeatureBoardCube",value:function(){var e=this;this.rotateFeatureBoardCubeStep1?(this.rotateFeatureBoardCubeStep1=!1,this.rotateFeatureBoardCubeStep1Ease=!1,this.rotateFeatureBoardCubeFlag=!1):this.randomFeatureBoardCubeRotationMesh.rotation.x=d.default.fromTo(0,h.default.toRadians(90),"fromToRotateFeatureBoardCube","easeInOutQuart",500,(function(){e.rotateFeatureBoardCubeStep1=!0}))}},{key:"moveIn",value:function(){var e=this;if(this.moveInStep1)this.moveInStep1=!1,this.moveInStep1Ease=!1,this.moveInFlag=!1;else{var t=d.default.getEasingValue("easingValueMoveIn","easeInOutCubic",1e3,(function(){e.moveInStep1=!0}));this.camera.position.x=d.default.fromToCalc(this.featureCameraPositionDefault.x,this.featureCameraPositionDefault.x+this.innerBoardDistance,t),this.fbPersistentZGroup.position.z=d.default.fromToCalc(0,-this.innerBoardDistance,t),this.innerCubes.map((function(i){i.cube.material.map((function(i){return i.opacity=d.default.fromToCalc(e.innerBoardInactiveOpacity,1,t)}))}))}}},{key:"moveOut",value:function(){var e=this;if(this.moveOutStep1)this.moveOutStep1=!1,this.moveOutStep1Ease=!1,this.moveOutFlag=!1;else{var t=d.default.getEasingValue("easingValueMoveOut","easeInOutCubic",1e3,(function(){e.moveOutStep1=!0}));this.camera.position.x=d.default.fromToCalc(this.featureCameraPositionDefault.x+this.innerBoardDistance,this.featureCameraPositionDefault.x,t),this.fbPersistentZGroup.position.z=d.default.fromToCalc(-this.innerBoardDistance,0,t),this.innerCubes.map((function(i){i.cube.material.map((function(i){return i.opacity=d.default.fromToCalc(1,e.innerBoardInactiveOpacity,t)}))}))}}},{key:"rollDice",value:function(){var e=this;if(this.rollDiceStep1)this.diceHasRolled(),this.rollDiceStep1=!1,this.rollDiceStep1Ease=!1,this.rollDiceFlag=!1;else{var t=d.default.getEasingValue("easingValueRollDice","easeOutQuad",this.diceSpinDuration,(function(){e.rollDiceStep1=!0})),i=!0,n=!1,a=void 0;try{for(var o,s=this.dice.entries()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value,l=r(u,2),h=l[0],c=l[1];c.rotation.set(d.default.fromToCalc(this.prevRotations[h].x-this.rotationData[h].spinX,this.rotationData[h].spinX+c.rotations[this.diceLayout[h]].x,t),d.default.fromToCalc(this.prevRotations[h].y-this.rotationData[h].spinY,this.rotationData[h].spinY+c.rotations[this.diceLayout[h]].y,t),d.default.fromToCalc(this.prevRotations[h].z-this.rotationData[h].spinZ,this.rotationData[h].spinZ+c.rotations[this.diceLayout[h]].z,t))}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}}}},{key:"featureBoardInitAnimation",value:function(){var e=this,t=function(t,i){if(e.timeoutPerCubeCounter<=e.initialAnimationConfigurables.timeoutPerCube*t)return"continue";if(e["featureBoardInitialAnimationStep1-"+t]){if(t==e.outerCubes.length-1){e.featureBoardDevelop||(e.showDOMelements(!0,e.fbDOMElements.map((function(e){return e.domID}))),e.stoppa());for(var r=0;r<e.outerCubes.length;r++)e["featureBoardInitialAnimationStep1-"+r]=!1,e["featureBoardInitialAnimationStep1-"+r+"Ease"]=!1;e.featureBoardInitAnimationFlag=!1}}else{var n=d.default.getEasingValue("easingValueFeatureBoardInitAnimation-"+t,"easeOutQuart",500,(function(){e["featureBoardInitialAnimationStep1-"+t]=!0}));i.cube.rotation.x=d.default.fromToCalc(h.default.toRadians(-90),h.default.toRadians(0),n),i.cube.material.map((function(e){return e.opacity=d.default.fromToCalc(0,1,n)}))}},i=!0,n=!1,a=void 0;try{for(var o,s=this.outerCubes.entries()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value,l=r(u,2);t(l[0],l[1])}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}this.timeoutPerCubeCounter+=1}}]),e}()},188:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i(189);var a=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(this,e),this.src=t,this.id=i,this.container=r?document.querySelector(r):document.body,this.htmlDefinition()}return r(e,[{key:"htmlDefinition",value:function(){var e=void 0,t=void 0,i=void 0,r=void 0;(e=document.createElement("div")).classList.add("one-up"),e.id=this.id,(t=document.createElement("div")).classList.add("one-up-scale"),(i=document.createElement("div")).classList.add("one-up-rotate"),(r=document.createElement("img")).classList.add("one-up-color"),r.src=this.src,r.classList.add("one-up-image"),i.appendChild(r),t.appendChild(i),e.appendChild(t),this.scale=t,this.rotate=i,this.color=r,this.oneUp=e,this.container.appendChild(e)}},{key:"getNode",value:function(){return this.oneUp}},{key:"up",value:function(){this.scale.classList.add("go"),this.color.classList.add("go"),this.rotate.classList.add("go")}},{key:"down",value:function(){this.scale.classList.add("ungo"),this.color.classList.add("ungo"),this.rotate.classList.add("ungo")}},{key:"clear",value:function(){this.scale.classList.remove("go"),this.color.classList.remove("go"),this.rotate.classList.remove("go"),this.scale.classList.remove("ungo"),this.color.classList.remove("ungo"),this.rotate.classList.remove("ungo")}}]),e}();t.default=a},189:function(e,t,i){},190:function(e,t,i){e.exports=i.p+"fruitMachineAssets/zero.png"},191:function(e,t,i){e.exports=i.p+"fruitMachineAssets/bonus.png"},201:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(a(this,e),this.measureMeter=document.querySelector(t),this.measureMeter){this.numberOfIntervals=i,this.prevValue=n,this.timeout=100,this.createIntervals();var o=!0,s=!1,u=void 0;try{for(var l,h=this.intervals.entries()[Symbol.iterator]();!(o=(l=h.next()).done);o=!0){var d=l.value,c=r(d,2),f=c[0],m=c[1];if(f==n)break;m.classList.add("measure-meter-interval-fill")}}catch(e){s=!0,u=e}finally{try{!o&&h.return&&h.return()}finally{if(s)throw u}}}}return n(e,[{key:"createIntervals",value:function(){var e=void 0;this.intervals=[];for(var t=0;t<this.numberOfIntervals;t++)(e=document.createElement("span")).classList.add("measure-meter-interval"),this.measureMeter.appendChild(e),this.intervals.push(e)}},{key:"to",value:function(e){var t=this;if(this.prevValue!=e){var i;e<0?0:e,i=e>this.numberOfIntervals?this.numberOfIntervals:e;var r=setInterval((function(){t.prevValue==i||i<0?clearInterval(r):t.prevValue>i?(t.intervals[t.prevValue-1].classList.remove("measure-meter-interval-fill"),t.prevValue-=1):t.prevValue<i&&(t.intervals[t.prevValue].classList.add("measure-meter-interval-fill"),t.prevValue+=1)}),this.timeout)}}}]),e}();t.default=o},202:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=(s(i(203)),s(i(98))),o=s(i(47));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numberPicker=document.querySelector(t),this.numberPicker&&(this.timePerOption=100,this.zStarter=9e3,this.stop=this.stop.bind(this),this.numberPicker.addEventListener("click",this.stop))}return n(e,[{key:"setOptions",value:function(e){var t=this;if(1==e.length)return new Promise((function(t,i){t(e[0])}));this.numberPicker.innerHTML="";var i=void 0;this.options=[];var n=!0,a=!1,o=void 0;try{for(var s,u=e.entries()[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var l=s.value,h=r(l,2),d=h[0],c=h[1];(i=document.createElement("div")).classList.add("number-picker-option"),i.setAttribute("data-value",c),i.appendChild(document.createTextNode(c)),i.style.zIndex=d==e.length-1?this.zStarter+1:this.zStarter,this.numberPicker.appendChild(i),this.options.push(i),d==e.length-1&&(this.currentOptionIndex=d)}}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return this.start(),new Promise((function(e,i){t.callback=e}))}},{key:"stop",value:function(){var e=this;clearInterval(this.interval),this.options[this.currentOptionIndex].classList.add("result"),setTimeout((function(){e.callback(parseInt(e.options[e.currentOptionIndex].getAttribute("data-value"))),a.default.fadeOut(e.numberPicker)}),500)}},{key:"start",value:function(){var e=this;a.default.fadeIn(this.numberPicker);var t=void 0;this.interval=setInterval((function(){for(;(t=o.default.randomInt(0,e.options.length-1))==e.currentOptionIndex;);e.options[t].style.zIndex=e.zStarter+1,e.options[e.currentOptionIndex].style.zIndex=e.zStarter,e.currentOptionIndex=t}),this.timePerOption)}}]),e}();t.default=u},203:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={showDOMelements:function(e,t){var i=!0,r=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value,u=document.getElementById(s);e&&u.classList.remove("dom-element-hide"),!e&&u.classList.add("dom-element-hide")}}catch(e){r=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw n}}}};t.default=r},394:function(e,t,i){},96:function(e,t,i){e.exports=i.p+"fruitMachineAssets/heart.png"},97:function(e,t,i){e.exports=i.p+"fruitMachineAssets/icon.png"}});
//# sourceMappingURL=index.5092db5c.js.map